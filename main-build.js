/*! jQuery v@1.8.0 jquery.com | jquery.org/license */

//     Underscore.js 1.7.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*! DataTables 1.10.8
 * ©2008-2014 SpryMedia Ltd - datatables.net/license
 */

/**
 * @summary     DataTables
 * @description Paginate, search and order HTML tables
 * @version     1.10.8
 * @file        jquery.dataTables.js
 * @author      SpryMedia Ltd (www.sprymedia.co.uk)
 * @contact     www.sprymedia.co.uk/contact
 * @copyright   Copyright 2008-2014 SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */

/*
 * JQuery zTree core v3.5.19.2
 * http://zTree.me/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Licensed same as jquery - MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * email: hunter.z@263.net
 * Date: 2015-11-15
 */

/*
 * JQuery zTree excheck v3.5.19.2
 * http://zTree.me/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Licensed same as jquery - MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * email: hunter.z@263.net
 * Date: 2015-11-15
 */

/*!
 FixedHeader 3.1.0
 ©2009-2015 SpryMedia Ltd - datatables.net/license
*/

(function(e,t){function n(e){var t=dt[e]={};return Y.each(e.split(tt),function(e,n){t[n]=!0}),t}function r(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(mt,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:vt.test(r)?Y.parseJSON(r):r}catch(s){}Y.data(e,n,r)}else r=t}return r}function i(e){var t;for(t in e){if(t==="data"&&Y.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function s(){return!1}function o(){return!0}function u(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function a(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function f(e,t,n){t=t||0;if(Y.isFunction(t))return Y.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return Y.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=Y.grep(e,function(e){return e.nodeType===1});if(Bt.test(t))return Y.filter(t,r,!n);t=Y.filter(t,r)}return Y.grep(e,function(e,r){return Y.inArray(e,t)>=0===n})}function l(e){var t=It.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function c(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function h(e,t){if(t.nodeType!==1||!Y.hasData(e))return;var n,r,i,s=Y._data(e),o=Y._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)Y.event.add(t,n,u[n][r])}o.data&&(o.data=Y.extend({},o.data))}function p(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),Y.support.html5Clone&&e.innerHTML&&!Y.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Kt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(Y.expando)}function d(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function v(e){Kt.test(e.type)&&(e.defaultChecked=e.checked)}function m(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=gn.length;while(i--){t=gn[i]+n;if(t in e)return t}return r}function g(e,t){return e=t||e,Y.css(e,"display")==="none"||!Y.contains(e.ownerDocument,e)}function y(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=Y._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&g(n)&&(i[s]=Y._data(n,"olddisplay",S(n.nodeName)))):(r=nn(n,"display"),!i[s]&&r!=="none"&&Y._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function b(e,t,n){var r=ln.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function w(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=Y.css(e,n+mn[i],!0)),r?(n==="content"&&(s-=parseFloat(nn(e,"padding"+mn[i]))||0),n!=="margin"&&(s-=parseFloat(nn(e,"border"+mn[i]+"Width"))||0)):(s+=parseFloat(nn(e,"padding"+mn[i]))||0,n!=="padding"&&(s+=parseFloat(nn(e,"border"+mn[i]+"Width"))||0));return s}function E(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=Y.support.boxSizing&&Y.css(e,"boxSizing")==="border-box";if(r<=0){r=nn(e,t);if(r<0||r==null)r=e.style[t];if(cn.test(r))return r;i=s&&(Y.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+w(e,t,n||(s?"border":"content"),i)+"px"}function S(e){if(pn[e])return pn[e];var t=Y("<"+e+">").appendTo(R.body),n=t.css("display");t.remove();if(n==="none"||n===""){rn=R.body.appendChild(rn||Y.extend(R.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!sn||!rn.createElement)sn=(rn.contentWindow||rn.contentDocument).document,sn.write("<!doctype html><html><body>"),sn.close();t=sn.body.appendChild(sn.createElement(e)),n=nn(t,"display"),R.body.removeChild(rn)}return pn[e]=n,n}function x(e,t,n,r){var i;if(Y.isArray(t))Y.each(t,function(t,i){n||wn.test(e)?r(e,i):x(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&Y.type(t)==="object")for(i in t)x(e+"["+i+"]",t[i],n,r);else r(e,t)}function T(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(tt),u=0,a=o.length;if(Y.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function N(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Bn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=N(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=N(e,n,r,i,"*",o)),u}function C(e,n){var r,i,s=Y.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&Y.extend(!0,e,i)}function k(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function L(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function A(){try{return new e.XMLHttpRequest}catch(t){}}function O(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function M(){return setTimeout(function(){$n=t},0),$n=Y.now()}function _(e,t){Y.each(t,function(t,n){var r=(Zn[t]||[]).concat(Zn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function D(e,t,n){var r,i=0,s=0,o=Yn.length,u=Y.Deferred().always(function(){delete a.elem}),a=function(){var t=$n||M(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),i=0,s=f.tweens.length;for(;i<s;i++)f.tweens[i].run(r);return u.notifyWith(e,[f,r,n]),r<1&&s?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:Y.extend({},t),opts:Y.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:$n||M(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=Y.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;P(l,f.opts.specialEasing);for(;i<o;i++){r=Yn[i].call(f,e,l,f.opts);if(r)return r}return _(f,l),Y.isFunction(f.opts.start)&&f.opts.start.call(e,f),Y.fx.timer(Y.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function P(e,t){var n,r,i,s,o;for(n in e){r=Y.camelCase(n),i=t[r],s=e[n],Y.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=Y.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function H(e,t,n){var r,i,s,o,u,a,f,l,c=this,h=e.style,p={},d=[],v=e.nodeType&&g(e);n.queue||(f=Y._queueHooks(e,"fx"),f.unqueued==null&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,c.always(function(){c.always(function(){f.unqueued--,Y.queue(e,"fx").length||f.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],Y.css(e,"display")==="inline"&&Y.css(e,"float")==="none"&&(!Y.support.inlineBlockNeedsLayout||S(e.nodeName)==="inline"?h.display="inline-block":h.zoom=1)),n.overflow&&(h.overflow="hidden",Y.support.shrinkWrapBlocks||c.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Kn.exec(s)){delete t[r];if(s===(v?"hide":"show"))continue;d.push(r)}}o=d.length;if(o){u=Y._data(e,"fxshow")||Y._data(e,"fxshow",{}),v?Y(e).show():c.done(function(){Y(e).hide()}),c.done(function(){var t;Y.removeData(e,"fxshow",!0);for(t in p)Y.style(e,t,p[t])});for(r=0;r<o;r++)i=d[r],a=c.createTween(i,v?u[i]:0),p[i]=u[i]||Y.style(e,i),i in u||(u[i]=a.start,v&&(a.end=a.start,a.start=i==="width"||i==="height"?1:0))}}function B(e,t,n,r,i){return new B.prototype.init(e,t,n,r,i)}function j(e,t){var n,r={height:e},i=0;for(;i<4;i+=2-t)n=mn[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function F(e){return Y.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var I,q,R=e.document,U=e.location,z=e.navigator,W=e.jQuery,X=e.$,V=Array.prototype.push,$=Array.prototype.slice,J=Array.prototype.indexOf,K=Object.prototype.toString,Q=Object.prototype.hasOwnProperty,G=String.prototype.trim,Y=function(e,t){return new Y.fn.init(e,t,I)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=et.test(" ")?/^[\s\xA0]+|[\s\xA0]+$/g:/^\s+|\s+$/g,rt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,it=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^[\],:{}\s]*$/,ot=/(?:^|:|,)(?:\s*\[)+/g,ut=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,at=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ft=/^-ms-/,lt=/-([\da-z])/gi,ct=function(e,t){return(t+"").toUpperCase()},ht=function(){R.addEventListener?(R.removeEventListener("DOMContentLoaded",ht,!1),Y.ready()):R.readyState==="complete"&&(R.detachEvent("onreadystatechange",ht),Y.ready())},pt={};Y.fn=Y.prototype={constructor:Y,init:function(e,n,r){var i,s,o,u;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=rt.exec(e);if(i&&(i[1]||!n)){if(i[1])return n=n instanceof Y?n[0]:n,u=n&&n.nodeType?n.ownerDocument||n:R,e=Y.parseHTML(i[1],u,!0),it.test(i[1])&&Y.isPlainObject(n)&&this.attr.call(e,n,!0),Y.merge(this,e);s=R.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=R,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return Y.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Y.makeArray(e,this))},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length},toArray:function(){return $.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=Y.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return Y.each(this,e,t)},ready:function(e){return Y.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack($.apply(this,arguments),"slice",$.call(arguments).join(","))},map:function(e){return this.pushStack(Y.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:[].sort,splice:[].splice},Y.fn.init.prototype=Y.fn,Y.extend=Y.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!Y.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(Y.isPlainObject(i)||(s=Y.isArray(i)))?(s?(s=!1,o=r&&Y.isArray(r)?r:[]):o=r&&Y.isPlainObject(r)?r:{},u[n]=Y.extend(l,o,i)):i!==t&&(u[n]=i)}return u},Y.extend({noConflict:function(t){return e.$===Y&&(e.$=X),t&&e.jQuery===Y&&(e.jQuery=W),Y},isReady:!1,readyWait:1,holdReady:function(e){e?Y.readyWait++:Y.ready(!0)},ready:function(e){if(e===!0?--Y.readyWait:Y.isReady)return;if(!R.body)return setTimeout(Y.ready,1);Y.isReady=!0;if(e!==!0&&--Y.readyWait>0)return;q.resolveWith(R,[Y]),Y.fn.trigger&&Y(R).trigger("ready").off("ready")},isFunction:function(e){return Y.type(e)==="function"},isArray:Array.isArray||function(e){return Y.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):pt[K.call(e)]||"object"},isPlainObject:function(e){if(!e||Y.type(e)!=="object"||e.nodeType||Y.isWindow(e))return!1;try{if(e.constructor&&!Q.call(e,"constructor")&&!Q.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||Q.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||R,(r=it.exec(e))?[t.createElement(r[1])]:(r=Y.buildFragment([e],t,n?null:[]),Y.merge([],(r.cacheable?Y.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=Y.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(st.test(t.replace(ut,"@").replace(at,"]").replace(ot,"")))return(new Function("return "+t))();Y.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&Y.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ft,"ms-").replace(lt,ct)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||Y.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:G?function(e){return e==null?"":G.call(e)}:function(e){return e==null?"":e.toString().replace(nt,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=Y.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||Y.isWindow(e)?V.call(r,e):Y.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(J)return J.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof Y||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||Y.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),Y.isFunction(e)?(i=$.call(arguments,2),s=function(){return e.apply(n,i.concat($.call(arguments)))},s.guid=e.guid=e.guid||s.guid||Y.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)Y.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&Y.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(Y(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),Y.ready.promise=function(t){if(!q){q=Y.Deferred();if(R.readyState==="complete"||R.readyState!=="loading"&&R.addEventListener)setTimeout(Y.ready,1);else if(R.addEventListener)R.addEventListener("DOMContentLoaded",ht,!1),e.addEventListener("load",Y.ready,!1);else{R.attachEvent("onreadystatechange",ht),e.attachEvent("onload",Y.ready);var n=!1;try{n=e.frameElement==null&&R.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!Y.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}Y.ready()}}()}}return q.promise(t)},Y.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){pt["[object "+t+"]"]=t.toLowerCase()}),I=Y(R);var dt={};Y.Callbacks=function(e){e=typeof e=="string"?dt[e]||n(e):Y.extend({},e);var r,i,s,o,u,a,f=[],l=!e.once&&[],c=function(t){r=e.memory&&t,i=!0,a=o||0,o=0,u=f.length,s=!0;for(;f&&a<u;a++)if(f[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}s=!1,f&&(l?l.length&&c(l.shift()):r?f=[]:h.disable())},h={add:function(){if(f){var t=f.length;(function n(t){Y.each(t,function(t,r){Y.isFunction(r)&&(!e.unique||!h.has(r))?f.push(r):r&&r.length&&n(r)})})(arguments),s?u=f.length:r&&(o=t,c(r))}return this},remove:function(){return f&&Y.each(arguments,function(e,t){var n;while((n=Y.inArray(t,f,n))>-1)f.splice(n,1),s&&(n<=u&&u--,n<=a&&a--)}),this},has:function(e){return Y.inArray(e,f)>-1},empty:function(){return f=[],this},disable:function(){return f=l=r=t,this},disabled:function(){return!f},lock:function(){return l=t,r||h.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],f&&(!i||l)&&(s?l.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},Y.extend({Deferred:function(e){var t=[["resolve","done",Y.Callbacks("once memory"),"resolved"],["reject","fail",Y.Callbacks("once memory"),"rejected"],["notify","progress",Y.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Y.Deferred(function(n){Y.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](Y.isFunction(o)?function(){var e=o.apply(this,arguments);e&&Y.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return typeof e=="object"?Y.extend(e,r):r}},i={};return r.pipe=r.then,Y.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=$.call(arguments),r=n.length,i=r!==1||e&&Y.isFunction(e.promise)?r:0,s=i===1?e:Y.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?$.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&Y.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),Y.support=function(){var t,n,r,i,s,o,u,a,f,l,c,h=R.createElement("div");h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),r=h.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5";if(!n||!n.length||!r)return{};i=R.createElement("select"),s=i.appendChild(R.createElement("option")),o=h.getElementsByTagName("input")[0],t={leadingWhitespace:h.firstChild.nodeType===3,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:o.value==="on",optSelected:s.selected,getSetAttribute:h.className!=="t",enctype:!!R.createElement("form").enctype,html5Clone:R.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:R.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,i.disabled=!0,t.optDisabled=!s.disabled;try{delete h.test}catch(p){t.deleteExpando=!1}!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",c=function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick"),h.detachEvent("onclick",c)),o=R.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","checked"),o.setAttribute("name","t"),h.appendChild(o),u=R.createDocumentFragment(),u.appendChild(h.lastChild),t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,u.removeChild(o),u.appendChild(h);if(h.attachEvent)for(f in{submit:!0,change:!0,focusin:!0})a="on"+f,l=a in h,l||(h.setAttribute(a,"return;"),l=typeof h[a]=="function"),t[f+"Bubbles"]=l;return Y(function(){var n,r,i,s,o="padding:0;margin:0;border:0;display:block;overflow:hidden;",u=R.getElementsByTagName("body")[0];if(!u)return;n=R.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",u.insertBefore(n,u.firstChild),r=R.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=r.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",l=i[0].offsetHeight===0,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=l&&i[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=u.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",s=R.createElement("div"),s.style.cssText=r.style.cssText=o,s.style.marginRight=s.style.width="0",r.style.width="1px",r.appendChild(s),t.reliableMarginRight=!parseFloat((e.getComputedStyle(s,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),u.removeChild(n),n=r=i=s=null}),u.removeChild(h),n=r=i=s=o=u=h=null,t}();var vt=/^(?:\{.*\}|\[.*\])$/,mt=/([A-Z])/g;Y.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Y.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?Y.cache[e[Y.expando]]:e[Y.expando],!!e&&!i(e)},data:function(e,n,r,i){if(!Y.acceptData(e))return;var s,o,u=Y.expando,a=typeof n=="string",f=e.nodeType,l=f?Y.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=Y.deletedIds.pop()||++Y.uuid:c=u),l[c]||(l[c]={},f||(l[c].toJSON=Y.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=Y.extend(l[c],n):l[c].data=Y.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[Y.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[Y.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!Y.acceptData(e))return;var r,s,o,u=e.nodeType,a=u?Y.cache:e,f=u?e[Y.expando]:Y.expando;if(!a[f])return;if(t){r=n?a[f]:a[f].data;if(r){Y.isArray(t)||(t in r?t=[t]:(t=Y.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(s=0,o=t.length;s<o;s++)delete r[t[s]];if(!(n?i:Y.isEmptyObject)(r))return}}if(!n){delete a[f].data;if(!i(a[f]))return}u?Y.cleanData([e],!0):Y.support.deleteExpando||a!=a.window?delete a[f]:a[f]=null},_data:function(e,t,n){return Y.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&Y.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),Y.fn.extend({data:function(e,n){var i,s,o,u,a,f=this[0],l=0,c=null;if(e===t){if(this.length){c=Y.data(f);if(f.nodeType===1&&!Y._data(f,"parsedAttrs")){o=f.attributes;for(a=o.length;l<a;l++)u=o[l].name,u.indexOf("data-")===0&&(u=Y.camelCase(u.substring(5)),r(f,u,c[u]));Y._data(f,"parsedAttrs",!0)}}return c}return typeof e=="object"?this.each(function(){Y.data(this,e)}):(i=e.split(".",2),i[1]=i[1]?"."+i[1]:"",s=i[1]+"!",Y.access(this,function(n){if(n===t)return c=this.triggerHandler("getData"+s,[i[0]]),c===t&&f&&(c=Y.data(f,e),c=r(f,e,c)),c===t&&i[1]?this.data(i[0]):c;i[1]=n,this.each(function(){var t=Y(this);t.triggerHandler("setData"+s,i),Y.data(this,e,n),t.triggerHandler("changeData"+s,i)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){Y.removeData(this,e)})}}),Y.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y._data(e,t),n&&(!r||Y.isArray(n)?r=Y._data(e,t,Y.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Y.queue(e,t),r=n.shift(),i=Y._queueHooks(e,t),s=function(){Y.dequeue(e,t)};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),delete i.stop,r.call(e,s,i)),!n.length&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y._data(e,n)||Y._data(e,n,{empty:Y.Callbacks("once memory").add(function(){Y.removeData(e,t+"queue",!0),Y.removeData(e,n,!0)})})}}),Y.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?Y.queue(this[0],e):n===t?this:this.each(function(){var t=Y.queue(this,e,n);Y._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&Y.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Y.dequeue(this,e)})},delay:function(e,t){return e=Y.fx?Y.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=Y.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)(r=Y._data(o[u],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var gt,yt,bt,wt=/[\t\r\n]/g,Et=/\r/g,St=/^(?:button|input)$/i,xt=/^(?:button|input|object|select|textarea)$/i,Tt=/^a(?:rea|)$/i,Nt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ct=Y.support.getSetAttribute;Y.fn.extend({attr:function(e,t){return Y.access(this,Y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Y.removeAttr(this,e)})},prop:function(e,t){return Y.access(this,Y.prop,e,t,arguments.length>1)},removeProp:function(e){return e=Y.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(Y.isFunction(e))return this.each(function(t){Y(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(tt);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)~s.indexOf(" "+t[o]+" ")||(s+=t[o]+" ");i.className=Y.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(Y.isFunction(e))return this.each(function(t){Y(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(tt);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(wt," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>-1)r=r.replace(" "+n[s]+" "," ");i.className=e?Y.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return Y.isFunction(e)?this.each(function(n){Y(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=Y(this),u=t,a=e.split(tt);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&Y._data(this,"__className__",this.className),this.className=this.className||e===!1?"":Y._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(wt," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=Y.valHooks[s.type]||Y.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(Et,""):r==null?"":r);return}return i=Y.isFunction(e),this.each(function(r){var s,o=Y(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":Y.isArray(s)&&(s=Y.map(s,function(e){return e==null?"":e+""})),n=Y.valHooks[this.type]||Y.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),Y.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(Y.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!Y.nodeName(i.parentNode,"optgroup"))){t=Y(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?Y(u[s]).val():o},set:function(e,t){var n=Y.makeArray(t);return Y(e).find("option").each(function(){this.selected=Y.inArray(Y(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&Y.isFunction(Y.fn[n]))return Y(e)[n](r);if(typeof e.getAttribute=="undefined")return Y.prop(e,n,r);u=a!==1||!Y.isXMLDoc(e),u&&(n=n.toLowerCase(),o=Y.attrHooks[n]||(Nt.test(n)?yt:gt));if(r!==t){if(r===null){Y.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,""+r),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(tt);for(;o<r.length;o++)i=r[o],i&&(n=Y.propFix[i]||i,s=Nt.test(i),s||Y.attr(e,i,""),e.removeAttribute(Ct?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(St.test(e.nodeName)&&e.parentNode)Y.error("type property can't be changed");else if(!Y.support.radioValue&&t==="radio"&&Y.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return gt&&Y.nodeName(e,"button")?gt.get(e,t):t in e?e.value:null},set:function(e,t,n){if(gt&&Y.nodeName(e,"button"))return gt.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!Y.isXMLDoc(e),o&&(n=Y.propFix[n]||n,s=Y.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):xt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:t}}}}),yt={get:function(e,n){var r,i=Y.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?Y.removeAttr(e,n):(r=Y.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},Ct||(bt={name:!0,id:!0,coords:!0},gt=Y.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(bt[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=R.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},Y.each(["width","height"],function(e,t){Y.attrHooks[t]=Y.extend(Y.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),Y.attrHooks.contenteditable={get:gt.get,set:function(e,t,n){t===""&&(t="false"),gt.set(e,t,n)}}),Y.support.hrefNormalized||Y.each(["href","src","width","height"],function(e,n){Y.attrHooks[n]=Y.extend(Y.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),Y.support.style||(Y.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),Y.support.optSelected||(Y.propHooks.selected=Y.extend(Y.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),Y.support.enctype||(Y.propFix.enctype="encoding"),Y.support.checkOn||Y.each(["radio","checkbox"],function(){Y.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),Y.each(["radio","checkbox"],function(){Y.valHooks[this]=Y.extend(Y.valHooks[this],{set:function(e,t){if(Y.isArray(t))return e.checked=Y.inArray(Y(e).val(),t)>=0}})});var kt=/^(?:textarea|input|select)$/i,Lt=/^([^\.]*|)(?:\.(.+)|)$/,At=/(?:^|\s)hover(\.\S+|)\b/,Ot=/^key/,Mt=/^(?:mouse|contextmenu)|click/,_t=/^(?:focusinfocus|focusoutblur)$/,Dt=function(e){return Y.event.special.hover?e:e.replace(At,"mouseenter$1 mouseleave$1")};Y.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=Y._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=Y.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof Y=="undefined"||!!e&&Y.event.triggered===e.type?t:Y.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=Y.trim(Dt(n)).split(" ");for(f=0;f<n.length;f++){l=Lt.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),m=Y.event.special[c]||{},c=(s?m.delegateType:m.bindType)||c,m=Y.event.special[c]||{},p=Y.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,namespace:h.join(".")},d),v=a[c];if(!v){v=a[c]=[],v.delegateCount=0;if(!m.setup||m.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}m.add&&(m.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?v.splice(v.delegateCount++,0,p):v.push(p),Y.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=Y.hasData(e)&&Y._data(e);if(!m||!(h=m.events))return;t=Y.trim(Dt(t||"")).split(" ");for(s=0;s<t.length;s++){o=Lt.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)Y.event.remove(e,u+t[s],n,r,!0);continue}p=Y.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)v=d[c],(i||a===v.origType)&&(!n||n.guid===v.guid)&&(!f||f.test(v.namespace))&&(!r||r===v.selector||r==="**"&&v.selector)&&(d.splice(c--,1),v.selector&&d.delegateCount--,p.remove&&p.remove.call(e,v));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,m.handle)===!1)&&Y.removeEvent(e,u,m.handle),delete h[u])}Y.isEmptyObject(h)&&(delete m.handle,Y.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,s){if(!i||i.nodeType!==3&&i.nodeType!==8){var o,u,a,f,l,c,h,p,d,v,m=n.type||n,g=[];if(_t.test(m+Y.event.triggered))return;m.indexOf("!")>=0&&(m=m.slice(0,-1),u=!0),m.indexOf(".")>=0&&(g=m.split("."),m=g.shift(),g.sort());if((!i||Y.event.customEvent[m])&&!Y.event.global[m])return;n=typeof n=="object"?n[Y.expando]?n:new Y.Event(m,n):new Y.Event(m),n.type=m,n.isTrigger=!0,n.exclusive=u,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c=m.indexOf(":")<0?"on"+m:"";if(!i){o=Y.cache;for(a in o)o[a].events&&o[a].events[m]&&Y.event.trigger(n,r,o[a].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?Y.makeArray(r):[],r.unshift(n),h=Y.event.special[m]||{};if(h.trigger&&h.trigger.apply(i,r)===!1)return;d=[[i,h.bindType||m]];if(!s&&!h.noBubble&&!Y.isWindow(i)){v=h.delegateType||m,f=_t.test(v+m)?i:i.parentNode;for(l=i;f;f=f.parentNode)d.push([f,v]),l=f;l===(i.ownerDocument||R)&&d.push([l.defaultView||l.parentWindow||e,v])}for(a=0;a<d.length&&!n.isPropagationStopped();a++)f=d[a][0],n.type=d[a][1],p=(Y._data(f,"events")||{})[n.type]&&Y._data(f,"handle"),p&&p.apply(f,r),p=c&&f[c],p&&Y.acceptData(f)&&p.apply(f,r)===!1&&n.preventDefault();return n.type=m,!s&&!n.isDefaultPrevented()&&(!h._default||h._default.apply(i.ownerDocument,r)===!1)&&(m!=="click"||!Y.nodeName(i,"a"))&&Y.acceptData(i)&&c&&i[m]&&(m!=="focus"&&m!=="blur"||n.target.offsetWidth!==0)&&!Y.isWindow(i)&&(l=i[c],l&&(i[c]=null),Y.event.triggered=m,i[m](),Y.event.triggered=t,l&&(i[c]=l)),n.result}return},dispatch:function(n){n=Y.event.fix(n||e.event);var r,i,s,o,u,a,f,l,c,h,p,d=(Y._data(this,"events")||{})[n.type]||[],v=d.delegateCount,m=[].slice.call(arguments),g=!n.exclusive&&!n.namespace,y=Y.event.special[n.type]||{},b=[];m[0]=n,n.delegateTarget=this;if(y.preDispatch&&y.preDispatch.call(this,n)===!1)return;if(v&&(!n.button||n.type!=="click")){o=Y(this),o.context=this;for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){a={},l=[],o[0]=s;for(r=0;r<v;r++)c=d[r],h=c.selector,a[h]===t&&(a[h]=o.is(h)),a[h]&&l.push(c);l.length&&b.push({elem:s,matches:l})}}d.length>v&&b.push({elem:this,matches:d.slice(v)});for(r=0;r<b.length&&!n.isPropagationStopped();r++){f=b[r],n.currentTarget=f.elem;for(i=0;i<f.matches.length&&!n.isImmediatePropagationStopped();i++){c=f.matches[i];if(g||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,u=((Y.event.special[c.origType]||{}).handle||c.handler).apply(f.elem,m),u!==t&&(n.result=u,u===!1&&(n.preventDefault(),n.stopPropagation()))}}return y.postDispatch&&y.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,o=n.button,u=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||R,i=r.documentElement,s=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),!e.which&&o!==t&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},fix:function(e){if(e[Y.expando])return e;var t,n,r=e,i=Y.event.fixHooks[e.type]||{},s=i.props?this.props.concat(i.props):this.props;e=Y.Event(r);for(t=s.length;t;)n=s[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||R),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},special:{ready:{setup:Y.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){Y.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=Y.extend(new Y.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Y.event.trigger(i,null,t):Y.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Y.event.handle=Y.event.dispatch,Y.removeEvent=R.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},Y.Event=function(e,t){if(!(this instanceof Y.Event))return new Y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?o:s):this.type=e,t&&Y.extend(this,t),this.timeStamp=e&&e.timeStamp||Y.now(),this[Y.expando]=!0},Y.Event.prototype={preventDefault:function(){this.isDefaultPrevented=o;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=o;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},Y.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!Y.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),Y.support.submitBubbles||(Y.event.special.submit={setup:function(){if(Y.nodeName(this,"form"))return!1;Y.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=Y.nodeName(n,"input")||Y.nodeName(n,"button")?n.form:t;r&&!Y._data(r,"_submit_attached")&&(Y.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),Y._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Y.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(Y.nodeName(this,"form"))return!1;Y.event.remove(this,"._submit")}}),Y.support.changeBubbles||(Y.event.special.change={setup:function(){if(kt.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")Y.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),Y.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Y.event.simulate("change",this,e,!0)});return!1}Y.event.add(this,"beforeactivate._change",function(e){var t=e.target;kt.test(t.nodeName)&&!Y._data(t,"_change_attached")&&(Y.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&Y.event.simulate("change",this.parentNode,e,!0)}),Y._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return Y.event.remove(this,"._change"),kt.test(this.nodeName)}}),Y.support.focusinBubbles||Y.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){Y.event.simulate(t,e.target,Y.event.fix(e),!0)};Y.event.special[t]={setup:function(){n++===0&&R.addEventListener(e,r,!0)},teardown:function(){--n===0&&R.removeEventListener(e,r,!0)}}}),Y.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=s;else if(!i)return this;return o===1&&(u=i,i=function(e){return Y().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=Y.guid++)),this.each(function(){Y.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=s),this.each(function(){Y.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return Y(this.context).on(e,this.selector,t,n),this},die:function(e,t){return Y(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){Y.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return Y.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||Y.guid++,r=0,i=function(n){var i=(Y._data(this,"lastToggle"+e.guid)||0)%r;return Y._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Y.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Ot.test(t)&&(Y.event.fixHooks[t]=Y.event.keyHooks),Mt.test(t)&&(Y.event.fixHooks[t]=Y.event.mouseHooks)}),function(e,t){function n(e,t,n,r){var i=0,s=t.length;for(;i<s;i++)st(e,t[i],n,r)}function r(e,t,r,i,s,o){var u,a=ot.setFilters[t.toLowerCase()];return a||st.error(t),(e||!(u=s))&&n(e||"*",i,u=[],s),u.length>0?a(u,r,o):[]}function i(e,i,s,o,u){var a,f,l,c,h,p,d,v,m=0,g=u.length,y=W.POS,b=new RegExp("^"+y.source+"(?!"+T+")","i"),w=function(){var e=1,n=arguments.length-2;for(;e<n;e++)arguments[e]===t&&(a[e]=t)};for(;m<g;m++){y.exec(""),e=u[m],c=[],l=0,h=o;while(a=y.exec(e)){v=y.lastIndex=a.index+a[0].length;if(v>l){d=e.slice(l,a.index),l=v,p=[i],P.test(d)&&(h&&(p=h),h=o);if(f=q.test(d))d=d.slice(0,-5).replace(P,"$&*");a.length>1&&a[0].replace(b,w),h=r(d,a[1],a[2],p,h,f)}}h?(c=c.concat(h),(d=e.slice(l))&&d!==")"?P.test(d)?n(d,c,s,o):st(d,i,s,o?o.concat(h):h):S.apply(s,c)):st(e,i,s,o)}return g===1?s:st.uniqueSort(s)}function s(e,t,n){var r,i,s,o=[],u=0,a=B.exec(e),f=!a.pop()&&!a.pop(),l=f&&e.match(H)||[""],c=ot.preFilter,h=ot.filter,p=!n&&t!==v;for(;(i=l[u])!=null&&f;u++){o.push(r=[]),p&&(i=" "+i);while(i){f=!1;if(a=P.exec(i))i=i.slice(a[0].length),f=r.push({part:a.pop().replace(D," "),captures:a});for(s in h)(a=W[s].exec(i))&&(!c[s]||(a=c[s](a,t,n)))&&(i=i.slice(a.shift().length),f=r.push({part:s,captures:a}));if(!f)break}}return f||st.error(e),o}function o(e,t,n){var r=t.dir,i=w++;return e||(e=function(e){return e===n}),t.first?function(t,n){while(t=t[r])if(t.nodeType===1)return e(t,n)&&t}:function(t,n){var s,o=i+"."+c,u=o+"."+l;while(t=t[r])if(t.nodeType===1){if((s=t[x])===u)return t.sizset;if(typeof s=="string"&&s.indexOf(o)===0){if(t.sizset)return t}else{t[x]=u;if(e(t,n))return t.sizset=!0,t;t.sizset=!1}}}}function u(e,t){return e?function(n,r){var i=t(n,r);return i&&e(i===!0?n:i,r)}:t}function a(e,t,n){var r,i,s=0;for(;r=e[s];s++)ot.relative[r.part]?i=o(i,ot.relative[r.part],t):(r.captures.push(t,n),i=u(i,ot.filter[r.part].apply(null,r.captures)));return i}function f(e){return function(t,n){var r,i=0;for(;r=e[i];i++)if(r(t,n))return!0;return!1}}var l,c,h,p,d,v=e.document,m=v.documentElement,g="undefined",y=!1,b=!0,w=0,E=[].slice,S=[].push,x=("sizcache"+Math.random()).replace(".",""),T="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",C=N.replace("w","w#"),k="([*^$|!~]?=)",L="\\["+T+"*("+N+")"+T+"*(?:"+k+T+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+C+")|)|)"+T+"*\\]",A=":("+N+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",O=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",M=T+"*([\\x20\\t\\r\\n\\f>+~])"+T+"*",_="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+L+"|"+A.replace(2,7)+"|[^\\\\(),])+",D=new RegExp("^"+T+"+|((?:^|[^\\\\])(?:\\\\.)*)"+T+"+$","g"),P=new RegExp("^"+M),H=new RegExp(_+"?(?="+T+"*,|$)","g"),B=new RegExp("^(?:(?!,)(?:(?:^|,)"+T+"*"+_+")*?|"+T+"*(.*?))(\\)|$)"),j=new RegExp(_.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+M,"g"),F=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,I=/[\x20\t\r\n\f]*[+~]/,q=/:not\($/,R=/h\d/i,U=/input|select|textarea|button/i,z=/\\(?!\\)/g,W={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),NAME:new RegExp("^\\[name=['\"]?("+N+")['\"]?\\]"),TAG:new RegExp("^("+N.replace("[-","[-\\*")+")"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+A),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+T+"*(even|odd|(([+-]|)(\\d*)n|)"+T+"*(?:([+-]|)"+T+"*(\\d+)|))"+T+"*\\)|)","i"),POS:new RegExp(O,"ig"),needsContext:new RegExp("^"+T+"*[>+~]|"+O,"i")},X={},V=[],$={},J=[],K=function(e){return e.sizzleFilter=!0,e},Q=function(e){return function(t){return t.nodeName.toLowerCase()==="input"&&t.type===e}},G=function(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}},Z=function(e){var t=!1,n=v.createElement("div");try{t=e(n)}catch(r){}return n=null,t},et=Z(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),tt=Z(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",m.insertBefore(e,m.firstChild);var t=v.getElementsByName&&v.getElementsByName(x).length===2+v.getElementsByName(x+0).length;return d=!v.getElementById(x),m.removeChild(e),t}),nt=Z(function(e){return e.appendChild(v.createComment("")),e.getElementsByTagName("*").length===0}),rt=Z(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==g&&e.firstChild.getAttribute("href")==="#"}),it=Z(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||e.getElementsByClassName("e").length===0?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length!==1)}),st=function(e,t,n,r){n=n||[],t=t||v;var i,s,o,u,a=t.nodeType;if(a!==1&&a!==9)return[];if(!e||typeof e!="string")return n;o=at(t);if(!o&&!r)if(i=F.exec(e))if(u=i[1]){if(a===9){s=t.getElementById(u);if(!s||!s.parentNode)return n;if(s.id===u)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(u))&&ft(t,s)&&s.id===u)return n.push(s),n}else{if(i[2])return S.apply(n,E.call(t.getElementsByTagName(e),0)),n;if((u=i[3])&&it&&t.getElementsByClassName)return S.apply(n,E.call(t.getElementsByClassName(u),0)),n}return ht(e,t,n,r,o)},ot=st.selectors={cacheLength:50,match:W,order:["ID","TAG"],attrHandle:{},createPseudo:K,find:{ID:d?function(e,t,n){if(typeof t.getElementById!==g&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==g&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==g&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:nt?function(e,t){if(typeof t.getElementsByTagName!==g)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(z,""),e[3]=(e[4]||e[5]||"").replace(z,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||st.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=e[4];return W.CHILD.test(e[0])?null:(n&&(t=B.exec(n))&&t.pop()&&(e[0]=e[0].slice(0,t[0].length-n.length-1),n=t[0].slice(0,-1)),e.splice(2,3,n||e[3]),e)}},filter:{ID:d?function(e){return e=e.replace(z,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(z,""),function(t){var n=typeof t.getAttributeNode!==g&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(z,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=X[e];return t||(t=X[e]=new RegExp("(^|"+T+")"+e+"("+T+"|$)"),V.push(e),V.length>ot.cacheLength&&delete X[V.shift()]),function(e){return t.test(e.className||typeof e.getAttribute!==g&&e.getAttribute("class")||"")}},ATTR:function(e,t,n){return t?function(r){var i=st.attr(r,e),s=i+"";if(i==null)return t==="!=";switch(t){case"=":return s===n;case"!=":return s!==n;case"^=":return n&&s.indexOf(n)===0;case"*=":return n&&s.indexOf(n)>-1;case"$=":return n&&s.substr(s.length-n.length)===n;case"~=":return(" "+s+" ").indexOf(n)>-1;case"|=":return s===n||s.substr(0,n.length+1)===n+"-"}}:function(t){return st.attr(t,e)!=null}},CHILD:function(e,t,n,r){if(e==="nth"){var i=w++;return function(e){var t,s,o=0,u=e;if(n===1&&r===0)return!0;t=e.parentNode;if(t&&(t[x]!==i||!e.sizset)){for(u=t.firstChild;u;u=u.nextSibling)if(u.nodeType===1){u.sizset=++o;if(u===e)break}t[x]=i}return s=e.sizset-r,n===0?s===0:s%n===0&&s/n>=0}}return function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t,n,r){var i=ot.pseudos[e]||ot.pseudos[e.toLowerCase()];return i||st.error("unsupported pseudo: "+e),i.sizzleFilter?i(t,n,r):i}},pseudos:{not:K(function(e,t,n){var r=ct(e.replace(D,"$1"),t,n);return function(e){return!r(e)}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!ot.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},contains:K(function(e){return function(t){return(t.textContent||t.innerText||lt(t)).indexOf(e)>-1}}),has:K(function(e){return function(t){return st(e,t).length>0}}),header:function(e){return R.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:Q("radio"),checkbox:Q("checkbox"),file:Q("file"),password:Q("password"),image:Q("image"),submit:G("submit"),reset:G("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return U.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t,n){return n?e.slice(1):[e[0]]},last:function(e,t,n){var r=e.pop();return n?e:[r]},even:function(e,t,n){var r=[],i=n?1:0,s=e.length;for(;i<s;i+=2)r.push(e[i]);return r},odd:function(e,t,n){var r=[],i=n?0:1,s=e.length;for(;i<s;i+=2)r.push(e[i]);return r},lt:function(e,t,n){return n?e.slice(+t):e.slice(0,+t)},gt:function(e,t,n){return n?e.slice(0,+t+1):e.slice(+t+1)},eq:function(e,t,n){var r=e.splice(+t,1);return n?e:r}}};ot.setFilters.nth=ot.setFilters.eq,ot.filters=ot.pseudos,rt||(ot.attrHandle={href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}}),tt&&(ot.order.push("NAME"),ot.find.NAME=function(e,t){if(typeof t.getElementsByName!==g)return t.getElementsByName(e)}),it&&(ot.order.splice(1,0,"CLASS"),ot.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!==g&&!n)return t.getElementsByClassName(e)});try{E.call(m.childNodes,0)[0].nodeType}catch(ut){E=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}var at=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},ft=st.contains=m.compareDocumentPosition?function(e,t){return!!(e.compareDocumentPosition(t)&16)}:m.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},lt=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=lt(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=lt(t);return n};st.attr=function(e,t){var n,r=at(e);return r||(t=t.toLowerCase()),ot.attrHandle[t]?ot.attrHandle[t](e):et||r?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},st.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},[0,0].sort(function(){return b=0}),m.compareDocumentPosition?h=function(e,t){return e===t?(y=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:(h=function(e,t){if(e===t)return y=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return p(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return p(i[f],s[f]);return f===n?p(e,s[f],-1):p(i[f],t,1)},p=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),st.uniqueSort=function(e){var t,n=1;if(h){y=b,e.sort(h);if(y)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1)}return e};var ct=st.compile=function(e,t,n){var r,i,o,u=$[e];if(u&&u.context===t)return u;i=s(e,t,n);for(o=0;r=i[o];o++)i[o]=a(r,t,n);return u=$[e]=f(i),u.context=t,u.runs=u.dirruns=0,J.push(e),J.length>ot.cacheLength&&delete $[J.shift()],u};st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){return st(t,null,null,[e]).length>0};var ht=function(e,t,n,r,s){e=e.replace(D,"$1");var o,u,a,f,h,p,d,v,m,g=e.match(H),y=e.match(j),b=t.nodeType;if(W.POS.test(e))return i(e,t,n,r,g);if(r)o=E.call(r,0);else if(g&&g.length===1){if(y.length>1&&b===9&&!s&&(g=W.ID.exec(y[0]))){t=ot.find.ID(g[1],t,s)[0];if(!t)return n;e=e.slice(y.shift().length)}v=(g=I.exec(y[0]))&&!g.index&&t.parentNode||t,m=y.pop(),p=m.split(":not")[0];for(a=0,f=ot.order.length;a<f;a++){d=ot.order[a];if(g=W[d].exec(p)){o=ot.find[d]((g[1]||"").replace(z,""),v,s);if(o==null)continue;p===m&&(e=e.slice(0,e.length-m.length)+p.replace(W[d],""),e||S.apply(n,E.call(o,0)));break}}}if(e){u=ct(e,t,s),c=u.dirruns++,o==null&&(o=ot.find.TAG("*",I.test(e)&&t.parentNode||t));for(a=0;h=o[a];a++)l=u.runs++,u(h,t)&&n.push(h)}return n};v.querySelectorAll&&function(){var e,t=ht,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[],s=[":active"],o=m.matchesSelector||m.mozMatchesSelector||m.webkitMatchesSelector||m.oMatchesSelector||m.msMatchesSelector;Z(function(e){e.innerHTML="<select><option selected></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+T+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),Z(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+T+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=i.length&&new RegExp(i.join("|")),ht=function(e,r,s,o,u){if(!o&&!u&&(!i||!i.test(e)))if(r.nodeType===9)try{return S.apply(s,E.call(r.querySelectorAll(e),0)),s}catch(a){}else if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){var f=r.getAttribute("id"),l=f||x,c=I.test(e)&&r.parentNode||r;f?l=l.replace(n,"\\$&"):r.setAttribute("id",l);try{return S.apply(s,E.call(c.querySelectorAll(e.replace(H,"[id='"+l+"'] $&")),0)),s}catch(a){}finally{f||r.removeAttribute("id")}}return t(e,r,s,o,u)},o&&(Z(function(t){e=o.call(t,"div");try{o.call(t,"[test!='']:sizzle"),s.push(ot.match.PSEUDO)}catch(n){}}),s=new RegExp(s.join("|")),st.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!at(t)&&!s.test(n)&&(!i||!i.test(n)))try{var u=o.call(t,n);if(u||e||t.document&&t.document.nodeType!==11)return u}catch(a){}return st(n,null,null,[t]).length>0})}(),st.attr=Y.attr,Y.find=st,Y.expr=st.selectors,Y.expr[":"]=Y.expr.pseudos,Y.unique=st.uniqueSort,Y.text=st.getText,Y.isXMLDoc=st.isXML,Y.contains=st.contains}(e);var Pt=/Until$/,Ht=/^(?:parents|prev(?:Until|All))/,Bt=/^.[^:#\[\.,]*$/,jt=Y.expr.match.needsContext,Ft={children:!0,contents:!0,next:!0,prev:!0};Y.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return Y(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(Y.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,Y.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=Y(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(Y.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(f(this,e,!1),"not",e)},filter:function(e){return this.pushStack(f(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?jt.test(e)?Y(e,this.context).index(this[0])>=0:Y.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=jt.test(e)||typeof e!="string"?Y(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:Y.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?Y.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?Y.inArray(this[0],Y(e)):Y.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?Y(e,t):Y.makeArray(e&&e.nodeType?[e]:e),r=Y.merge(this.get(),n);return this.pushStack(u(n[0])||u(r[0])?r:Y.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),Y.fn.andSelf=Y.fn.addBack,Y.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return Y.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Y.dir(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return Y.dir(e,"nextSibling")},prevAll:function(e){return Y.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Y.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Y.dir(e,"previousSibling",n)},siblings:function(e){return Y.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Y.sibling(e.firstChild)},contents:function(e){return Y.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Y.merge([],e.childNodes)}},function(e,t){Y.fn[e]=function(n,r){var i=Y.map(this,t,n);return Pt.test(e)||(r=n),r&&typeof r=="string"&&(i=Y.filter(r,i)),i=this.length>1&&!Ft[e]?Y.unique(i):i,this.length>1&&Ht.test(e)&&(i=i.reverse()),this.pushStack(i,e,$.call(arguments).join(","))}}),Y.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?Y.find.matchesSelector(t[0],e)?[t[0]]:[]:Y.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!Y(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var It="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qt=/ jQuery\d+="(?:null|\d+)"/g,Rt=/^\s+/,Ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,zt=/<([\w:]+)/,Wt=/<tbody/i,Xt=/<|&#?\w+;/,Vt=/<(?:script|style|link)/i,$t=/<(?:script|object|embed|option|style)/i,Jt=new RegExp("<(?:"+It+")[\\s/>]","i"),Kt=/^(?:checkbox|radio)$/,Qt=/checked\s*(?:[^=]|=\s*.checked.)/i,Gt=/\/(java|ecma)script/i,Yt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=l(R),tn=en.appendChild(R.createElement("div"));Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,Y.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),Y.fn.extend({text:function(e){return Y.access(this,function(e){return e===t?Y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(Y.isFunction(e))return this.each(function(t){Y(this).wrapAll(e.call(this,t))});if(this[0]){var t=Y(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return Y.isFunction(e)?this.each(function(t){Y(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Y(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Y.isFunction(e);return this.each(function(n){Y(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Y.nodeName(this,"body")||Y(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(e,this),"before",this.selector)}},after:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||Y.filter(e,[n]).length)!t&&n.nodeType===1&&(Y.cleanData(n.getElementsByTagName("*")),Y.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&Y.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return Y.clone(this,e,t)})},html:function(e){return Y.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(qt,""):t;if(typeof e=="string"&&!Vt.test(e)&&(Y.support.htmlSerialize||!Jt.test(e))&&(Y.support.leadingWhitespace||!Rt.test(e))&&!Zt[(zt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ut,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(Y.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return u(this[0])?this.length?this.pushStack(Y(Y.isFunction(e)?e():e),"replaceWith",e):this:Y.isFunction(e)?this.each(function(t){var n=Y(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=Y(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;Y(this).remove(),t?Y(t).before(e):Y(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],h=this.length;if(!Y.support.checkClone&&h>1&&typeof f=="string"&&Qt.test(f))return this.each(function(){Y(this).domManip(e,n,r)});if(Y.isFunction(f))return this.each(function(i){var s=Y(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=Y.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&Y.nodeName(s,"tr");for(u=i.cacheable||h-1;a<h;a++)r.call(n&&Y.nodeName(this[a],"table")?c(this[a],"tbody"):this[a],a===u?o:Y.clone(o,!0,!0))}o=s=null,l.length&&Y.each(l,function(e,t){t.src?Y.ajax?Y.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):Y.error("no ajax"):Y.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Yt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),Y.buildFragment=function(e,n,r){var i,s,o,u=e[0];return n=n||R,n=(n[0]||n).ownerDocument||n[0]||n,typeof n.createDocumentFragment=="undefined"&&(n=R),e.length===1&&typeof u=="string"&&u.length<512&&n===R&&u.charAt(0)==="<"&&!$t.test(u)&&(Y.support.checkClone||!Qt.test(u))&&(Y.support.html5Clone||!Jt.test(u))&&(s=!0,i=Y.fragments[u],o=i!==t),i||(i=n.createDocumentFragment(),Y.clean(e,n,i,r),s&&(Y.fragments[u]=o&&i)),{fragment:i,cacheable:s}},Y.fragments={},Y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Y.fn[e]=function(n){var r,i=0,s=[],o=Y(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),Y(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),Y.extend({clone:function(e,t,n){var r,i,s,o;Y.support.html5Clone||Y.isXMLDoc(e)||!Jt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(o=tn.firstChild));if((!Y.support.noCloneEvent||!Y.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!Y.isXMLDoc(e)){p(e,o),r=d(e),i=d(o);for(s=0;r[s];++s)i[s]&&p(r[s],i[s])}if(t){h(e,o);if(n){r=d(e),i=d(o);for(s=0;r[s];++s)h(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var i,s,o,u,a,f,c,h,p,d,m,g,y=0,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=R;for(s=t===R&&en;(o=e[y])!=null;y++){typeof o=="number"&&(o+="");if(!o)continue;if(typeof o=="string")if(!Xt.test(o))o=t.createTextNode(o);else{s=s||l(t),c=c||s.appendChild(t.createElement("div")),o=o.replace(Ut,"<$1></$2>"),u=(zt.exec(o)||["",""])[1].toLowerCase(),a=Zt[u]||Zt._default,f=a[0],c.innerHTML=a[1]+o+a[2];while(f--)c=c.lastChild;if(!Y.support.tbody){h=Wt.test(o),p=u==="table"&&!h?c.firstChild&&c.firstChild.childNodes:a[1]==="<table>"&&!h?c.childNodes:[];for(i=p.length-1;i>=0;--i)Y.nodeName(p[i],"tbody")&&!p[i].childNodes.length&&p[i].parentNode.removeChild(p[i])}!Y.support.leadingWhitespace&&Rt.test(o)&&c.insertBefore(t.createTextNode(Rt.exec(o)[0]),c.firstChild),o=c.childNodes,c=s.lastChild}o.nodeType?b.push(o):b=Y.merge(b,o)}c&&(s.removeChild(c),o=c=s=null);if(!Y.support.appendChecked)for(y=0;(o=b[y])!=null;y++)Y.nodeName(o,"input")?v(o):typeof o.getElementsByTagName!="undefined"&&Y.grep(o.getElementsByTagName("input"),v);if(n){m=function(e){if(!e.type||Gt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(y=0;(o=b[y])!=null;y++)if(!Y.nodeName(o,"script")||!m(o))n.appendChild(o),typeof o.getElementsByTagName!="undefined"&&(g=Y.grep(Y.merge([],o.getElementsByTagName("script")),m),b.splice.apply(b,[y+1,0].concat(g)),y+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=Y.expando,a=Y.cache,f=Y.support.deleteExpando,l=Y.event.special;for(;(i=e[o])!=null;o++)if(t||Y.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?Y.event.remove(i,s):Y.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,Y.deletedIds.push(r))}}}}),function(){var e,t;Y.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=Y.uaMatch(z.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.webkit&&(t.safari=!0),Y.browser=t,Y.sub=function(){function e(t,n){return new e.fn.init(t,n)}Y.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function n(n,r){return r&&r instanceof Y&&!(r instanceof e)&&(r=e(r)),Y.fn.init.call(this,n,r,t)},e.fn.init.prototype=e.fn;var t=e(R);return e}}();var nn,rn,sn,on=/alpha\([^)]*\)/i,un=/opacity=([^)]*)/,an=/^(top|right|bottom|left)$/,fn=/^margin/,ln=new RegExp("^("+Z+")(.*)$","i"),cn=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),hn=new RegExp("^([-+])=("+Z+")","i"),pn={},dn={position:"absolute",visibility:"hidden",display:"block"},vn={letterSpacing:0,fontWeight:400,lineHeight:1},mn=["Top","Right","Bottom","Left"],gn=["Webkit","O","Moz","ms"],yn=Y.fn.toggle;Y.fn.extend({css:function(e,n){return Y.access(this,function(e,n,r){return r!==t?Y.style(e,n,r):Y.css(e,n)},e,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e,t){var n=typeof e=="boolean";return Y.isFunction(e)&&Y.isFunction(t)?yn.apply(this,arguments):this.each(function(){(n?e:g(this))?Y(this).show():Y(this).hide()})}}),Y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Y.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=Y.camelCase(n),f=e.style;n=Y.cssProps[a]||(Y.cssProps[a]=m(f,a)),u=Y.cssHooks[n]||Y.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=hn.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(Y.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!Y.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=Y.camelCase(n);return n=Y.cssProps[a]||(Y.cssProps[a]=m(e.style,a)),u=Y.cssHooks[n]||Y.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=nn(e,n)),s==="normal"&&n in vn&&(s=vn[n]),r||i!==t?(o=parseFloat(s),r||Y.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?nn=function(e,t){var n,r,i,s,o=getComputedStyle(e,null),u=e.style;return o&&(n=o[t],n===""&&!Y.contains(e.ownerDocument.documentElement,e)&&(n=Y.style(e,t)),cn.test(n)&&fn.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=n,n=o.width,u.width=r,u.minWidth=i,u.maxWidth=s)),n}:R.documentElement.currentStyle&&(nn=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),cn.test(i)&&!an.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),Y.each(["height","width"],function(e,t){Y.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth!==0||nn(e,"display")!=="none"?E(e,t,r):Y.swap(e,dn,function(){return E(e,t,r)})},set:function(e,n,r){return b(e,n,r?w(e,t,r,Y.support.boxSizing&&Y.css(e,"boxSizing")==="border-box"):0)}}}),Y.support.opacity||(Y.cssHooks.opacity={get:function(e,t){return un.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=Y.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&Y.trim(s.replace(on,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=on.test(s)?s.replace(on,i):s+" "+i}}),Y(function(){Y.support.reliableMarginRight||(Y.cssHooks.marginRight={get:function(e,t){return Y.swap(e,{display:"inline-block"},function(){if(t)return nn(e,"marginRight")})}}),!Y.support.pixelPosition&&Y.fn.position&&Y.each(["top","left"],function(e,t){Y.cssHooks[t]={get:function(e,n){if(n){var r=nn(e,t);return cn.test(r)?Y(e).position()[t]+"px":r}}}})}),Y.expr&&Y.expr.filters&&(Y.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!Y.support.reliableHiddenOffsets&&(e.style&&e.style.display||nn(e,"display"))==="none"},Y.expr.filters.visible=function(e){return!Y.expr.filters.hidden(e)}),Y.each({margin:"",padding:"",border:"Width"},function(e,t){Y.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+mn[r]+t]=i[r]||i[r-2]||i[0];return s}},fn.test(e)||(Y.cssHooks[e+t].set=b)});var bn=/%20/g,wn=/\[\]$/,En=/\r?\n/g,Sn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,xn=/^(?:select|textarea)/i;Y.fn.extend({serialize:function(){return Y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Y.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||xn.test(this.nodeName)||Sn.test(this.type))}).map(function(e,t){var n=Y(this).val();return n==null?null:Y.isArray(n)?Y.map(n,function(e,n){return{name:t.name,value:e.replace(En,"\r\n")}}):{name:t.name,value:n.replace(En,"\r\n")}}).get()}}),Y.param=function(e,n){var r,i=[],s=function(e,t){t=Y.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=Y.ajaxSettings&&Y.ajaxSettings.traditional);if(Y.isArray(e)||e.jquery&&!Y.isPlainObject(e))Y.each(e,function(){s(this.name,this.value)});else for(r in e)x(r,e[r],n,s);return i.join("&").replace(bn,"+")};var Tn,Nn,Cn=/#.*$/,kn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Ln=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,An=/^(?:GET|HEAD)$/,On=/^\/\//,Mn=/\?/,_n=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Dn=/([?&])_=[^&]*/,Pn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Hn=Y.fn.load,Bn={},jn={},Fn=["*/"]+["*"];try{Tn=U.href}catch(In){Tn=R.createElement("a"),Tn.href="",Tn=Tn.href}Nn=Pn.exec(Tn.toLowerCase())||[],Y.fn.load=function(e,n,r){if(typeof e!="string"&&Hn)return Hn.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),Y.isFunction(n)?(r=n,n=t):typeof n=="object"&&(s="POST"),Y.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?Y("<div>").append(e.replace(_n,"")).find(i):e)}),this},Y.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){Y.fn[t]=function(e){return this.on(t,e)}}),Y.each(["get","post"],function(e,n){Y[n]=function(e,r,i,s){return Y.isFunction(r)&&(s=s||i,i=r,r=t),Y.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),Y.extend({getScript:function(e,n){return Y.get(e,t,n,"script")},getJSON:function(e,t,n){return Y.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?C(e,Y.ajaxSettings):(t=e,e=Y.ajaxSettings),C(e,t),e},ajaxSettings:{url:Tn,isLocal:Ln.test(Nn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Fn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Y.parseJSON,"text xml":Y.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:T(Bn),ajaxTransport:T(jn),ajax:function(e,n){function r(e,n,r,o){var f,c,y,b,E,x=n;if(w===2)return;w=2,a&&clearTimeout(a),u=t,s=o||"",S.readyState=e>0?4:0,r&&(b=k(h,S,r));if(e>=200&&e<300||e===304)h.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(Y.lastModified[i]=E),E=S.getResponseHeader("Etag"),E&&(Y.etag[i]=E)),e===304?(x="notmodified",f=!0):(f=L(h,b),x=f.state,c=f.data,y=f.error,f=!y);else{y=x;if(!x||e)x="error",e<0&&(e=0)}S.status=e,S.statusText=""+(n||x),f?v.resolveWith(p,[c,x,S]):v.rejectWith(p,[S,x,y]),S.statusCode(g),g=t,l&&d.trigger("ajax"+(f?"Success":"Error"),[S,h,f?c:y]),m.fireWith(p,[S,x]),l&&(d.trigger("ajaxComplete",[S,h]),--Y.active||Y.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var i,s,o,u,a,f,l,c,h=Y.ajaxSetup({},n),p=h.context||h,d=p!==h&&(p.nodeType||p instanceof Y)?Y(p):Y.event,v=Y.Deferred(),m=Y.Callbacks("once memory"),g=h.statusCode||{},y={},b={},w=0,E="canceled",S={readyState:0,setRequestHeader:function(e,t){if(!w){var n=e.toLowerCase();e=b[n]=b[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return w===2?s:null},getResponseHeader:function(e){var n;if(w===2){if(!o){o={};while(n=kn.exec(s))o[n[1].toLowerCase()]=n[2]}n=o[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return w||(h.mimeType=e),this},abort:function(e){return e=e||E,u&&u.abort(e),r(0,e),this}};v.promise(S),S.success=S.done,S.error=S.fail,S.complete=m.add,S.statusCode=function(e){if(e){var t;if(w<2)for(t in e)g[t]=[g[t],e[t]];else t=e[S.status],S.always(t)}return this},h.url=((e||h.url)+"").replace(Cn,"").replace(On,Nn[1]+"//"),h.dataTypes=Y.trim(h.dataType||"*").toLowerCase().split(tt),h.crossDomain==null&&(f=Pn.exec(h.url.toLowerCase()),h.crossDomain=!(!f||f[1]==Nn[1]&&f[2]==Nn[2]&&(f[3]||(f[1]==="http:"?80:443))==(Nn[3]||(Nn[1]==="http:"?80:443)))),h.data&&h.processData&&typeof h.data!="string"&&(h.data=Y.param(h.data,h.traditional)),N(Bn,h,n,S);if(w===2)return S;l=h.global,h.type=h.type.toUpperCase(),h.hasContent=!An.test(h.type),l&&Y.active++===0&&Y.event.trigger("ajaxStart");if(!h.hasContent){h.data&&(h.url+=(Mn.test(h.url)?"&":"?")+h.data,delete h.data),i=h.url;if(h.cache===!1){var x=Y.now(),T=h.url.replace(Dn,"$1_="+x);h.url=T+(T===h.url?(Mn.test(h.url)?"&":"?")+"_="+x:"")}}(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(i=i||h.url,Y.lastModified[i]&&S.setRequestHeader("If-Modified-Since",Y.lastModified[i]),Y.etag[i]&&S.setRequestHeader("If-None-Match",Y.etag[i])),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+(h.dataTypes[0]!=="*"?", "+Fn+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)S.setRequestHeader(c,h.headers[c]);if(!h.beforeSend||h.beforeSend.call(p,S,h)!==!1&&w!==2){E="abort";for(c in{success:1,error:1,complete:1})S[c](h[c]);u=N(jn,h,n,S);if(!u)r(-1,"No Transport");else{S.readyState=1,l&&d.trigger("ajaxSend",[S,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){S.abort("timeout")},h.timeout));try{w=1,u.send(y,r)}catch(C){if(!(w<2))throw C;r(-1,C)}}return S}return S.abort()},active:0,lastModified:{},etag:{}});var qn=[],Rn=/\?/,Un=/(=)\?(?=&|$)|\?\?/,zn=Y.now();Y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=qn.pop()||Y.expando+"_"+zn++;return this[e]=!0,e}}),Y.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Un.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Un.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=Y.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Un,"$1"+s):h?n.data=a.replace(Un,"$1"+s):l&&(n.url+=(Rn.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||Y.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,qn.push(s)),u&&Y.isFunction(o)&&o(u[0]),u=o=t}),"script"}),Y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return Y.globalEval(e),e}}}),Y.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Y.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=R.head||R.getElementsByTagName("head")[0]||R.documentElement;return{send:function(i,s){n=R.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Wn,Xn=e.ActiveXObject?function(){for(var e in Wn)Wn[e](0,1)}:!1,Vn=0;Y.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&A()||O()}:A,function(e){Y.extend(Y.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(Y.ajaxSettings.xhr()),Y.support.ajax&&Y.ajaxTransport(function(n){if(!n.crossDomain||Y.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=Y.noop,Xn&&delete Wn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(e){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++Vn,Xn&&(Wn||(Wn={},Y(e).unload(Xn)),Wn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var $n,Jn,Kn=/^(?:toggle|show|hide)$/,Qn=new RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Gn=/queueHooks$/,Yn=[H],Zn={"*":[function(e,t){var n,r,i,s=this.createTween(e,t),o=Qn.exec(t),u=s.cur(),a=+u||0,f=1;if(o){n=+o[2],r=o[3]||(Y.cssNumber[e]?"":"px");if(r!=="px"&&a){a=Y.css(s.elem,e,!0)||n||1;do i=f=f||".5",a/=f,Y.style(s.elem,e,a+r),f=s.cur()/u;while(f!==1&&f!==i)}s.unit=r,s.start=a,s.end=o[1]?a+(o[1]+1)*n:n}return s}]};Y.Animation=Y.extend(D,{tweener:function(e,t){Y.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Zn[n]=Zn[n]||[],Zn[n].unshift(t)},prefilter:function(e,t){t?Yn.unshift(e):Yn.push(e)}}),Y.Tween=B,B.prototype={constructor:B,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(Y.cssNumber[n]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,n=B.propHooks[this.prop];return this.pos=t=Y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration),this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=Y.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){Y.fx.step[e.prop]?Y.fx.step[e.prop](e):e.elem.style&&(e.elem.style[Y.cssProps[e.prop]]!=null||Y.cssHooks[e.prop])?Y.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Y.each(["toggle","show","hide"],function(e,t){var n=Y.fn[t];Y.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&Y.isFunction(r)&&Y.isFunction(i)?n.apply(this,arguments):this.animate(j(t,!0),r,i,s)}}),Y.fn.extend({fadeTo:function(e,t,n,r){return this.filter(g).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Y.isEmptyObject(e),s=Y.speed(t,n,r),o=function(){var t=D(this,Y.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=Y.timers,o=Y._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Gn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&Y.dequeue(this,e)})}}),Y.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Y.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Y.speed=function(e,t,n){var r=e&&typeof e=="object"?Y.extend({},e):{complete:n||!n&&t||Y.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Y.isFunction(t)&&t};r.duration=Y.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in Y.fx.speeds?Y.fx.speeds[r.duration]:Y.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){Y.isFunction(r.old)&&r.old.call(this),r.queue&&Y.dequeue(this,r.queue)},r},Y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Y.timers=[],Y.fx=B.prototype.init,Y.fx.tick=function(){var e,t=Y.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||Y.fx.stop()},Y.fx.timer=function(e){e()&&Y.timers.push(e)&&!Jn&&(Jn=setInterval(Y.fx.tick,Y.fx.interval))},Y.fx.interval=13,Y.fx.stop=function(){clearInterval(Jn),Jn=null},Y.fx.speeds={slow:600,fast:200,_default:400},Y.fx.step={},Y.expr&&Y.expr.filters&&(Y.expr.filters.animated=function(e){return Y.grep(Y.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;Y.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Y.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f,l,c,h=this[0],p=h&&h.ownerDocument;if(!p)return;return(i=p.body)===h?Y.offset.bodyOffset(h):(r=p.documentElement,Y.contains(r,h)?(n=h.getBoundingClientRect(),s=F(p),o=r.clientTop||i.clientTop||0,u=r.clientLeft||i.clientLeft||0,a=s.pageYOffset||r.scrollTop,f=s.pageXOffset||r.scrollLeft,l=n.top+a-o,c=n.left+f-u,{top:l,left:c}):{top:0,left:0})},Y.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return Y.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(Y.css(e,"marginTop"))||0,n+=parseFloat(Y.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=Y.css(e,"position");r==="static"&&(e.style.position="relative");var i=Y(e),s=i.offset(),o=Y.css(e,"top"),u=Y.css(e,"left"),a=(r==="absolute"||r==="fixed")&&Y.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),Y.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},Y.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(Y.css(e,"marginTop"))||0,n.left-=parseFloat(Y.css(e,"marginLeft"))||0,r.top+=parseFloat(Y.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(Y.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||R.body;while(e&&!er.test(e.nodeName)&&Y.css(e,"position")==="static")e=e.offsetParent;return e||R.body})}}),Y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);Y.fn[e]=function(i){return Y.access(this,function(e,i,s){var o=F(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?Y(o).scrollLeft():s,r?s:Y(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),Y.each({Height:"height",Width:"width"},function(e,n){Y.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){Y.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return Y.access(this,function(n,r,i){var s;return Y.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?Y.css(n,r,i,u):Y.style(n,r,i,u)},n,o?i:t,o)}})}),e.jQuery=e.$=Y,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Y})})(window),define("common",["require"],function(e){var t={inArray:function(e,t){var n=!1;return t&&t.length&&$.each(t,function(t,r){r===e&&(n=!0)}),n},getFormValue:function(e,t,n,r){var e=e&&e.length?e:$(document.body),i=r||"key",s={},o=arguments;if($("[sub-blocks]",e).length){var u=$("[sub-blocks]",e),a=u.attr("sub-blocks");u.length>1?(s[a]=[],$.each(u,function(e,r){s[a].push(o.callee($(r),t,n,a+"_key"))})):s[a]=o.callee(u,t,n,a+"_key")}if(typeof n!="undefined"&&n)var f=$("input[type=radio]["+i+"]:checked",e),l=$("input[type=checkbox]["+i+"]:checked",e),c=$("input[type=hidden]["+i+"]",e),h=$("[type!=radio][type!=checkbox]["+i+"]",e).add(f);else var f=$("input[type=radio]["+i+"]:visible:checked",e),l=$("input[type=checkbox]["+i+"]:visible",e),c=$("input[type=hidden]["+i+"]",e),h=$("[type!=radio][type!=checkbox]["+i+"]:visible",e).add(f);var p=$("[content_"+i+"]",e);return typeof t!="undefined"&&t&&(h=h.add(c)),h.length&&h.each(function(e,t){var n=$(t),r=n.attr(i),o=r.split("|")[0],u=r.split("|")[1];if(typeof s[o]=="undefined"){var a=n.val();u&&(a=Common.filter(a,{method:u.join(","),type:"get"})),s[n.attr(i)]=a}}),l&&l.length&&l.each(function(e,t){var n=$(t),r=n.attr(i),o=n.attr("specify-value");o?n.is(":checked")?s[r]=o.split("|")[0]:s[r]=o.split("|")[1]:n.is(":checked")&&(typeof s[r]=="undefined"?s[n.attr(i)]=n.val():s[n.attr(i)]=s[n.attr(i)]+","+n.val())}),$("select",e)&&$("select",e).length&&$("select",e).each(function(e,t){var n=$(t);s[n.attr("key")]=n.val()}),p&&p.length&&p.each(function(e,t){var n=$(t),r=n.attr("content_"+i);s[r]=n.html()}),s},setFormValue:function(e,t,n){function i(e){var t=$(e).parent().find("div,ul").remove().css("zIndex");$(e).unwrap().removeClass("jqTransformHidden").jqTransSelect(),$(e).parent().css("zIndex",t)}var r=n||"key";$.each(t,function(t,n){var s=t.split("|")[0],o=t.split("|")[1],u=$("["+r+"="+s+"]",e),a=$("[content_"+r+"="+s+"]",e),f=u.length;a.length&&a.html(o?Common.filter(n,{method:o,type:"set"}):n);if(f==1&&/^checkbox|radio$/.test(u.attr("type"))){var l=u.attr("specify-value");n==u.val()&&(u.filter(":visible").attr("checked","checked"),u.attr("switch-evt")&&u.attr("checked","checked").trigger("click").attr("checked","checked")),l&&(n==l.split("|")[0]?u.attr("checked","checked").trigger("click").attr("checked","checked"):u.removeAttr("checked"))}else if(f==1){o&&(n=Common.filter(n,{method:o,type:"set"}));try{u.val(n).trigger("change",!0)}catch(c){}}else f>1&&(n=n.split(","),u.removeAttr("checked"),$.each(n,function(e,t){u.filter("[value="+t+"]:visible").attr("checked","checked")}));var h=u[0]&&u[0].tagName;if(h&&h.toUpperCase()=="SELECT"){console.log(n);var p=u.find("option");p.each(function(e,t){console.log(t,$(t).attr("value")),$(t).attr("value")==n?$(t).attr("selected","selected"):$(t).removeAttr("selected")}),u.trigger("change",!0),i(u)}}),i("select#my_updated_select_box")},filter:function(e,t){var n,r,i,s;return t&&t.method&&(s=t.method.split(";"),$.each(s,function(s,o){n=/([\s\S]+)\(([^\)]+)\)/.exec(o),n?(i=n[1],r=n[2].split(" ")):(i=o,r=null);switch(i){case"encode":t.type&&"set"==t.type?e=decodeURIComponent(e):e=encodeURIComponent(e);break;case"escape":e=e.replace(/"/g,"&quot;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;");break;case"addslashes":e=e.replace(/"/g,'\\"'),e=e.replace(/'/g,"\\'");break;case"artTypeName":e=g_GetConfig.getArtTypeName(e);break;case"byteToMB":e=e?Math.ceil(e*10/1048576)/10:0;break;case"cut":r&&r[0]&&(r=parseInt(r[0]),e=e.substr(0,r))}})),e},loadTips:{time:2,dialogEl:null,show:function(e){var t='<div id="loadding"><div><img src="images/loading.gif" alt=""/></div><div class="message"><img src="" alt=""/><%= message %></div></div>',n=_.template(t)({message:e||""});this.close(),$("#loadding").length&&$("#loadding").parents(".ui-dialog").remove(),this.dialogEl=$(n).dialog({modal:!0,dialogClass:"tips",width:300,height:70})},success:function(e){},error:function(e){},close:function(){if(this.dialogEl)try{this.dialogEl.dialog("close")}catch(e){}return this}},tips:function(e,t){},cookie:{setCookie:function(e,t,n){var r=n||1500,i=new Date;i.setTime(i.getTime()+r*24*60*60*1e3),document.cookie=e+"="+encodeURIComponent(t)+";expires="+i.toGMTString()},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?decodeURIComponent(t[2]):null}},filterArray:function(e,n,r){var i=[];return $.each(e,function(e,s){t.inArray(s[r],n)&&i.push(s)}),i}};return t}),define("api",["require","jquery","common"],function(e){var t=e("jquery"),n=e("common"),r={isContained:function(e,t){if(e instanceof Array&&t instanceof Array){if(e.length<t.length)return!1;var n=e.toString();console.info(n);for(var r=0,i=t.length;r<i;r++){console.info(n.indexOf(t[r]));if(n.indexOf(t[r])==-1)return!1}return!0}return!1},fetch:function(e,r,i,s,o,u,a){var f=this;e.indexOf("query")>-1&&n.loadTips.show("数据加载中..."),t.ajax({type:s||"GET",data:t.extend(!0,{},i),url:e,success:function(i){n.loadTips.close(),typeof i=="string"&&(i=t.parseJSON(i));if(!i||typeof i!="object")Backbone.Events.trigger(r,"error",i.response.message||i.response.msg);else if(i.response.code==0){a&&(i.data.callback=a);if(e=="/api/index.php/stationperson/index"){var s=[],l=JSON.parse(localStorage.getItem("userinfo")).uid,c=null;t.each(i.data.list,function(e,t){console.log(e,t);if(t.id==l){c=t;return}}),c.area=="*"?s=i.data.list:t.each(i.data.list,function(e,t){t.area!="*"&&(console.log(c.area,t.area),f.isContained(c.area.split(","),t.area.split(","))&&s.push(t))}),i.data={list:s}}console.log("start trigger",r),Backbone.Events.trigger(r,i.data,o),a&&a()}else if(i.response.code=="-100")route.navigate("login",{trigger:!0});else{Backbone.Events.trigger(r+":fail",i,o);if(u)return}},error:function(t){n.loadTips.close(),console.log(t),Backbone.Events.trigger("messager",{ret:1,massage:e,data:[]},o||window)}})},stat:function(){var e="/api/index.php/stat/info";return this.fetch(e,"stat","get"),this},login:function(e){var t="/api/index.php/login";return e.refresh?this.fetch(t,"login:box",e,"post"):this.fetch(t,"login",e,"post"),this},getMapData:function(e,t){var n="/api/index.php/map/sites";return this.fetch(n,t||"mapdata:update",e,"get"),this},getNavData:function(e,t){var n="/api/index.php/trees/getnav";return this.fetch(n,"nav:update",t,"get",this,!0,e),this},getRolesData:function(e){var t="/api/index.php/role/index";return this.fetch(t,"listdata:update",e,"get"),this},getPersonalsData:function(e){var t="/api/index.php/stationperson/index";return this.fetch(t,"listdata:update",e,"get"),this},getPersonalInfo:function(e){var t="/api/index.php/stationperson/view";return this.fetch(t,"personalInfo:get",e,"get"),this},updatePersonalInfo:function(e){var t="/api/index.php/stationperson/update";return this.fetch(t,"personal:update",e,"post"),this},createPersonal:function(e){var t="/api/index.php/stationperson/create";return this.fetch(t,"personal:create",e,"post"),this},deletePersonal:function(e){var t="/api/index.php/stationperson/delete";return this.fetch(t,"listitem:delete",e,"get"),this},getTreeInfo:function(e){var t="/api/index.php/trees";return this.fetch(t,"tree:get",e,"get"),this},updateTree:function(e){var t="/api/index.php/trees/update";return this.fetch(t,"tree:update",e,"get"),this},createTree:function(e){var t="/api/index.php/trees/create";return this.fetch(t,"tree:create",e,"get"),this},deleteTree:function(e){var t="/api/index.php/trees/delete";return this.fetch(t,"tree:delete",e,"get"),this},getStationRealTimeData:function(e){var t="/api/index.php/realtime";return this.fetch(t,"stationdata:get",e,"get"),this},getAboutInfo:function(e){var t="/api/index.php/bmsinfo";return this.fetch(t,"abouts:get",e,"get"),this},getStationHistoryData:function(e){var t="/api/index.php/query";return this.fetch(t,"stationdata:get",e,"get"),this},getSystemAlarm:function(e){var t="/api/index.php/systemalarm";return this.fetch(t,"listdata:update",e,"get"),this},getGroupHistoryData:function(e){var t="/api/index.php/query/groupmodule";return this.fetch(t,"listdata:update",e,"post"),this},getBatteryHistoryData:function(e){var t="/api/index.php/query/batterymodule";return this.fetch(t,"listdata:update",e,"post"),this},getLinkingStationNum:function(e,t){var n="/api/index.php/stat";return this.fetch(n,t||"linknum:get",e,"get"),this},createStation:function(e,t){var n="/api/index.php/sites/create";return this.fetch(n,t||"stationdata:create",e,"POST"),this},updateStation:function(e){var t="/api/index.php/sites/update";return this.fetch(t,"stationdata:update",e,"POST"),this},deleteStation:function(e){var t="/api/index.php/sites/delete";return this.fetch(t,"stationdata:delete",e,"POST"),this},getNewStationData:function(e){var t="/api/index.php/sites/newstations";return this.fetch(t,"listdata:update",e,"get"),this},getIRCollectData:function(e){var t="/api/index.php/ircollect";return this.fetch(t,"listdata:update",e,"get"),this},updateCollect:function(e){var t="/api/index.php/ircollect/update";return this.fetch(t,"rCollect:start",e,"post"),this},checkStation:function(e){var t="/api/index.php/sites/check";return this.fetch(t,"station:check",e,"get"),this},getStationSlectorList:function(e){var t="/api/index.php/sites/suggest";return this.fetch(t,"stationSelectorList:get",e,"get"),this},getStationInfo:function(e){var t="/api/index.php/map/sitesinfo";return this.fetch(t,"stationinfo:update",e,"get"),this},getStationsInfo:function(e){var t="/api/index.php/sites";return this.fetch(t,"listdata:update",e,"post"),this},getStationEditInfo:function(e){var t="/api/index.php/sites/view";return this.fetch(t,"stationinfo:foredit:update",e,"get"),this},getStationOptionEditInfo:function(e){var t="/api/index.php/stationpara/view";return this.fetch(t,"stationoption:get",e,"get"),this},getSationOptionsData:function(e){var t="/api/index.php/stationpara/index";return this.fetch(t,"listdata:update",e,"get"),this},updateStationOption:function(e){var t="/api/index.php/stationpara/update";return this.fetch(t,"stationoption:update",e,"POST"),this},getGroupsData:function(e){var t="/api/index.php/realtime/groupmodule";return this.fetch(t,"listdata:update",e,"get"),this},getGroupOptionData:function(e){var t="/api/index.php/grouppara/index";return this.fetch(t,"listdata:update",e,"get"),this},getGroupOption:function(e){var t="/api/index.php/grouppara/view";return this.fetch(t,"groupoption:get",e,"get"),this},updateGroupOption:function(e){var t="/api/index.php/grouppara/update";return this.fetch(t,"groupoption:update",e,"post"),this},getMessagesData:function(e){var t="/api/index.php/alarmset/config";return this.fetch(t,"listdata:update",e,"get"),this},getMessageInfo:function(e){var t="/api/index.php/alarmset/view";return this.fetch(t,"messageInfo:get",e,"get"),this},updateMessage:function(e){var t="/api/index.php/alarmset/updateMsg";return this.fetch(t,"message:update",e,"post"),this},createMessage:function(e){var t="/api/index.php/alarmset/create";return this.fetch(t,"message:create",e,"post"),this},deleteMessage:function(e){var t="/api/index.php/alarmset/delete";return this.fetch(t,"listitem:delete",e,"get"),this},getBatterysRealTimeData:function(e){var t="/api/index.php/realtime/batterymodule";return this.fetch(t,"listdata:update",e,"get"),this},getBatteryInfosData:function(e){var t="/api/index.php/batteryinfo/index";return this.fetch(t,"listdata:update",e,"get"),this},getBatteryInfo:function(e){var t="/api/index.php/batteryinfo/view";return this.fetch(t,"batteryInfo:get",e,"get"),this},getBatteryOptionsData:function(e){var t="/api/index.php/batterypara";return this.fetch(t,"listdata:update",e,"get"),this},getBatteryOption:function(e){var t="/api/index.php/batterypara/view";return this.fetch(t,"batteryoption:get",e,"get"),this},updateBatteryOption:function(e){var t="/api/index.php/batterypara/update";return this.fetch(t,"batteryoption:update",e,"POST"),this},createBattery:function(e,t){var n="/api/index.php/batteryinfo/create";return this.fetch(n,t||"battery:create",e,"POST"),this},updateBatteryInfo:function(e){var t="/api/index.php/batteryinfo/update";return this.fetch(t,"batteryInfo:update",e,"POST"),this},deleteBattery:function(e){var t="/api/index.php/batteryinfo/delete";return this.fetch(t,"listitem:delete",e,"POST"),this},getBMSInfosData:function(e){var t="/api/index.php/bmsinfo";return this.fetch(t,"listdata:update",e,"get"),this},getBMSInfo:function(e){var t="/api/index.php/bmsinfo/view";return this.fetch(t,"bmsInfo:get",e,"get"),this},updateBMSInfo:function(e){var t="/api/index.php/bmsinfo/update";return this.fetch(t,"bms:update",e,"post"),this},createBMS:function(e){var t="/api/index.php/bmsinfo/create";return this.fetch(t,"bms:create",e,"post"),this},deleteBMS:function(e){var t="/api/index.php/bmsinfo/delete";return this.fetch(t,"listitem:delete",e,"get"),this},getCompanyInfosData:function(e){var t="/api/index.php/companyinfo";return this.fetch(t,"listdata:update",e,"get"),this},getCompanyInfo:function(e){var t="/api/index.php/companyinfo/view";return this.fetch(t,"companyInfo:get",e,"get"),this},updateCompanyInfo:function(e){var t="/api/index.php/companyinfo/update";return this.fetch(t,"company:update",e,"post"),this},createCompany:function(e){var t="/api/index.php/companyinfo/create";return this.fetch(t,"company:create",e,"post"),this},deleteCompany:function(e){var t="/api/index.php/companyinfo/delete";return this.fetch(t,"listitem:delete",e,"get"),this},getUpsInfosData:function(e){var t="/api/index.php/upsinfo/index";return this.fetch(t,"listdata:update",e,"get"),this},getUpsInfo:function(e){var t="/api/index.php/upsinfo/view";return this.fetch(t,"upsInfo:get",e,"get"),this},createUps:function(e){var t="/api/index.php/upsinfo/create";return this.fetch(t,"ups:create",e,"POST"),this},updateUpsInfo:function(e){var t="/api/index.php/upsinfo/update";return this.fetch(t,"ups:update",e,"POST"),this},deleteUps:function(e){var t="/api/index.php/upsinfo/delete";return this.fetch(t,"listitem:delete",e,"POST"),this},getStationdeviceInfos:function(e){var t="/api/index.php/stationdevice/index";return this.fetch(t,"listdata:update",e,"get"),this},getStationdevice:function(e){var t="/api/index.php/stationdevice/view";return this.fetch(t,"stationdevice:get",e,"get"),this},createStationdevice:function(e){var t="/api/index.php/stationdevice/create";return this.fetch(t,"stationdevice:create",e,"POST"),this},deleteStationdevice:function(e){var t="/api/index.php/stationdevice/delete";return this.fetch(t,"listitem:delete",e,"get"),this},updateStationdevice:function(e){var t="/api/index.php/stationdevice/update";return this.fetch(t,"stationdevice:update",e,"POST"),this},getCautionsData:function(e,t,n){var r="/api/index.php/realtime/galarm";return this.fetch(r,t||"listdata:update",e,"get",window,n),this},resolveCaution:function(e){var t="/api/index.php/gerneralalarm/update";return this.fetch(t,"caution:resolved",e,"post"),this},getAlarmOptions:function(e){var t="/api/index.php/alarmsiteconf";return this.fetch(t,"alarmOptions:get",e,"get"),this},openLimit:function(e){var t="/api/index.php/alarmsiteconf/update?status=1";return this.fetch(t,"limit:open",e,"get"),this},closeLimit:function(e){var t="/api/index.php/alarmsiteconf/update?status=2";return this.fetch(t,"limit:close",e,"get"),this},updateLimit:function(e){var t="/api/index.php/alarmsiteconf/update";return this.fetch(t,"alarmOptions:update",e,"post"),this},getSyestemConfig:function(e){var t="data/systemConfig.json";return this.fetch(t,"systemConfig:update",e,"get"),this},getChartData:function(e){console.log("chart args",e);var t="data/stationlist.json";return this.fetch(t,"stations:update",e,"get"),this},updateParam:function(e,t){var n="/api/index.php/param";return this.fetch(n,t||"param:update",e,"post"),this},getParam:function(e,t){var n="/api/index.php/param/getpara";return this.fetch(n,t||"param:update",e,"post"),this},collect:function(){return Backbone.Events.trigger("listdata:refresh"),this},forceCollect:function(){var e="/api/index.php/uids/forcerin";return this.fetch(e,event||"param:update",args,"post"),this},getByearlog:function(e){var t="/api/index.php/report/byearlog";return this.fetch(t,"listdata:update",e,"post"),this},getGerneralalarmlog:function(e){var t="/api/index.php/gerneralalarm";return this.fetch(t,"listdata:update",e,"post"),this},getChargeOrDischarge:function(e){var t="/api/index.php/report/chargeOrDischarge";return this.fetch(t,"listdata:update",e,"get"),this},getDeviationTrend:function(e){var t="/api/index.php/report/deviationTrend";return this.fetch(t,"listdata:update",e,"get"),this},getUserlog:function(e){var t="/api/index.php/userlog";return this.fetch(t,"listdata:update",e,"post"),this},getChart:function(e,t,n){var r={battery:"/api/index.php/realtime/batterychart",qureyBattery:"/api/index.php/realtime/batterychart",group:"/api/index.php/realtime/group",qureyGroup:"/api/index.php/realtime/groupchart",station:"/api/index.php/realtime",qureyStation:"/api/index.php/realtime/stationchart",caution:"/api/index.php/realtime/galarmchart"};return this},syncHard:function(e,t){this.fetch(location.protocol+"//"+location.host+":3000/setparam?type="+t,null,e,"post")}};return r}),function(){var e=this,t=e._,n=Array.prototype,r=Object.prototype,i=Function.prototype,s=n.push,o=n.slice,u=n.concat,a=r.toString,f=r.hasOwnProperty,l=Array.isArray,c=Object.keys,h=i.bind,p=function(e){return e instanceof p?e:this instanceof p?void (this._wrapped=e):new p(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):e._=p,p.VERSION="1.7.0";var d=function(e,t,n){if(t===void 0)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return function(){return e.apply(t,arguments)}};p.iteratee=function(e,t,n){return null==e?p.identity:p.isFunction(e)?d(e,t,n):p.isObject(e)?p.matches(e):p.property(e)},p.each=p.forEach=function(e,t,n){if(null==e)return e;t=d(t,n);var r,i=e.length;if(i===+i)for(r=0;i>r;r++)t(e[r],r,e);else{var s=p.keys(e);for(r=0,i=s.length;i>r;r++)t(e[s[r]],s[r],e)}return e},p.map=p.collect=function(e,t,n){if(null==e)return[];t=p.iteratee(t,n);for(var r,i=e.length!==+e.length&&p.keys(e),s=(i||e).length,o=Array(s),u=0;s>u;u++)r=i?i[u]:u,o[u]=t(e[r],r,e);return o};var v="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(e,t,n,r){null==e&&(e=[]),t=d(t,r,4);var i,s=e.length!==+e.length&&p.keys(e),o=(s||e).length,u=0;if(arguments.length<3){if(!o)throw new TypeError(v);n=e[s?s[u++]:u++]}for(;o>u;u++)i=s?s[u]:u,n=t(n,e[i],i,e);return n},p.reduceRight=p.foldr=function(e,t,n,r){null==e&&(e=[]),t=d(t,r,4);var i,s=e.length!==+e.length&&p.keys(e),o=(s||e).length;if(arguments.length<3){if(!o)throw new TypeError(v);n=e[s?s[--o]:--o]}for(;o--;)i=s?s[o]:o,n=t(n,e[i],i,e);return n},p.find=p.detect=function(e,t,n){var r;return t=p.iteratee(t,n),p.some(e,function(e,n,i){return t(e,n,i)?(r=e,!0):void 0}),r},p.filter=p.select=function(e,t,n){var r=[];return null==e?r:(t=p.iteratee(t,n),p.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r)},p.reject=function(e,t,n){return p.filter(e,p.negate(p.iteratee(t)),n)},p.every=p.all=function(e,t,n){if(null==e)return!0;t=p.iteratee(t,n);var r,i,s=e.length!==+e.length&&p.keys(e),o=(s||e).length;for(r=0;o>r;r++)if(i=s?s[r]:r,!t(e[i],i,e))return!1;return!0},p.some=p.any=function(e,t,n){if(null==e)return!1;t=p.iteratee(t,n);var r,i,s=e.length!==+e.length&&p.keys(e),o=(s||e).length;for(r=0;o>r;r++)if(i=s?s[r]:r,t(e[i],i,e))return!0;return!1},p.contains=p.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=p.values(e)),p.indexOf(e,t)>=0)},p.invoke=function(e,t){var n=o.call(arguments,2),r=p.isFunction(t);return p.map(e,function(e){return(r?t:e[t]).apply(e,n)})},p.pluck=function(e,t){return p.map(e,p.property(t))},p.where=function(e,t){return p.filter(e,p.matches(t))},p.findWhere=function(e,t){return p.find(e,p.matches(t))},p.max=function(e,t,n){var r,i,s=-1/0,o=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:p.values(e);for(var u=0,a=e.length;a>u;u++)r=e[u],r>s&&(s=r)}else t=p.iteratee(t,n),p.each(e,function(e,n,r){i=t(e,n,r),(i>o||i===-1/0&&s===-1/0)&&(s=e,o=i)});return s},p.min=function(e,t,n){var r,i,s=1/0,o=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:p.values(e);for(var u=0,a=e.length;a>u;u++)r=e[u],s>r&&(s=r)}else t=p.iteratee(t,n),p.each(e,function(e,n,r){i=t(e,n,r),(o>i||1/0===i&&1/0===s)&&(s=e,o=i)});return s},p.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:p.values(e),r=n.length,i=Array(r),s=0;r>s;s++)t=p.random(0,s),t!==s&&(i[s]=i[t]),i[t]=n[s];return i},p.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=p.values(e)),e[p.random(e.length-1)]):p.shuffle(e).slice(0,Math.max(0,t))},p.sortBy=function(e,t,n){return t=p.iteratee(t,n),p.pluck(p.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index-t.index}),"value")};var m=function(e){return function(t,n,r){var i={};return n=p.iteratee(n,r),p.each(t,function(r,s){var o=n(r,s,t);e(i,r,o)}),i}};p.groupBy=m(function(e,t,n){p.has(e,n)?e[n].push(t):e[n]=[t]}),p.indexBy=m(function(e,t,n){e[n]=t}),p.countBy=m(function(e,t,n){p.has(e,n)?e[n]++:e[n]=1}),p.sortedIndex=function(e,t,n,r){n=p.iteratee(n,r,1);for(var i=n(t),s=0,o=e.length;o>s;){var u=s+o>>>1;n(e[u])<i?s=u+1:o=u}return s},p.toArray=function(e){return e?p.isArray(e)?o.call(e):e.length===+e.length?p.map(e,p.identity):p.values(e):[]},p.size=function(e){return null==e?0:e.length===+e.length?e.length:p.keys(e).length},p.partition=function(e,t,n){t=p.iteratee(t,n);var r=[],i=[];return p.each(e,function(e,n,s){(t(e,n,s)?r:i).push(e)}),[r,i]},p.first=p.head=p.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:o.call(e,0,t)},p.initial=function(e,t,n){return o.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},p.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},p.rest=p.tail=p.drop=function(e,t,n){return o.call(e,null==t||n?1:t)},p.compact=function(e){return p.filter(e,p.identity)};var g=function(e,t,n,r){if(t&&p.every(e,p.isArray))return u.apply(r,e);for(var i=0,o=e.length;o>i;i++){var a=e[i];p.isArray(a)||p.isArguments(a)?t?s.apply(r,a):g(a,t,n,r):n||r.push(a)}return r};p.flatten=function(e,t){return g(e,t,!1,[])},p.without=function(e){return p.difference(e,o.call(arguments,1))},p.uniq=p.unique=function(e,t,n,r){if(null==e)return[];p.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=p.iteratee(n,r));for(var i=[],s=[],o=0,u=e.length;u>o;o++){var a=e[o];if(t)o&&s===a||i.push(a),s=a;else if(n){var f=n(a,o,e);p.indexOf(s,f)<0&&(s.push(f),i.push(a))}else p.indexOf(i,a)<0&&i.push(a)}return i},p.union=function(){return p.uniq(g(arguments,!0,!0,[]))},p.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,i=e.length;i>r;r++){var s=e[r];if(!p.contains(t,s)){for(var o=1;n>o&&p.contains(arguments[o],s);o++);o===n&&t.push(s)}}return t},p.difference=function(e){var t=g(o.call(arguments,1),!0,!0,[]);return p.filter(e,function(e){return!p.contains(t,e)})},p.zip=function(e){if(null==e)return[];for(var t=p.max(arguments,"length").length,n=Array(t),r=0;t>r;r++)n[r]=p.pluck(arguments,r);return n},p.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},p.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=p.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}for(;i>r;r++)if(e[r]===t)return r;return-1},p.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=e.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(e[r]===t)return r;return-1},p.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),s=0;r>s;s++,e+=n)i[s]=e;return i};var y=function(){};p.bind=function(e,t){var n,r;if(h&&e.bind===h)return h.apply(e,o.call(arguments,1));if(!p.isFunction(e))throw new TypeError("Bind must be called on a function");return n=o.call(arguments,2),r=function(){if(this instanceof r){y.prototype=e.prototype;var i=new y;y.prototype=null;var s=e.apply(i,n.concat(o.call(arguments)));return p.isObject(s)?s:i}return e.apply(t,n.concat(o.call(arguments)))}},p.partial=function(e){var t=o.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,s=r.length;s>i;i++)r[i]===p&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},p.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=p.bind(e[n],e);return e},p.memoize=function(e,t){var n=function(r){var i=n.cache,s=t?t.apply(this,arguments):r;return p.has(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return n.cache={},n},p.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},p.defer=function(e){return p.delay.apply(p,[e,1].concat(o.call(arguments,1)))},p.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:p.now(),o=null,s=e.apply(r,i),o||(r=i=null)};return function(){var f=p.now();u||n.leading!==!1||(u=f);var l=t-(f-u);return r=this,i=arguments,0>=l||l>t?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(a,l)),s}},p.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=p.now()-o;t>f&&f>0?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),r||(s=i=null)))};return function(){s=this,i=arguments,o=p.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},p.wrap=function(e,t){return p.partial(t,e)},p.negate=function(e){return function(){return!e.apply(this,arguments)}},p.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},p.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},p.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},p.once=p.partial(p.before,2),p.keys=function(e){if(!p.isObject(e))return[];if(c)return c(e);var t=[];for(var n in e)p.has(e,n)&&t.push(n);return t},p.values=function(e){for(var t=p.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},p.pairs=function(e){for(var t=p.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},p.invert=function(e){for(var t={},n=p.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},p.functions=p.methods=function(e){var t=[];for(var n in e)p.isFunction(e[n])&&t.push(n);return t.sort()},p.extend=function(e){if(!p.isObject(e))return e;for(var t,n,r=1,i=arguments.length;i>r;r++){t=arguments[r];for(n in t)f.call(t,n)&&(e[n]=t[n])}return e},p.pick=function(e,t,n){var r,i={};if(null==e)return i;if(p.isFunction(t)){t=d(t,n);for(r in e){var s=e[r];t(s,r,e)&&(i[r]=s)}}else{var a=u.apply([],o.call(arguments,1));e=new Object(e);for(var f=0,l=a.length;l>f;f++)r=a[f],r in e&&(i[r]=e[r])}return i},p.omit=function(e,t,n){if(p.isFunction(t))t=p.negate(t);else{var r=p.map(u.apply([],o.call(arguments,1)),String);t=function(e,t){return!p.contains(r,t)}}return p.pick(e,t,n)},p.defaults=function(e){if(!p.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];for(var i in r)e[i]===void 0&&(e[i]=r[i])}return e},p.clone=function(e){return p.isObject(e)?p.isArray(e)?e.slice():p.extend({},e):e},p.tap=function(e,t){return t(e),e};var b=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof p&&(e=e._wrapped),t instanceof p&&(t=t._wrapped);var i=a.call(e);if(i!==a.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]===e)return r[s]===t;var o=e.constructor,u=t.constructor;if(o!==u&&"constructor"in e&&"constructor"in t&&!(p.isFunction(o)&&o instanceof o&&p.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var f,l;if("[object Array]"===i){if(f=e.length,l=f===t.length)for(;f--&&(l=b(e[f],t[f],n,r)););}else{var c,h=p.keys(e);if(f=h.length,l=p.keys(t).length===f)for(;f--&&(c=h[f],l=p.has(t,c)&&b(e[c],t[c],n,r)););}return n.pop(),r.pop(),l};p.isEqual=function(e,t){return b(e,t,[],[])},p.isEmpty=function(e){if(null==e)return!0;if(p.isArray(e)||p.isString(e)||p.isArguments(e))return 0===e.length;for(var t in e)if(p.has(e,t))return!1;return!0},p.isElement=function(e){return!!e&&1===e.nodeType},p.isArray=l||function(e){return"[object Array]"===a.call(e)},p.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){p["is"+e]=function(t){return a.call(t)==="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(e){return p.has(e,"callee")}),"function"!=typeof /./&&(p.isFunction=function(e){return"function"==typeof e||!1}),p.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},p.isNaN=function(e){return p.isNumber(e)&&e!==+e},p.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===a.call(e)},p.isNull=function(e){return null===e},p.isUndefined=function(e){return e===void 0},p.has=function(e,t){return null!=e&&f.call(e,t)},p.noConflict=function(){return e._=t,this},p.identity=function(e){return e},p.constant=function(e){return function(){return e}},p.noop=function(){},p.property=function(e){return function(t){return t[e]}},p.matches=function(e){var t=p.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var r=0;n>r;r++){var i=t[r],s=i[0];if(i[1]!==e[s]||!(s in e))return!1}return!0}},p.times=function(e,t,n){var r=Array(Math.max(0,e));t=d(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},p.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},p.now=Date.now||function(){return(new Date).getTime()};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},E=p.invert(w),S=function(e){var t=function(t){return e[t]},n="(?:"+p.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};p.escape=S(w),p.unescape=S(E),p.result=function(e,t){if(null==e)return void 0;var n=e[t];return p.isFunction(n)?e[t]():n};var x=0;p.uniqueId=function(e){var t=++x+"";return e?e+t:t},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\u2028|\u2029/g,k=function(e){return"\\"+N[e]};p.template=function(e,t,n){!t&&n&&(t=n),t=p.defaults({},t,p.templateSettings);var r=RegExp([(t.escape||T).source,(t.interpolate||T).source,(t.evaluate||T).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(C,k),i=u+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(u){throw u.source=s,u}var a=function(e){return o.call(this,e,p)},f=t.variable||"obj";return a.source="function("+f+"){\n"+s+"}",a},p.chain=function(e){var t=p(e);return t._chain=!0,t};var L=function(e){return this._chain?p(e).chain():e};p.mixin=function(e){p.each(p.functions(e),function(t){var n=p[t]=e[t];p.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),L.call(this,n.apply(p,e))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];p.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],L.call(this,n)}}),p.each(["concat","join","slice"],function(e){var t=n[e];p.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}.call(this),define("_",function(){}),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),define("context",["require","backbone"],function(e,t){function o(e){return e=="1"?'<label style="color:#ff0000">是</label>':'<label style="color:#888">否</label>'}function u(e){return e=="1"?"<label>是</label>":"<label>否</label>"}var n,r,i,s={getPageConfig:function(e){},setUser:function(){},getListCols:function(e){return{station:[{data:"Current",title:"电流A",width:80},{data:"Voltage",title:"电压V",width:80},{data:"Temperature",title:"温度℃",width:80},{data:"Humidity",title:"湿度%",width:80},{data:"Lifetime",title:"寿命%",width:80},{data:"Capacity",title:"预估容量%",width:80},{data:"ChaState",title:"UPS状态",width:70,render:function(e){return e==1?"充电":e==2?"放电":"浮充"}},{data:"record_time",title:"时间",width:150},{data:"Groups",title:"组数",width:50},{data:"GroBats",title:"电池数",width:80},{data:"ups_power",title:"功率W/h",width:70},{data:"ups_maintain_date",title:"维护日期",width:100,render:function(e){var t=+(new Date(e)),n=+(new Date),r=(t-n)/1e3/60/60/24;return r<7&&r>0?'<div style="color:red">'+e+"</div>":e}},{data:"start_time",title:"放电开始",width:150,render:function(e){return e!=0?e:""}},{data:"end_time",title:"放电结束",width:150,render:function(e){return e!=0?e:""}},{data:"MaxTem_R",title:"温度上限℃",width:130},{data:"MinTem_R",title:"温度下限℃",width:130},{data:"MaxHum_R",title:"湿度上限%",width:130},{data:"MinHum_R",title:"湿度下限%",width:130},{data:"DisChaLim_R",title:"最大放电电流A",width:70},{data:"ChaLim_R",title:"最大充电电流A",width:70}],group:[{data:"Voltage",title:"电压V",width:100},{data:"Current",title:"电流A",width:100},{data:"Temperature",title:"平均温度℃",width:100},{data:"Humidity",title:"湿度%",width:50},{data:"Avg_U",title:"电压均值",width:100},{data:"Avg_T",title:"温度均值",width:100},{data:"Avg_R",title:"内阻均值",width:100},{data:"",title:"氢气浓度%",width:100},{data:"",title:"氧气浓度%",width:100},{data:"GroBats",title:"电池数",width:80},{data:"record_time",title:"时间",width:150},{data:"DisChaLim_R",title:"最大放电电流A",width:150},{data:"ChaLim_R",title:"最大充电电流A",width:150},{data:"",title:"氢气上限%",width:100},{data:"",title:"氧气上限%",width:100},{data:"MaxTem_R",title:"温度上限℃",width:100},{data:"MinTem_R",title:"温度下限℃",width:100},{data:"MaxHumi_R",title:"湿度上限%",width:100},{data:"MinHumi_R",title:"湿度下限%",width:100}],battery:[{data:"Voltage",title:"电压V",width:80},{data:"Temperature",title:"温度℃",width:80},{data:"Resistor",title:"内阻MΩ",width:100},{data:"Dev_U",title:"电压偏离",width:100,render:function(e){return Math.abs(e).toFixed(2)}},{data:"Dev_T",title:"温度偏离",width:100,render:function(e){return Math.abs(e).toFixed(2)}},{data:"Dev_R",title:"内阻偏离",width:100,render:function(e){return Math.abs(e).toFixed(2)}},{data:"Lifetime",title:"电池寿命%",width:100},{data:"Capacity",title:"容量%",width:100},{data:"record_time",title:"时间",width:150},{data:"MaxU_R",title:"浮充上限V",width:80},{data:"MaxDevU_R",title:"浮充偏差V",width:80},{data:"MinU_R",title:"放电下限V",width:80},{data:"MaxT_R",title:"温度上限℃",width:80},{data:"MinT_R",title:"温度下限℃",width:80},{data:"MaxR_R",title:"内阻上限MΩ",width:100}],qurey_station:[{data:"Current",title:"电流A",width:80},{data:"Voltage",title:"电压V",width:80},{data:"Temperature",title:"温度℃",width:80},{data:"Humidity",title:"湿度%",width:80},{data:"Lifetime",title:"寿命%",width:80},{data:"Capacity",title:"预估容量%",width:80},{data:"ChaState",title:"UPS状态",width:70,render:function(e){return e==1?"充电":e==2?"放电":"浮充"}},{data:"record_time",title:"时间",width:150},{data:"Groups",title:"组数",width:50},{data:"GroBats",title:"电池数",width:80},{data:"ups_power",title:"功率W/h",width:70},{data:"ups_maintain_date",title:"维护日期",width:100,render:function(e){var t=+(new Date(e)),n=+(new Date),r=(t-n)/1e3/60/60/24;return r<7&&r>0?'<div style="color:red">'+e+"</div>":e}},{data:"start_time",title:"放电开始",width:150,render:function(e){return e!=0?e:""}},{data:"end_time",title:"放电结束",width:150,render:function(e){return e!=0?e:""}},{data:"MaxTem_R",title:"温度上限℃",width:130},{data:"MinTem_R",title:"温度下限℃",width:130},{data:"MaxHum_R",title:"湿度上限%",width:130},{data:"MinHum_R",title:"湿度下限%",width:130},{data:"DisChaLim_R",title:"最大放电电流A",width:70},{data:"ChaLim_R",title:"最大充电电流A",width:70}],qurey_group:[{data:"Voltage",title:"电压V",width:100},{data:"Current",title:"电流A",width:100},{data:"Temperature",title:"平均温度℃",width:100},{data:"Humidity",title:"湿度%",width:50},{data:"Avg_U",title:"电压均值",width:100},{data:"Avg_T",title:"温度均值",width:100},{data:"Avg_R",title:"内阻均值",width:100},{data:"",title:"氢气浓度%",width:100},{data:"",title:"氧气浓度%",width:100},{data:"GroBats",title:"电池数",width:80},{data:"record_time",title:"时间",width:150},{data:"DisChaLim_R",title:"最大放电电流A",width:150},{data:"ChaLim_R",title:"最大充电电流A",width:150},{data:"",title:"氢气上限%",width:100},{data:"",title:"氧气上限%",width:100},{data:"MaxTem_R",title:"温度上限℃",width:100},{data:"MinTem_R",title:"温度下限℃",width:100},{data:"MaxHumi_R",title:"湿度上限%",width:100},{data:"MinHumi_R",title:"湿度下限%",width:100}],qurey_battery:[{data:"Voltage",title:"电压V",width:80},{data:"Temperature",title:"温度℃",width:80},{data:"Resistor",title:"内阻MΩ",width:100},{data:"Dev_U",title:"电压偏离",width:100,render:function(e){return Math.abs(e).toFixed(2)}},{data:"Dev_T",title:"温度偏离",width:100,render:function(e){return Math.abs(e).toFixed(2)}},{data:"Dev_R",title:"内阻偏离",width:100,render:function(e){return Math.abs(e).toFixed(2)}},{data:"Lifetime",title:"电池寿命%",width:100},{data:"Capacity",title:"容量%",width:100},{data:"record_time",title:"时间",width:150},{data:"MaxU_R",title:"浮充上限V",width:80},{data:"MaxDevU_R",title:"浮充偏差V",width:80},{data:"MinU_R",title:"放电下限V",width:80},{data:"MaxT_R",title:"温度上限℃",width:80},{data:"MinT_R",title:"温度下限℃",width:80},{data:"MaxR_R",title:"内阻上限MΩ",width:100}]}[e]},getUser:function(){return this.get("user")},setPageType:function(e){n=e,t.Events.trigger("pageType:change",e,window)},getListType:function(){return r},setCurStations:function(e){i=e,t.Events.trigger("curstation:change",e,window)},getCurStations:function(){return i}};return s}),define("ui",["require","backbone","api","context","common"],function(e){function u(){$("body").removeClass("small"),$(window).width()<1640&&$("body").addClass("small")}var t=e("backbone"),n=e("api"),r=e("context"),i=e("common"),s=!1,o=t.View.extend({el:"body",events:{"click #addStation":"onAddStation","click #addBattery":"onAddBattery","click #addDevice":"onAddDevice","click #addUps":"onAddUPS","click #addBMS":"onAddBMS","click #addCompany":"onAddCompany","click #addMessage":"onAddMessage","click #addPersonal":"onAddPersonal","click #addStationOption":"onAddStationOption","click #singleChart":"showSingleChart","click #mutipleChart":"showMutipleChart","click #saveOtherOptionBtn":"saveOtherOption","click .left-hide":"leftHide","click .yx-show":"leftShow","click .zoom":"upShow","click .bottom-hide":"downHide","click .bottom-show":"downShow","click .switch-btn a":"switchBtn","click .ggsj":"onUpadtaTime","click #startCollectBtn":"startCollect","click #navSearchBtn":"onSearchNav","click .tzcj":"stopCollect","click .title-list .switch-btn i":"showItemsLayer","click .cj-btn":"onSearch","click .exportdata":"onExportCSV","click #searchBtn span span":"onSearch","click #switchUser":"switchUser","click #startCollectR":"startCollectR","click #about":"about"},initialize:function(){var n=this;n.listenTo(t.Events,"refreshtime:update",function(e){alert("设置成功"),n.isCollecting()&&n.stopCollect().startCollect()}),n.listenTo(t.Events,"refresh:get",function(e){$("#collectDuration").val(e.refresh)}),n.listenTo(t.Events,"linknum:get",function(e){$("#linkingNum").html(e.online),$("#unlinkNum").html(e.offline),$("#collectDuration").val(e.refresh),e.dismap==0?$("#map-switch").hide():$("#map-switch").show(),e.voice_on_off=="1"?$("#alarm_sound").removeClass("graylight").addClass("grelight"):$("#alarm_sound").removeClass("grelight").addClass("graylight"),e.light_on_off=="1"?$("#alarm_light").removeClass("graylight").addClass("grelight"):$("#alarm_light").removeClass("grelight").addClass("graylight"),e.upiao=="1"?$("#alarm_collecting").removeClass("graylight").addClass("grelight"):$("#alarm_collecting").removeClass("grelight").addClass("graylight"),e.sms_on_off=="1"?$("#alarm_sms").removeClass("graylight").addClass("grelight"):$("#alarm_sms").removeClass("grelight").addClass("graylight"),e.email_on_off=="1"?$("#alarm_mail").removeClass("graylight").addClass("grelight"):$("#alarm_mail").removeClass("grelight").addClass("graylight")}),n.listenTo(t.Events,"otherOption:get",function(t){e(["common"],function(e){e.setFormValue($("#otherOptionEdit"),t),$("#otherOptionEdit .jqtransform").jqTransform()})}),n.listenTo(t.Events,"param:update",function(e){e.dismap==0?$("#map-switch").hide():$("#map-switch").show(),e.sms_on_off=="1"?$("#alarm_sms").removeClass("graylight").addClass("grelight"):$("#alarm_sms").removeClass("grelight").addClass("graylight"),e.email_on_off=="1"?$("#alarm_mail").removeClass("graylight").addClass("grelight"):$("#alarm_mail").removeClass("grelight").addClass("graylight"),e.voice_on_off=="1"?$("#alarm_sound").removeClass("graylight").addClass("grelight"):$("#alarm_sound").removeClass("grelight").addClass("graylight"),e.light_on_off=="1"?$("#alarm_light").removeClass("graylight").addClass("grelight"):$("#alarm_light").removeClass("grelight").addClass("graylight"),alert("修改成功")}),n.listenTo(t.Events,"monitoring:start",function(e){e.totals&&e.totals>0?$(".baojing").css("display","block"):$(".baojing").css("display","none"),$(".baojing .bg").html(e.totals||0)}),n.listenTo(t.Events,"monitoring:start:fail",function(e){e.totals&&e.totals>0?$(".baojing").css("display","block"):$(".baojing").css("display","none"),$(".baojing .bg").html(e.totals||0)}),n.listenTo(t.Events,"station:next",function(e){n.showBatteryEditDialog(!1,e)}),n.listenTo(t.Events,"battery:next",function(e){n.showUPSEditDialog(!1,e)})},switchUser:function(){e(["js/dialog-login"],function(e){e&&e.show()})},about:function(){e(["js/dialog-about"],function(e){e.init(),e&&e.show()})},startCollectR:function(){var t=$("#cj_password").val();if(t!="bms"){alert("请输入正确的采集密码"),$("#cj_password").val("");return}e(["blocks/nav"],function(e){var t=e.getSites(),r;this.ids&&this.ids.sid?r=this.ids.sid:r=t.ids.join(",");if(r.split(",").length>1){alert("只能勾选一个站点");return}var i=e.getBatteryIds(),s=i?i.ids.join(","):"";$("#cj_password").val(""),$.ajax({url:"http://"+window.location.host+":3000"+"/irc",type:"post",data:{batterys:s}}),n.updateCollect({stationid:r,batterys:s},"rCollect:start")})},onSearch:function(){t.Events.trigger("search:done")},onExportCSV:function(){t.Events.trigger("export:done")},showItemsLayer:function(e){var n=$(e.currentTarget),s=n.offset(),o=/qurey/.test(window.location.href)?"qurey_"+n.attr("for"):n.attr("for"),u=i.cookie.getCookie(o+"Cols"),a=r.getListCols(o).concat([]),f=[],l="";u&&(u=u.split(","));if(!u||u.length==0)u=a;console.log(a,u),$.each(a,function(e,t){i.inArray(t.data,u)?t.ischeck="checked":t.ischeck="",l+=_.template('<label><input name="cols" type="checkbox" <%= ischeck %> key="<%= data %>"/><%= title %></label>')(t)}),$("<div class='config-item-list'>"+l+"</div>").dialog({dialogClass:"submenu",modal:!0,width:600,buttons:[{text:"全选",icons:{primary:"ui-icon-heart"},click:function(){$("[type=checkbox]",$(this)).each(function(e,t){$(t).attr("checked","checked")})}},{text:"确认",icons:{primary:"ui-icon-heart"},click:function(){var e="";$("[type=checkbox]:checked",$(this)).each(function(t,n){e+=$(n).attr("key")+","});if(!e){alert("请至少选择一列展示");return}i.cookie.setCookie(o+"Cols",e.replace(/,$/,"")),console.log("start trigger",o+"ColsChange"),t.Events.trigger(o+"ColsChange"),$(this).dialog("close")}}]}),$(".ui-dialog").css({top:s.top+n.height(),left:s.left+n.width()})},switchBtn:function(e){var t=$($(e.currentTarget).parents(".switch-btn")),n=t.siblings(".switch-btn");n.removeClass("active"),t.addClass("active")},showUnsolveDialog:function(t){e(["js/dialog-resolveCaution"],function(e){e&&e.show(t)})},onSearchNav:function(){var e=$("#navSearchKeyword").val();n.getNavData(function(){},{key:e})},onUpadtaTime:function(){var e=parseInt($("#collectDuration").val());e&&n.updateParam({refresh:e},"refreshtime:update")},isCollecting:function(){return localStorage.getItem("collecting")==="true"},startCollect:function(){var e=parseInt($("#collectDuration").val()),t=window.location.hash,r=["#/manage/station","#/manage/group","#/manage/battery","#/manage/caution"];return e&&(r.indexOf(t)>-1?$("body").addClass("collecting").everyTime(e+"s","collect",n.collect):$("body").removeClass("collecting").stopTime("collect",n.collect),$("#startCollectBtn").hide(),$(".tzcj").css("display","block"),localStorage.setItem("collecting","true")),this},collectAuto:function(){this.isCollecting()?this.startCollect():this.stopCollect()},stopCollect:function(){return $("body").removeClass("collecting").stopTime("collect",n.collect),$("#startCollectBtn").css("display","block"),$(".tzcj").hide(),localStorage.setItem("collecting","false"),this},startGetCaution:function(){if(s)return;s=!0,$("body").everyTime("5s","monitoring",function(){n.getNavData(),n.getLinkingStationNum(),n.getCautionsData(!1,"monitoring:start",!0)})},stopGetCaution:function(){s=!1,$("body").stopTime("monitoring")},onAddStation:function(){this.showStationEditDialog()},showStationEditDialog:function(t){e(["js/dialog-stationEdit"],function(e){e&&e.show(t)})},onAddBattery:function(){this.showBatteryEditDialog()},showBatteryEditDialog:function(t,n){e(["js/dialog-batteryEdit"],function(e){e&&e.show(t,n)})},onAddUPS:function(){this.showUPSEditDialog()},showUPSEditDialog:function(t,n){e(["js/dialog-UPSEdit"],function(e){e&&e.show(t,n)})},onAddBMS:function(){this.showBMSEditDialog()},showBMSEditDialog:function(t){e(["js/dialog-BMSEdit"],function(e){e&&e.show(t)})},onAddCompany:function(){this.showCompanyEditDialog()},showCompanyEditDialog:function(t){e(["js/dialog-CompanyEdit"],function(e){e&&e.show(t)})},onAddMessage:function(){this.showMessageEditDialog()},showMessageEditDialog:function(t){e(["js/dialog-messageEdit"],function(e){e&&e.show(t)})},onAddPersonal:function(){this.showPersonalEditDialog()},showPersonalEditDialog:function(t){e(["js/dialog-personalEdit"],function(e){e&&e.show(t)})},showLimitationEditDialog:function(t){e(["js/dialog-limitationEdit.js"],function(e){e.init(),e.show(t)})},onAddDevice:function(){this.showStationdeviceEditDialog()},showStationdeviceEditDialog:function(t){e(["js/dialog-deviceEdit.js"],function(e){e&&e.show(t)})},saveOtherOption:function(){e(["common"],function(e){var t=e.getFormValue($("#otherOptionEdit"));if(parseInt(t.refresh)<8){alert("刷新频率最小间隔8秒"),$("#otherOptionEdit [key=refresh]").val(8);return}if(parseInt(t.collection)<8){alert("采集频率最小间隔8秒"),$("#otherOptionEdit [key=collection]").val(8);return}t.dismap="0",t.sms_on_off="0",t.email_on_off="0",t.light_on_off="0",t.voice_on_off="0",$("#map-switch").hide(),$("#otherOptionEdit [key=dismap]").siblings(".jqTransformChecked").length&&(t.dismap="1",$("#map-switch").show()),$("#otherOptionEdit [key=sms_on_off]").siblings(".jqTransformChecked").length&&(t.sms_on_off="1"),$("#otherOptionEdit [key=light_on_off]").siblings(".jqTransformChecked").length&&(t.light_on_off="1"),$("#otherOptionEdit [key=voice_on_off]").siblings(".jqTransformChecked").length&&(t.voice_on_off="1"),$("#otherOptionEdit [key=email_on_off]").siblings(".jqTransformChecked").length&&(t.email_on_off="1"),n.updateParam(t)})},onAddStationOption:function(){this.showStationOptionEditDialog()},showStationOptionEditDialog:function(t){e(["js/dialog-stationOptionEdit"],function(e){e&&e.show(t)})},showGroupOptionEditDialog:function(t){e(["js/dialog-groupOptionEdit"],function(e){e&&e.show(t)})},showBatteryOptionEditDialog:function(t){e(["js/dialog-batteryOptionEdit"],function(e){e&&e.show(t)})},showOhterOptionEditDialog:function(t){e(["js/dialog-otherOptionEdit"],function(e){e&&e.show(t)})},resize:function(){u();var e=this,t=$(window).height(),n=$("div.top").outerHeight(),r=$("div.bottom").outerHeight();$("div.wrap").height(t-n-r);var i=$("div.wrap").height();$("div.down").height(i-i*.65-10);var s=$("div.status").is(":visible")?$("div.status").outerHeight():0,o=$("div.kscj").is(":visible")?$("div.kscj").outerHeight():0,a=$("div.cx").is(":visible")?$("div.cx").outerHeight():0,f=$("dl.set-list").is(":visible")?$("dl.set-list").outerHeight():0;return $("div.nav-tree").height(i-s-f-o-a-95),this},leftHide:function(){$("div.left").hide(),$("div.right").css("margin-left",0),$("b.yx-show").show(),$("div.down").is(":hidden")&&$("div.title-list span.zoom").addClass("big").attr("title","窗口还原")},leftShow:function(){$("div.left").show(),$("div.right").css("margin-left",$("div.left").outerWidth()),$("b.yx-show").hide(),$("span.zoom").hasClass("big")&&$("span.zoom").removeClass("big").attr("title","窗口最大化")},downHide:function(e){return $("div.down").hide(),!e||e.currentTarget?$("b.bottom-show").show():$("b.bottom-show").hide(),$("div.left").is(":hidden")&&$("div.title-list span.zoom").addClass("big").attr("title","窗口还原"),this.setH(),arguments[0].currentTarget&&t.Events.trigger("listdata:refresh"),this},downShow:function(e){if($("b.bottom-show").is(":visible")||e)$("div.down").show(),$("b.bottom-show").hide(),$("span.zoom").hasClass("big")&&$("span.zoom").removeClass("big").attr("title","窗口最大化"),this.setH();arguments[0].currentTarget&&t.Events.trigger("listdata:refresh")},upShow:function(e){var t=$(e.currentTarget);t.attr("class")=="zoom"?(t.addClass("big").attr("title","窗口还原"),this.leftHide(),$("#down").is(":visible")?this.downHide(e):this.downHide(e,!0),this.resizeAutoListWidth().resizePage()):(t.removeClass("big").attr("title","窗口最大化"),this.leftShow(e),this.downShow(e))},setH:function(){var e=$("div.up").height(),t=$("#subListTab").is(":visible")?$("#subListTab").height():0,n=$("#listBtns").is(":visible")?$("#listBtns").height():0,r=$(".list-bottom").is(":visible")?$(".list-bottom").height():0,i=$(".dataTable").is(":visible")?$(".dataTable").height():0,s=$(".tree-info-head").is(":visible")?$(".tree-info-head").height():0;$("div#yScrollBar").height(e-130-t-n-r-i),$("div.tree-info-body").height(e-100-t-n-s-30)},resizeAutoListWidth:function(){return $("#auto").width($("#list").width()-$("#lock").width()),this},resizePage:function(){return $("#xScrollBar").width($("#list").width()-$("#page").width()),this},switchNav:function(e,t,n){return e&&($(".nav-list .switch-btn").removeClass("active"),$(".nav-list ."+e).addClass("active")),t&&($(".item-list .switch-btn").removeClass("active"),$(".item-list ."+t).addClass("active")),n&&($(".sub-list-tab .switch-btn").removeClass("active"),$(".sub-list-tab ."+n).addClass("active")),this},switchChartBtns:function(e){return e&&($(".btn-wrap .btns").hide(),$(".btn-wrap .btns."+e).show()),this},switchBtnGroups:function(e,t,n){var r=$("#listBtns ."+t+(n?"-"+n:"")),i=$("#subListTab ."+t);return $(".item-list .switch-btn").hide(),$(".item-list ."+e).show(),i.length?($(".sub-list-tab").show(),$(".sub-list-tab .switch-btn").hide(),$(".sub-list-tab ."+t).show()):$(".sub-list-tab").hide(),r.length?($("#listBtns").show(),$("#listBtns li").hide(),r.show()):$("#listBtns").hide(),this},switchListAlertBox:function(e){return $(".show-list dd").show(),this},resizeChartBox:function(){return this},getListWidth:function(){return $("#list").width()},getListHeight:function(){var e=$("div.up").height(),t=$(".list-header").height()+10,n=$(".right-header").height(),r=$("#page").height();return 500}}),a=new o;return a.startGetCaution(),$(window).resize(function(){u(),a.resize(),a.resizeAutoListWidth().resizePage().resizeChartBox()}),a}),function(e,t,n){(function(e){jQuery&&!jQuery.fn.dataTable&&e(jQuery)})(function(r){function L(e){var t="a aa ai ao as b fn i m o s ",n,i,s={};r.each(e,function(r,o){n=r.match(/^([^A-Z]+?)([A-Z])/),n&&t.indexOf(n[1]+" ")!==-1&&(i=r.replace(n[0],n[2].toLowerCase()),s[i]=r,n[1]==="o"&&L(e[r]))}),e._hungarianMap=s}function A(e,t,i){e._hungarianMap||L(e);var s;r.each(t,function(o,u){s=e._hungarianMap[o],s!==n&&(i||t[s]===n)&&(s.charAt(0)==="o"?(t[s]||(t[s]={}),r.extend(!0,t[s],t[o]),A(e[s],t[s],i)):t[s]=t[o])})}function O(e){var t=i.defaults.oLanguage,n=e.sZeroRecords;!e.sEmptyTable&&n&&t.sEmptyTable==="No data available in table"&&pn(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&n&&t.sLoadingRecords==="Loading..."&&pn(e,e,"sZeroRecords","sLoadingRecords"),e.sInfoThousands&&(e.sThousands=e.sInfoThousands);var r=e.sDecimal;r&&Vn(r)}function _(e){M(e,"ordering","bSort"),M(e,"orderMulti","bSortMulti"),M(e,"orderClasses","bSortClasses"),M(e,"orderCellsTop","bSortCellsTop"),M(e,"order","aaSorting"),M(e,"orderFixed","aaSortingFixed"),M(e,"paging","bPaginate"),M(e,"pagingType","sPaginationType"),M(e,"pageLength","iDisplayLength"),M(e,"searching","bFilter"),typeof e.sScrollX=="boolean"&&(e.sScrollX=e.sScrollX?"100%":"");var t=e.aoSearchCols;if(t)for(var n=0,r=t.length;n<r;n++)t[n]&&A(i.models.oSearch,t[n])}function D(e){M(e,"orderable","bSortable"),M(e,"orderData","aDataSort"),M(e,"orderSequence","asSorting"),M(e,"orderDataType","sortDataType");var t=e.aDataSort;t&&!r.isArray(t)&&(e.aDataSort=[t])}function P(e){var t=e.oBrowser,n=r("<div/>").css({position:"fixed",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(r("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(r('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),i=n.find(".test");t.bScrollOversize=i[0].offsetWidth===100,t.bScrollbarLeft=Math.round(i.offset().left)!==1,t.bBounding=n[0].getBoundingClientRect().width?!0:!1,n.remove()}function H(e,t,r,i,s,o){var u=i,a,f=!1;r!==n&&(a=r,f=!0);while(u!==s){if(!e.hasOwnProperty(u))continue;a=f?t(a,e[u],u,e):e[u],f=!0,u+=o}return a}function B(e,n){var s=i.defaults.column,o=e.aoColumns.length,u=r.extend({},i.models.oColumn,s,{nTh:n?n:t.createElement("th"),sTitle:s.sTitle?s.sTitle:n?n.innerHTML:"",aDataSort:s.aDataSort?s.aDataSort:[o],mData:s.mData?s.mData:o,idx:o});e.aoColumns.push(u);var a=e.aoPreSearchCols;a[o]=r.extend({},i.models.oSearch,a[o]),j(e,o,r(n).data())}function j(e,t,s){var o=e.aoColumns[t],u=e.oClasses,a=r(o.nTh);if(!o.sWidthOrig){o.sWidthOrig=a.attr("width")||null;var f=(a.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);f&&(o.sWidthOrig=f[1])}s!==n&&s!==null&&(D(s),A(i.defaults.column,s),s.mDataProp!==n&&!s.mData&&(s.mData=s.mDataProp),s.sType&&(o._sManualType=s.sType),s.className&&!s.sClass&&(s.sClass=s.className),r.extend(o,s),pn(o,s,"sWidth","sWidthOrig"),s.iDataSort!==n&&(o.aDataSort=[s.iDataSort]),pn(o,s,"aDataSort"));var l=o.mData,c=et(l),h=o.mRender?et(o.mRender):null,p=function(e){return typeof e=="string"&&e.indexOf("@")!==-1};o._bAttrSrc=r.isPlainObject(l)&&(p(l.sort)||p(l.type)||p(l.filter)),o.fnGetData=function(e,t,r){var i=c(e,t,n,r);return h&&t?h(i,t,e,r):i},o.fnSetData=function(e,t,n){return tt(l)(e,t,n)},typeof l!="number"&&(e._rowReadObject=!0),e.oFeatures.bSort||(o.bSortable=!1,a.addClass(u.sSortableNone));var d=r.inArray("asc",o.asSorting)!==-1,v=r.inArray("desc",o.asSorting)!==-1;!o.bSortable||!d&&!v?(o.sSortingClass=u.sSortableNone,o.sSortingClassJUI=""):d&&!v?(o.sSortingClass=u.sSortableAsc,o.sSortingClassJUI=u.sSortJUIAscAllowed):!d&&v?(o.sSortingClass=u.sSortableDesc,o.sSortingClassJUI=u.sSortJUIDescAllowed):(o.sSortingClass=u.sSortable,o.sSortingClassJUI=u.sSortJUI)}function F(e){if(e.oFeatures.bAutoWidth!==!1){var t=e.aoColumns;Jt(e);for(var n=0,r=t.length;n<r;n++)t[n].nTh.style.width=t[n].sWidth}var i=e.oScroll;(i.sY!==""||i.sX!=="")&&Xt(e),gn(e,null,"column-sizing",[e])}function I(e,t){var n=U(e,"bVisible");return typeof n[t]=="number"?n[t]:null}function q(e,t){var n=U(e,"bVisible"),i=r.inArray(t,n);return i!==-1?i:null}function R(e){return U(e,"bVisible").length}function U(e,t){var n=[];return r.map(e.aoColumns,function(e,r){e[t]&&n.push(r)}),n}function z(e){var t=e.aoColumns,r=e.aoData,s=i.ext.type.detect,o,u,a,f,l,c,h,p,d,v;for(o=0,u=t.length;o<u;o++){h=t[o],v=[];if(!h.sType&&h._sManualType)h.sType=h._sManualType;else if(!h.sType){for(a=0,f=s.length;a<f;a++){for(l=0,c=r.length;l<c;l++){v[l]===n&&(v[l]=K(e,l,o,"type")),d=s[a](v[l],e);if(!d&&a!==s.length-1)break;if(d==="html")break}if(d){h.sType=d;break}}h.sType||(h.sType="string")}}}function W(e,t,i,s){var o,u,a,f,l,c,h,p=e.aoColumns;if(t)for(o=t.length-1;o>=0;o--){h=t[o];var d=h.targets!==n?h.targets:h.aTargets;r.isArray(d)||(d=[d]);for(a=0,f=d.length;a<f;a++)if(typeof d[a]=="number"&&d[a]>=0){while(p.length<=d[a])B(e);s(d[a],h)}else if(typeof d[a]=="number"&&d[a]<0)s(p.length+d[a],h);else if(typeof d[a]=="string")for(l=0,c=p.length;l<c;l++)(d[a]=="_all"||r(p[l].nTh).hasClass(d[a]))&&s(l,h)}if(i)for(o=0,u=i.length;o<u;o++)s(o,i[o])}function X(e,t,s,o){var u=e.aoData.length,a=r.extend(!0,{},i.models.oRow,{src:s?"dom":"data",idx:u});a._aData=t,e.aoData.push(a);var f,l,c=e.aoColumns;for(var h=0,p=c.length;h<p;h++)s&&Q(e,u,h,K(e,u,h)),c[h].sType=null;e.aiDisplayMaster.push(u);var d=e.rowIdFn(t);return d!==n&&(e.aIds[d]=a),(s||!e.oFeatures.bDeferRender)&&ut(e,u,s,o),u}function V(e,t){var n;return t instanceof r||(t=r(t)),t.map(function(t,r){return n=ot(e,r),X(e,n.data,r,n.cells)})}function $(e,t){return t._DT_RowIndex!==n?t._DT_RowIndex:null}function J(e,t,n){return r.inArray(n,e.aoData[t].anCells)}function K(e,t,r,i){var s=e.iDraw,o=e.aoColumns[r],u=e.aoData[t]._aData,a=o.sDefaultContent,f=o.fnGetData(u,i,{settings:e,row:t,col:r});if(f===n)return e.iDrawError!=s&&a===null&&(hn(e,0,"Requested unknown parameter "+(typeof o.mData=="function"?"{function}":"'"+o.mData+"'")+" for row "+t,4),e.iDrawError=s),a;if(f!==u&&f!==null||a===null){if(typeof f=="function")return f.call(u)}else f=a;return f===null&&i=="display"?"":f}function Q(e,t,n,r){var i=e.aoColumns[n],s=e.aoData[t]._aData;i.fnSetData(s,r,{settings:e,row:t,col:n})}function Z(e){return r.map(e.match(/(\\.|[^\.])+/g)||[""],function(e){return e.replace(/\\./g,".")})}function et(e){if(r.isPlainObject(e)){var t={};return r.each(e,function(e,n){n&&(t[e]=et(n))}),function(e,r,i,s){var o=t[r]||t._;return o!==n?o(e,r,i,s):e}}if(e===null)return function(e){return e};if(typeof e=="function")return function(t,n,r,i){return e(t,n,r,i)};if(typeof e!="string"||e.indexOf(".")===-1&&e.indexOf("[")===-1&&e.indexOf("(")===-1)return function(t,n){return t[e]};var i=function(e,t,r){var s,o,u,a;if(r!==""){var f=Z(r);for(var l=0,c=f.length;l<c;l++){s=f[l].match(G),o=f[l].match(Y);if(s){f[l]=f[l].replace(G,""),f[l]!==""&&(e=e[f[l]]),u=[],f.splice(0,l+1),a=f.join(".");for(var h=0,p=e.length;h<p;h++)u.push(i(e[h],t,a));var d=s[0].substring(1,s[0].length-1);e=d===""?u:u.join(d);break}if(o){f[l]=f[l].replace(Y,""),e=e[f[l]]();continue}if(e===null||e[f[l]]===n)return n;e=e[f[l]]}}return e};return function(t,n){return i(t,n,e)}}function tt(e){if(r.isPlainObject(e))return tt(e._);if(e===null)return function(){};if(typeof e=="function")return function(t,n,r){e(t,"set",n,r)};if(typeof e!="string"||e.indexOf(".")===-1&&e.indexOf("[")===-1&&e.indexOf("(")===-1)return function(t,n){t[e]=n};var t=function(e,r,i){var s=Z(i),o,u=s[s.length-1],a,f,l,c;for(var h=0,p=s.length-1;h<p;h++){a=s[h].match(G),f=s[h].match(Y);if(a){s[h]=s[h].replace(G,""),e[s[h]]=[],o=s.slice(),o.splice(0,h+1),c=o.join(".");for(var d=0,v=r.length;d<v;d++)l={},t(l,r[d],c),e[s[h]].push(l);return}f&&(s[h]=s[h].replace(Y,""),e=e[s[h]](r));if(e[s[h]]===null||e[s[h]]===n)e[s[h]]={};e=e[s[h]]}u.match(Y)?e=e[u.replace(Y,"")](r):e[u.replace(G,"")]=r};return function(n,r){return t(n,r,e)}}function nt(e){return S(e.aoData,"_aData")}function rt(e){e.aoData.length=0,e.aiDisplayMaster.length=0,e.aiDisplay.length=0}function it(e,t,r){var i=-1;for(var s=0,o=e.length;s<o;s++)e[s]==t?i=s:e[s]>t&&e[s]--;i!=-1&&r===n&&e.splice(i,1)}function st(e,t,r,i){var s=e.aoData[t],o,u,a=function(n,r){while(n.childNodes.length)n.removeChild(n.firstChild);n.innerHTML=K(e,t,r,"display")};if(r==="dom"||(!r||r==="auto")&&s.src==="dom")s._aData=ot(e,s,i,i===n?n:s._aData).data;else{var f=s.anCells;if(f)if(i!==n)a(f[i],i);else for(o=0,u=f.length;o<u;o++)a(f[o],o)}s._aSortData=null,s._aFilterData=null;var l=e.aoColumns;if(i!==n)l[i].sType=null;else{for(o=0,u=l.length;o<u;o++)l[o].sType=null;at(e,s)}}function ot(e,t,i,s){var o=[],u=t.firstChild,a,f,l,c=0,h,p=e.aoColumns,d=e._rowReadObject;s=s||d?{}:[];var v=function(e,t){if(typeof e=="string"){var n=e.indexOf("@");if(n!==-1){var r=e.substring(n+1),i=tt(e);i(s,t.getAttribute(r))}}},m=function(e){if(i===n||i===c){f=p[c],h=r.trim(e.innerHTML);if(f&&f._bAttrSrc){var t=tt(f.mData._);t(s,h),v(f.mData.sort,e),v(f.mData.type,e),v(f.mData.filter,e)}else d?(f._setter||(f._setter=tt(f.mData)),f._setter(s,h)):s[c]=h}c++};if(u)while(u){a=u.nodeName.toUpperCase();if(a=="TD"||a=="TH")m(u),o.push(u);u=u.nextSibling}else{o=t.anCells;for(var g=0,y=o.length;g<y;g++)m(o[g])}var b=t.getAttribute("id");return b&&tt(e.rowId)(s,b),{data:s,cells:o}}function ut(e,n,r,i){var s=e.aoData[n],o=s._aData,u=[],a,f,l,c,h;if(s.nTr===null){a=r||t.createElement("tr"),s.nTr=a,s.anCells=u,a._DT_RowIndex=n,at(e,s);for(c=0,h=e.aoColumns.length;c<h;c++){l=e.aoColumns[c],f=r?i[c]:t.createElement(l.sCellType),u.push(f);if(!r||l.mRender||l.mData!==c)f.innerHTML=K(e,n,c,"display");l.sClass&&(f.className+=" "+l.sClass),l.bVisible&&!r?a.appendChild(f):!l.bVisible&&r&&f.parentNode.removeChild(f),l.fnCreatedCell&&l.fnCreatedCell.call(e.oInstance,f,K(e,n,c),o,n,c)}gn(e,"aoRowCreatedCallback",null,[a,o,n])}s.nTr.setAttribute("role","row")}function at(e,t){var n=t.nTr,i=t._aData;if(n){var s=e.rowIdFn(i);s&&(n.id=s);if(i.DT_RowClass){var o=i.DT_RowClass.split(" ");t.__rowc=t.__rowc?k(t.__rowc.concat(o)):o,r(n).removeClass(t.__rowc.join(" ")).addClass(i.DT_RowClass)}i.DT_RowAttr&&r(n).attr(i.DT_RowAttr),i.DT_RowData&&r(n).data(i.DT_RowData)}}function ft(e){var t,n,i,s,o,u=e.nTHead,a=e.nTFoot,f=r("th, td",u).length===0,l=e.oClasses,c=e.aoColumns;f&&(s=r("<tr/>").appendTo(u));for(t=0,n=c.length;t<n;t++)o=c[t],i=r(o.nTh).addClass(o.sClass),f&&i.appendTo(s),e.oFeatures.bSort&&(i.addClass(o.sSortingClass),o.bSortable!==!1&&(i.attr("tabindex",e.iTabIndex).attr("aria-controls",e.sTableId),on(e,o.nTh,t))),o.sTitle!=i[0].innerHTML&&i.html(o.sTitle),bn(e,"header")(e,i,o,l);f&&dt(e.aoHeader,u),r(u).find(">tr").attr("role","row"),r(u).find(">tr>th, >tr>td").addClass(l.sHeaderTH),r(a).find(">tr>th, >tr>td").addClass(l.sFooterTH);if(a!==null){var h=e.aoFooter[0];for(t=0,n=h.length;t<n;t++)o=c[t],o.nTf=h[t].cell,o.sClass&&r(o.nTf).addClass(o.sClass)}}function lt(e,t,i){var s,o,u,a,f,l,c,h,p=[],d=[],v=e.aoColumns.length,m,g;if(!t)return;i===n&&(i=!1);for(s=0,o=t.length;s<o;s++){p[s]=t[s].slice(),p[s].nTr=t[s].nTr;for(u=v-1;u>=0;u--)!e.aoColumns[u].bVisible&&!i&&p[s].splice(u,1);d.push([])}for(s=0,o=p.length;s<o;s++){h=p[s].nTr;if(h)while(c=h.firstChild)h.removeChild(c);for(u=0,a=p[s].length;u<a;u++){m=1,g=1;if(d[s][u]===n){h.appendChild(p[s][u].cell),d[s][u]=1;while(p[s+m]!==n&&p[s][u].cell==p[s+m][u].cell)d[s+m][u]=1,m++;while(p[s][u+g]!==n&&p[s][u].cell==p[s][u+g].cell){for(f=0;f<m;f++)d[s+f][u+g]=1;g++}r(p[s][u].cell).attr("rowspan",m).attr("colspan",g)}}}}function ct(e){var t=gn(e,"aoPreDrawCallback","preDraw",[e]);if(r.inArray(!1,t)!==-1){zt(e,!1);return}var i,s,o,u=[],a=0,f=e.asStripeClasses,l=f.length,c=e.aoOpenRows.length,h=e.oLanguage,p=e.iInitDisplayStart,d=wn(e)=="ssp",v=e.aiDisplay;e.bDrawing=!0,p!==n&&p!==-1&&(e._iDisplayStart=d?p:p>=e.fnRecordsDisplay()?0:p,e.iInitDisplayStart=-1);var m=e._iDisplayStart,g=e.fnDisplayEnd();if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++,zt(e,!1);else if(!d)e.iDraw++;else if(!e.bDestroying&&!gt(e))return;if(v.length!==0){var y=d?0:m,b=d?e.aoData.length:g;for(var w=y;w<b;w++){var E=v[w],S=e.aoData[E];S.nTr===null&&ut(e,E);var x=S.nTr;if(l!==0){var T=f[a%l];S._sRowStripe!=T&&(r(x).removeClass(S._sRowStripe).addClass(T),S._sRowStripe=T)}gn(e,"aoRowCallback",null,[x,S._aData,a,w]),u.push(x),a++}}else{var N=h.sZeroRecords;e.iDraw==1&&wn(e)=="ajax"?N=h.sLoadingRecords:h.sEmptyTable&&e.fnRecordsTotal()===0&&(N=h.sEmptyTable),u[0]=r("<tr/>",{"class":l?f[0]:""}).append(r("<td />",{valign:"top",colSpan:R(e),"class":e.oClasses.sRowEmpty}).html(N))[0]}gn(e,"aoHeaderCallback","header",[r(e.nTHead).children("tr")[0],nt(e),m,g,v]),gn(e,"aoFooterCallback","footer",[r(e.nTFoot).children("tr")[0],nt(e),m,g,v]);var C=r(e.nTBody);C.children().detach(),C.append(r(u)),gn(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1}function ht(e,t){var n=e.oFeatures,r=n.bSort,i=n.bFilter;r&&nn(e),i?St(e,e.oPreviousSearch):e.aiDisplay=e.aiDisplayMaster.slice(),t!==!0&&(e._iDisplayStart=0),e._drawHold=t,ct(e),e._drawHold=!1}function pt(e){var t=e.oClasses,n=r(e.nTable),s=r("<div/>").insertBefore(n),o=e.oFeatures,u=r("<div/>",{id:e.sTableId+"_wrapper","class":t.sWrapper+(e.nTFoot?"":" "+t.sNoFooter)});e.nHolding=s[0],e.nTableWrapper=u[0],e.nTableReinsertBefore=e.nTable.nextSibling;var a=e.sDom.split(""),f,l,c,h,p,d;for(var v=0;v<a.length;v++){f=null,l=a[v];if(l=="<"){c=r("<div/>")[0],h=a[v+1];if(h=="'"||h=='"'){p="",d=2;while(a[v+d]!=h)p+=a[v+d],d++;p=="H"?p=t.sJUIHeader:p=="F"&&(p=t.sJUIFooter);if(p.indexOf(".")!=-1){var m=p.split(".");c.id=m[0].substr(1,m[0].length-1),c.className=m[1]}else p.charAt(0)=="#"?c.id=p.substr(1,p.length-1):c.className=p;v+=d}u.append(c),u=r(c)}else if(l==">")u=u.parent();else if(l=="l"&&o.bPaginate&&o.bLengthChange)f=It(e);else if(l=="f"&&o.bFilter)f=Et(e);else if(l=="r"&&o.bProcessing)f=Ut(e);else if(l=="t")f=Wt(e);else if(l=="i"&&o.bInfo)f=Dt(e);else if(l=="p"&&o.bPaginate)f=qt(e);else if(i.ext.feature.length!==0){var g=i.ext.feature;for(var y=0,b=g.length;y<b;y++)if(l==g[y].cFeature){f=g[y].fnInit(e);break}}if(f){var w=e.aanFeatures;w[l]||(w[l]=[]),w[l].push(f),u.append(f)}}s.replaceWith(u),e.nHolding=null}function dt(e,t){var n=r(t).children("tr"),i,s,o,u,a,f,l,c,h,p,d,v,m=function(e,t,n){var r=e[t];while(r[n])n++;return n};e.splice(0,e.length);for(o=0,f=n.length;o<f;o++)e.push([]);for(o=0,f=n.length;o<f;o++){i=n[o],h=0,s=i.firstChild;while(s){if(s.nodeName.toUpperCase()=="TD"||s.nodeName.toUpperCase()=="TH"){p=s.getAttribute("colspan")*1,d=s.getAttribute("rowspan")*1,p=!p||p===0||p===1?1:p,d=!d||d===0||d===1?1:d,c=m(e,o,h),v=p===1?!0:!1;for(a=0;a<p;a++)for(u=0;u<d;u++)e[o+u][c+a]={cell:s,unique:v},e[o+u].nTr=i}s=s.nextSibling}}}function vt(e,t,n){var r=[];n||(n=e.aoHeader,t&&(n=[],dt(n,t)));for(var i=0,s=n.length;i<s;i++)for(var o=0,u=n[i].length;o<u;o++)n[i][o].unique&&(!r[o]||!e.bSortCellsTop)&&(r[o]=n[i][o].cell);return r}function mt(e,t,n){gn(e,"aoServerParams","serverParams",[t]);if(t&&r.isArray(t)){var i={},s=/(.*?)\[\]$/;r.each(t,function(e,t){var n=t.name.match(s);if(n){var r=n[0];i[r]||(i[r]=[]),i[r].push(t.value)}else i[t.name]=t.value}),t=i}var o,u=e.ajax,a=e.oInstance,f=function(t){gn(e,null,"xhr",[e,t,e.jqXHR]),n(t)};if(r.isPlainObject(u)&&u.data){o=u.data;var l=r.isFunction(o)?o(t,e):o;t=r.isFunction(o)&&l?l:r.extend(!0,t,l),delete u.data}var c={data:t,success:function(t){var n=t.error||t.sError;n&&hn(e,0,n),e.json=t,f(t)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(t,n,i){var s=gn(e,null,"xhr",[e,null,e.jqXHR]);r.inArray(!0,s)===-1&&(n=="parsererror"?hn(e,0,"Invalid JSON response",1):t.readyState===4&&hn(e,0,"Ajax error",7)),zt(e,!1)}};e.oAjaxData=t,gn(e,null,"preXhr",[e,t]),e.fnServerData?e.fnServerData.call(a,e.sAjaxSource,r.map(t,function(e,t){return{name:t,value:e}}),f,e):e.sAjaxSource||typeof u=="string"?e.jqXHR=r.ajax(r.extend(c,{url:u||e.sAjaxSource})):r.isFunction(u)?e.jqXHR=u.call(a,t,f,e):(e.jqXHR=r.ajax(r.extend(c,u)),u.data=o)}function gt(e){return e.bAjaxDataGet?(e.iDraw++,zt(e,!0),mt(e,yt(e),function(t){bt(e,t)}),!1):!0}function yt(e){var t=e.aoColumns,n=t.length,s=e.oFeatures,o=e.oPreviousSearch,u=e.aoPreSearchCols,a,f=[],l,c,h,p=tn(e),d=e._iDisplayStart,v=s.bPaginate!==!1?e._iDisplayLength:-1,m=function(e,t){f.push({name:e,value:t})};m("sEcho",e.iDraw),m("iColumns",n),m("sColumns",S(t,"sName").join(",")),m("iDisplayStart",d),m("iDisplayLength",v);var g={draw:e.iDraw,columns:[],order:[],start:d,length:v,search:{value:o.sSearch,regex:o.bRegex}};for(a=0;a<n;a++)c=t[a],h=u[a],l=typeof c.mData=="function"?"function":c.mData,g.columns.push({data:l,name:c.sName,searchable:c.bSearchable,orderable:c.bSortable,search:{value:h.sSearch,regex:h.bRegex}}),m("mDataProp_"+a,l),s.bFilter&&(m("sSearch_"+a,h.sSearch),m("bRegex_"+a,h.bRegex),m("bSearchable_"+a,c.bSearchable)),s.bSort&&m("bSortable_"+a,c.bSortable);s.bFilter&&(m("sSearch",o.sSearch),m("bRegex",o.bRegex)),s.bSort&&(r.each(p,function(e,t){g.order.push({column:t.col,dir:t.dir}),m("iSortCol_"+e,t.col),m("sSortDir_"+e,t.dir)}),m("iSortingCols",p.length));var y=i.ext.legacy.ajax;return y===null?e.sAjaxSource?f:g:y?f:g}function bt(e,t){var r=function(e,r){return t[e]!==n?t[e]:t[r]},i=wt(e,t),s=r("sEcho","draw"),o=r("iTotalRecords","recordsTotal"),u=r("iTotalDisplayRecords","recordsFiltered");if(s){if(s*1<e.iDraw)return;e.iDraw=s*1}rt(e),e._iRecordsTotal=parseInt(o,10),e._iRecordsDisplay=parseInt(u,10);for(var a=0,f=i.length;a<f;a++)X(e,i[a]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,ct(e),e._bInitComplete||jt(e,t),e.bAjaxDataGet=!0,zt(e,!1)}function wt(e,t){var i=r.isPlainObject(e.ajax)&&e.ajax.dataSrc!==n?e.ajax.dataSrc:e.sAjaxDataProp;return i==="data"?t.aaData||t[i]:i!==""?et(i)(t):t}function Et(e){var n=e.oClasses,i=e.sTableId,s=e.oLanguage,o=e.oPreviousSearch,u=e.aanFeatures,a='<input type="search" class="'+n.sFilterInput+'"/>',f=s.sSearch;f=f.match(/_INPUT_/)?f.replace("_INPUT_",a):f+a;var l=r("<div/>",{id:u.f?null:i+"_filter","class":n.sFilter}).append(r("<label/>").append(f)),c=function(){var t=u.f,n=this.value?this.value:"";n!=o.sSearch&&(St(e,{sSearch:n,bRegex:o.bRegex,bSmart:o.bSmart,bCaseInsensitive:o.bCaseInsensitive}),e._iDisplayStart=0,ct(e))},h=e.searchDelay!==null?e.searchDelay:wn(e)==="ssp"?400:0,p=r("input",l).val(o.sSearch).attr("placeholder",s.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",h?Kt(c,h):c).bind("keypress.DT",function(e){if(e.keyCode==13)return!1}).attr("aria-controls",i);return r(e.nTable).on("search.dt.DT",function(n,r){if(e===r)try{p[0]!==t.activeElement&&p.val(o.sSearch)}catch(i){}}),l[0]}function St(e,t,r){var i=e.oPreviousSearch,s=e.aoPreSearchCols,o=function(e){i.sSearch=e.sSearch,i.bRegex=e.bRegex,i.bSmart=e.bSmart,i.bCaseInsensitive=e.bCaseInsensitive},u=function(e){return e.bEscapeRegex!==n?!e.bEscapeRegex:e.bRegex};z(e);if(wn(e)!="ssp"){Nt(e,t.sSearch,r,u(t),t.bSmart,t.bCaseInsensitive),o(t);for(var a=0;a<s.length;a++)Tt(e,s[a].sSearch,a,u(s[a]),s[a].bSmart,s[a].bCaseInsensitive);xt(e)}else o(t);e.bFiltered=!0,gn(e,null,"search",[e])}function xt(e){var t=i.ext.search,n=e.aiDisplay,r,s;for(var o=0,u=t.length;o<u;o++){var a=[];for(var f=0,l=n.length;f<l;f++)s=n[f],r=e.aoData[s],t[o](e,r._aFilterData,s,r._aData,f)&&a.push(s);n.length=0,n.push.apply(n,a)}}function Tt(e,t,n,r,i,s){if(t==="")return;var o,u=e.aiDisplay,a=Ct(t,r,i,s);for(var f=u.length-1;f>=0;f--)o=e.aoData[u[f]]._aFilterData[n],a.test(o)||u.splice(f,1)}function Nt(e,t,n,r,s,o){var u=Ct(t,r,s,o),a=e.oPreviousSearch.sSearch,f=e.aiDisplayMaster,l,c,h;i.ext.search.length!==0&&(n=!0),c=Ot(e);if(t.length<=0)e.aiDisplay=f.slice();else{if(c||n||a.length>t.length||t.indexOf(a)!==0||e.bSorted)e.aiDisplay=f.slice();l=e.aiDisplay;for(h=l.length-1;h>=0;h--)u.test(e.aoData[l[h]]._sFilterRow)||l.splice(h,1)}}function Ct(e,t,n,i){e=t?e:kt(e);if(n){var s=r.map(e.match(/"[^"]+"|[^ ]+/g)||[""],function(e){if(e.charAt(0)==='"'){var t=e.match(/^"(.*)"$/);e=t?t[1]:e}return e.replace('"',"")});e="^(?=.*?"+s.join(")(?=.*?")+").*$"}return new RegExp(e,i?"i":"")}function kt(e){return e.replace(d,"\\$1")}function Ot(e){var t=e.aoColumns,n,r,s,o,u,a,f,l,c=i.ext.type.search,h=!1;for(r=0,o=e.aoData.length;r<o;r++){l=e.aoData[r];if(!l._aFilterData){a=[];for(s=0,u=t.length;s<u;s++)n=t[s],n.bSearchable?(f=K(e,r,s,"filter"),c[n.sType]&&(f=c[n.sType](f)),f===null&&(f=""),typeof f!="string"&&f.toString&&(f=f.toString())):f="",f.indexOf&&f.indexOf("&")!==-1&&(Lt.innerHTML=f,f=At?Lt.textContent:Lt.innerText),f.replace&&(f=f.replace(/[\r\n]/g,"")),a.push(f);l._aFilterData=a,l._sFilterRow=a.join("  "),h=!0}}return h}function Mt(e){return{search:e.sSearch,smart:e.bSmart,regex:e.bRegex,caseInsensitive:e.bCaseInsensitive}}function _t(e){return{sSearch:e.search,bSmart:e.smart,bRegex:e.regex,bCaseInsensitive:e.caseInsensitive}}function Dt(e){var t=e.sTableId,n=e.aanFeatures.i,i=r("<div/>",{"class":e.oClasses.sInfo,id:n?null:t+"_info"});return n||(e.aoDrawCallback.push({fn:Pt,sName:"information"}),i.attr("role","status").attr("aria-live","polite"),r(e.nTable).attr("aria-describedby",t+"_info")),i[0]}function Pt(e){var t=e.aanFeatures.i;if(t.length===0)return;var n=e.oLanguage,i=e._iDisplayStart+1,s=e.fnDisplayEnd(),o=e.fnRecordsTotal(),u=e.fnRecordsDisplay(),a=u?n.sInfo:n.sInfoEmpty;u!==o&&(a+=" "+n.sInfoFiltered),a+=n.sInfoPostFix,a=Ht(e,a);var f=n.fnInfoCallback;f!==null&&(a=f.call(e.oInstance,e,i,s,o,u,a)),r(t).html(a)}function Ht(e,t){var n=e.fnFormatNumber,r=e._iDisplayStart+1,i=e._iDisplayLength,s=e.fnRecordsDisplay(),o=i===-1;return t.replace(/_START_/g,n.call(e,r)).replace(/_END_/g,n.call(e,e.fnDisplayEnd())).replace(/_MAX_/g,n.call(e,e.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(e,s)).replace(/_PAGE_/g,n.call(e,o?1:Math.ceil(r/i))).replace(/_PAGES_/g,n.call(e,o?1:Math.ceil(s/i)))}function Bt(e){var t,n,r=e.iInitDisplayStart,i=e.aoColumns,s,o=e.oFeatures,u=e.bDeferLoading;if(!e.bInitialised){setTimeout(function(){Bt(e)},200);return}pt(e),ft(e),lt(e,e.aoHeader),lt(e,e.aoFooter),zt(e,!0),o.bAutoWidth&&Jt(e);for(t=0,n=i.length;t<n;t++)s=i[t],s.sWidth&&(s.nTh.style.width=Zt(s.sWidth));gn(e,null,"preInit",[e]),ht(e);var a=wn(e);if(a!="ssp"||u)a=="ajax"?mt(e,[],function(n){var i=wt(e,n);for(t=0;t<i.length;t++)X(e,i[t]);e.iInitDisplayStart=r,ht(e),zt(e,!1),jt(e,n)},e):(zt(e,!1),jt(e))}function jt(e,t){e._bInitComplete=!0,(t||e.oInit.aaData)&&F(e),gn(e,"aoInitComplete","init",[e,t])}function Ft(e,t){var n=parseInt(t,10);e._iDisplayLength=n,yn(e),gn(e,null,"length",[e,n])}function It(e){var t=e.oClasses,n=e.sTableId,i=e.aLengthMenu,s=r.isArray(i[0]),o=s?i[0]:i,u=s?i[1]:i,a=r("<select/>",{name:n+"_length","aria-controls":n,"class":t.sLengthSelect});for(var f=0,l=o.length;f<l;f++)a[0][f]=new Option(u[f],o[f]);var c=r("<div><label/></div>").addClass(t.sLength);return e.aanFeatures.l||(c[0].id=n+"_length"),c.children().append(e.oLanguage.sLengthMenu.replace("_MENU_",a[0].outerHTML)),r("select",c).val(e._iDisplayLength).bind("change.DT",function(t){Ft(e,r(this).val()),ct(e)}),r(e.nTable).bind("length.dt.DT",function(t,n,i){e===n&&r("select",c).val(i)}),c[0]}function qt(e){var t=e.sPaginationType,n=i.ext.pager[t],s=typeof n=="function",o=function(e){ct(e)},u=r("<div/>").addClass(e.oClasses.sPaging+t)[0],a=e.aanFeatures;return s||n.fnInit(e,u,o),console.log(e,"setting"),a.p||(u.id=e.sTableId+"_paginate",e.aoDrawCallback.push({fn:function(e){if(s){var t=e._iDisplayStart,r=e._iDisplayLength,i=e.fnRecordsDisplay(),u=r===-1,f=u?0:Math.ceil(t/r),l=u?1:Math.ceil(i/r),c=n(f,l),h,p;for(h=0,p=a.p.length;h<p;h++)bn(e,"pageButton")(e,a.p[h],h,c,f,l)}else n.fnUpdate(e,o)},sName:"pagination"})),u}function Rt(e,t,n){var r=e._iDisplayStart,i=e._iDisplayLength,s=e.fnRecordsDisplay();s===0||i===-1?r=0:typeof t=="number"?(r=t*i,r>s&&(r=0)):t=="first"?r=0:t=="previous"?(r=i>=0?r-i:0,r<0&&(r=0)):t=="next"?r+i<s&&(r+=i):t=="last"?r=Math.floor((s-1)/i)*i:hn(e,0,"Unknown paging action: "+t,5);var o=e._iDisplayStart!==r;return e._iDisplayStart=r,o&&(gn(e,null,"page",[e]),n&&ct(e)),o}function Ut(e){return r("<div/>",{id:e.aanFeatures.r?null:e.sTableId+"_processing","class":e.oClasses.sProcessing}).html(e.oLanguage.sProcessing).insertBefore(e.nTable)[0]}function zt(e,t){e.oFeatures.bProcessing&&r(e.aanFeatures.r).css("display",t?"block":"none"),gn(e,null,"processing",[e,t])}function Wt(e){var t=r(e.nTable);t.attr("role","grid");var n=e.oScroll;if(n.sX===""&&n.sY==="")return e.nTable;var i=n.sX,s=n.sY,o=e.oClasses,u=t.children("caption"),a=u.length?u[0]._captionSide:null,f=r(t[0].cloneNode(!1)),l=r(t[0].cloneNode(!1)),c=t.children("tfoot"),h="<div/>",p=function(e){return e?Zt(e):null};n.sX&&t.attr("width")==="100%"&&t.removeAttr("width"),c.length||(c=null);var d=r(h,{"class":o.sScrollWrapper}).append(r(h,{"class":o.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:i?p(i):"100%"}).append(r(h,{"class":o.sScrollHeadInner}).css({"box-sizing":"content-box",width:n.sXInner||"100%"}).append(f.removeAttr("id").css("margin-left",0).append(a==="top"?u:null).append(t.children("thead"))))).append(r(h,{"class":o.sScrollBody}).css({position:"relative",overflow:"auto",width:p(i)}).append(t));c&&d.append(r(h,{"class":o.sScrollFoot}).css({overflow:"hidden",border:0,width:i?p(i):"100%"}).append(r(h,{"class":o.sScrollFootInner}).append(l.removeAttr("id").css("margin-left",0).append(a==="bottom"?u:null).append(t.children("tfoot")))));var v=d.children(),m=v[0],g=v[1],y=c?v[2]:null;return i&&r(g).on("scroll.DT",function(e){var t=this.scrollLeft;m.scrollLeft=t,c&&(y.scrollLeft=t)}),r(g).css(s&&n.bCollapse?"max-height":"height",s),e.nScrollHead=m,e.nScrollBody=g,e.nScrollFoot=y,e.aoDrawCallback.push({fn:Xt,sName:"scrolling"}),d[0]}function Xt(e){var t=e.oScroll,n=t.sX,i=t.sXInner,s=t.sY,o=t.iBarWidth,u=r(e.nScrollHead),a=u[0].style,f=u.children("div"),l=f[0].style,c=f.children("table"),h=e.nScrollBody,p=r(h),d=h.style,v=r(e.nScrollFoot),m=v.children("div"),g=m.children("table"),y=r(e.nTHead),b=r(e.nTable),w=b[0],E=w.style,S=e.nTFoot?r(e.nTFoot):null,x=e.oBrowser,T=x.bScrollOversize,N,C,k,L,A,O,M=[],_=[],D=[],P,H,B,j=function(e){var t=e.style;t.paddingTop="0",t.paddingBottom="0",t.borderTopWidth="0",t.borderBottomWidth="0",t.height=0};b.children("thead, tfoot").remove(),A=y.clone().prependTo(b),N=y.find("tr"),k=A.find("tr"),A.find("th, td").removeAttr("tabindex"),S&&(O=S.clone().prependTo(b),C=S.find("tr"),L=O.find("tr")),n||(d.width="100%",u[0].style.width="100%"),r.each(vt(e,A),function(t,n){P=I(e,t),n.style.width=e.aoColumns[P].sWidth}),S&&Vt(function(e){e.style.width=""},L),B=b.outerWidth(),n===""?(E.width="100%",T&&(b.find("tbody").height()>h.offsetHeight||p.css("overflow-y")=="scroll")&&(E.width=Zt(b.outerWidth()-o)),B=b.outerWidth()):i!==""&&(E.width=Zt(i),B=b.outerWidth()),Vt(j,k),Vt(function(e){D.push(e.innerHTML),M.push(Zt(r(e).css("width")))},k),Vt(function(e,t){e.style.width=M[t]},N),r(k).height(0),S&&(Vt(j,L),Vt(function(e){_.push(Zt(r(e).css("width")))},L),Vt(function(e,t){e.style.width=_[t]},C),r(L).height(0)),Vt(function(e,t){e.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+D[t]+"</div>",e.style.width=M[t]},k),S&&Vt(function(e,t){e.innerHTML="",e.style.width=_[t]},L),b.outerWidth()<B?(H=h.scrollHeight>h.offsetHeight||p.css("overflow-y")=="scroll"?B+o:B,T&&(h.scrollHeight>h.offsetHeight||p.css("overflow-y")=="scroll")&&(E.width=Zt(H-o)),(n===""||i!=="")&&hn(e,1,"Possible column misalignment",6)):H="100%",d.width=Zt(H),a.width=Zt(H),S&&(e.nScrollFoot.style.width=Zt(H)),s||T&&(d.height=Zt(w.offsetHeight+o));var F=b.outerWidth();c[0].style.width=Zt(F),l.width=Zt(F);var q=b.height()>h.clientHeight||p.css("overflow-y")=="scroll",R="padding"+(x.bScrollbarLeft?"Left":"Right");l[R]=q?o+"px":"0px",S&&(g[0].style.width=Zt(F),m[0].style.width=Zt(F),m[0].style[R]=q?o+"px":"0px"),p.scroll(),(e.bSorted||e.bFiltered)&&!e._drawHold&&(h.scrollTop=0)}function Vt(e,t,n){var r=0,i=0,s=t.length,o,u;while(i<s){o=t[i].firstChild,u=n?n[i].firstChild:null;while(o)o.nodeType===1&&(n?e(o,u,r):e(o,r),r++),o=o.nextSibling,u=n?u.nextSibling:null;i++}}function Jt(t){var n=t.nTable,i=t.aoColumns,s=t.oScroll,o=s.sY,u=s.sX,a=s.sXInner,f=i.length,l=U(t,"bVisible"),c=r("th",t.nTHead),h=n.getAttribute("width"),p=n.parentNode,d=!1,v,m,g,y,b,w=t.oBrowser,E=w.bScrollOversize,S=n.style.width;S&&S.indexOf("%")!==-1&&(h=S);for(v=0;v<l.length;v++)m=i[l[v]],m.sWidth!==null&&(m.sWidth=Qt(m.sWidthOrig,p),d=!0);if(E||!d&&!u&&!o&&f==R(t)&&f==c.length)for(v=0;v<f;v++)i[v].sWidth=Zt(c.eq(v).width());else{var x=r(n).clone().css("visibility","hidden").removeAttr("id");x.find("tbody tr").remove();var T=r("<tr/>").appendTo(x.find("tbody"));x.find("thead, tfoot").remove(),x.append(r(t.nTHead).clone()).append(r(t.nTFoot).clone()),x.find("tfoot th, tfoot td").css("width",""),c=vt(t,x.find("thead")[0]);for(v=0;v<l.length;v++)m=i[l[v]],c[v].style.width=m.sWidthOrig!==null&&m.sWidthOrig!==""?Zt(m.sWidthOrig):"";if(t.aoData.length)for(v=0;v<l.length;v++)g=l[v],m=i[g],r(Gt(t,g)).clone(!1).append(m.sContentPadding).appendTo(T);var N=r("<div/>").css(u||o?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(x).appendTo(p);u&&a?x.width(a):u?(x.css("width","auto"),x.width()<p.clientWidth&&x.width(p.clientWidth)):o?x.width(p.clientWidth):h&&x.width(h);if(u){var C=0;for(v=0;v<l.length;v++)m=i[l[v]],b=w.bBounding?c[v].getBoundingClientRect().width:r(c[v]).outerWidth(),C+=m.sWidthOrig===null?b:parseInt(m.sWidth,10)+b-r(c[v]).width();x.width(Zt(C)),n.style.width=Zt(C)}for(v=0;v<l.length;v++)m=i[l[v]],y=r(c[v]).width(),y&&(m.sWidth=Zt(y));n.style.width=Zt(x.css("width")),N.remove()}h&&(n.style.width=Zt(h));if((h||u)&&!t._reszEvt){var k=function(){r(e).bind("resize.DT-"+t.sInstance,Kt(function(){F(t)}))};E?setTimeout(k,1e3):k(),t._reszEvt=!0}}function Kt(e,t){var r=t!==n?t:200,i,s;return function(){var t=this,o=+(new Date),u=arguments;i&&o<i+r?(clearTimeout(s),s=setTimeout(function(){i=n,e.apply(t,u)},r)):(i=o,e.apply(t,u))}}function Qt(e,n){if(!e)return 0;var i=r("<div/>").css("width",Zt(e)).appendTo(n||t.body),s=i[0].offsetWidth;return i.remove(),s}function Gt(e,t){var n=Yt(e,t);if(n<0)return null;var i=e.aoData[n];return i.nTr?i.anCells[t]:r("<td/>").html(K(e,n,t,"display"))[0]}function Yt(e,t){var n,r=-1,i=-1;for(var s=0,o=e.aoData.length;s<o;s++)n=K(e,s,t,"display")+"",n=n.replace($t,""),n.length>r&&(r=n.length,i=s);return i}function Zt(e){return e===null?"0px":typeof e=="number"?e<0?"0px":e+"px":e.match(/\d$/)?e+"px":e}function en(){var e=i.__scrollbarWidth;if(e===n){var t=r("<p/>").css({position:"absolute",top:0,left:0,width:"100%",height:150,padding:0,overflow:"scroll",visibility:"hidden"}).appendTo("body");e=t[0].offsetWidth-t[0].clientWidth,i.__scrollbarWidth=e,t.remove()}return e}function tn(e){var t,s,o,u,a=[],f=[],l=e.aoColumns,c,h,p,d,v=e.aaSortingFixed,m=r.isPlainObject(v),g=[],y=function(e){e.length&&!r.isArray(e[0])?g.push(e):g.push.apply(g,e)};r.isArray(v)&&y(v),m&&v.pre&&y(v.pre),y(e.aaSorting),m&&v.post&&y(v.post);for(t=0;t<g.length;t++){d=g[t][0],c=l[d].aDataSort;for(o=0,u=c.length;o<u;o++)h=c[o],p=l[h].sType||"string",g[t]._idx===n&&(g[t]._idx=r.inArray(g[t][1],l[h].asSorting)),a.push({src:d,col:h,dir:g[t][1],index:g[t]._idx,type:p,formatter:i.ext.type.order[p+"-pre"]})}return a}function nn(e){var t,n,r,s,o,u,a,f,l,c=[],h=i.ext.type.order,p=e.aoData,d=e.aoColumns,v,m,g,y,b,w=0,E,S=e.aiDisplayMaster,x;z(e),x=tn(e);for(t=0,n=x.length;t<n;t++)E=x[t],E.formatter&&w++,an(e,E.col);if(wn(e)!="ssp"&&x.length!==0){for(t=0,r=S.length;t<r;t++)c[S[t]]=t;w===x.length?S.sort(function(e,t){var n,r,i,s,o,u=x.length,a=p[e]._aSortData,f=p[t]._aSortData;for(i=0;i<u;i++){o=x[i],n=a[o.col],r=f[o.col],s=n<r?-1:n>r?1:0;if(s!==0)return o.dir==="asc"?s:-s}return n=c[e],r=c[t],n<r?-1:n>r?1:0}):S.sort(function(e,t){var n,r,i,s,o,u,a,f=x.length,l=p[e]._aSortData,d=p[t]._aSortData;for(i=0;i<f;i++){u=x[i],n=l[u.col],r=d[u.col],a=h[u.type+"-"+u.dir]||h["string-"+u.dir],o=a(n,r);if(o!==0)return o}return n=c[e],r=c[t],n<r?-1:n>r?1:0})}e.bSorted=!0}function rn(e){var t,n,r=e.aoColumns,i=tn(e),s=e.oLanguage.oAria;for(var o=0,u=r.length;o<u;o++){var a=r[o],f=a.asSorting,l=a.sTitle.replace(/<.*?>/g,""),c=a.nTh;c.removeAttribute("aria-sort"),a.bSortable?(i.length>0&&i[0].col==o?(c.setAttribute("aria-sort",i[0].dir=="asc"?"ascending":"descending"),n=f[i[0].index+1]||f[0]):n=f[0],t=l+(n==="asc"?s.sSortAscending:s.sSortDescending)):t=l,c.setAttribute("aria-label",t)}}function sn(e,t,i,s){var o=e.aoColumns[t],u=e.aaSorting,a=o.asSorting,f,l=function(e,t){var i=e._idx;return i===n&&(i=r.inArray(e[1],a)),i+1<a.length?i+1:t?null:0};typeof u[0]=="number"&&(u=e.aaSorting=[u]);if(i&&e.oFeatures.bSortMulti){var c=r.inArray(t,S(u,"0"));c!==-1?(f=l(u[c],!0),f===null&&u.length===1&&(f=0),f===null?u.splice(c,1):(u[c][1]=a[f],u[c]._idx=f)):(u.push([t,a[0],0]),u[u.length-1]._idx=0)}else u.length&&u[0][0]==t?(f=l(u[0]),u.length=1,u[0][1]=a[f],u[0]._idx=f):(u.length=0,u.push([t,a[0]]),u[0]._idx=0);ht(e),typeof s=="function"&&s(e)}function on(e,t,n,r){var i=e.aoColumns[n];vn(t,{},function(t){if(i.bSortable===!1)return;e.oFeatures.bProcessing?(zt(e,!0),setTimeout(function(){sn(e,n,t.shiftKey,r),wn(e)!=="ssp"&&zt(e,!1)},0)):sn(e,n,t.shiftKey,r)})}function un(e){var t=e.aLastSort,n=e.oClasses.sSortColumn,i=tn(e),s=e.oFeatures,o,u,a;if(s.bSort&&s.bSortClasses){for(o=0,u=t.length;o<u;o++)a=t[o].src,r(S(e.aoData,"anCells",a)).removeClass(n+(o<2?o+1:3));for(o=0,u=i.length;o<u;o++)a=i[o].src,r(S(e.aoData,"anCells",a)).addClass(n+(o<2?o+1:3))}e.aLastSort=i}function an(e,t){var n=e.aoColumns[t],r=i.ext.order[n.sSortDataType],s;r&&(s=r.call(e.oInstance,e,t,q(e,t)));var o,u,a=i.ext.type.order[n.sType+"-pre"];for(var f=0,l=e.aoData.length;f<l;f++){o=e.aoData[f],o._aSortData||(o._aSortData=[]);if(!o._aSortData[t]||r)u=r?s[f]:K(e,f,t,"sort"),o._aSortData[t]=a?a(u):u}}function fn(e){if(!e.oFeatures.bStateSave||e.bDestroying)return;var t={time:+(new Date),start:e._iDisplayStart,length:e._iDisplayLength,order:r.extend(!0,[],e.aaSorting),search:Mt(e.oPreviousSearch),columns:r.map(e.aoColumns,function(t,n){return{visible:t.bVisible,search:Mt(e.aoPreSearchCols[n])}})};gn(e,"aoStateSaveParams","stateSaveParams",[e,t]),e.oSavedState=t,e.fnStateSaveCallback.call(e.oInstance,e,t)}function ln(e,t){var i,s,o=e.aoColumns;if(!e.oFeatures.bStateSave)return;var u=e.fnStateLoadCallback.call(e.oInstance,e);if(!u||!u.time)return;var a=gn(e,"aoStateLoadParams","stateLoadParams",[e,u]);if(r.inArray(!1,a)!==-1)return;var f=e.iStateDuration;if(f>0&&u.time<+(new Date)-f*1e3)return;if(o.length!==u.columns.length)return;e.oLoadedState=r.extend(!0,{},u),u.start!==n&&(e._iDisplayStart=u.start,e.iInitDisplayStart=u.start),u.length!==n&&(e._iDisplayLength=u.length),u.order!==n&&(e.aaSorting=[],r.each(u.order,function(t,n){e.aaSorting.push(n[0]>=o.length?[0,n[1]]:n)})),u.search!==n&&r.extend(e.oPreviousSearch,_t(u.search));for(i=0,s=u.columns.length;i<s;i++){var l=u.columns[i];l.visible!==n&&(o[i].bVisible=l.visible),l.search!==n&&r.extend(e.aoPreSearchCols[i],_t(l.search))}gn(e,"aoStateLoaded","stateLoaded",[e,u])}function cn(e){var t=i.settings,n=r.inArray(e,S(t,"nTable"));return n!==-1?t[n]:null}function hn(t,n,r,s){r="DataTables warning: "+(t?"table id="+t.sTableId+" - ":"")+r,s&&(r+=". For more information about this error, please see http://datatables.net/tn/"+s),n=!0;if(!n){var o=i.ext,u=o.sErrMode||o.errMode;t&&gn(t,null,"error",[t,s,r]);if(u=="alert")alert(r);else{if(u=="throw")throw new Error(r);typeof u=="function"&&u(t,s,r)}}else e.console&&console.log&&console.log(r)}function pn(e,t,i,s){if(r.isArray(i)){r.each(i,function(n,i){r.isArray(i)?pn(e,t,i[0],i[1]):pn(e,t,i)});return}s===n&&(s=i),t[i]!==n&&(e[s]=t[i])}function dn(e,t,n){var i;for(var s in t)t.hasOwnProperty(s)&&(i=t[s],r.isPlainObject(i)?(r.isPlainObject(e[s])||(e[s]={}),r.extend(!0,e[s],i)):n&&s!=="data"&&s!=="aaData"&&r.isArray(i)?e[s]=i.slice():e[s]=i);return e}function vn(e,t,n){r(e).bind("click.DT",t,function(t){e.blur(),n(t)}).bind("keypress.DT",t,function(e){e.which===13&&(e.preventDefault(),n(e))}).bind("selectstart.DT",function(){return!1})}function mn(e,t,n,r){n&&e[t].push({fn:n,sName:r})}function gn(e,t,n,i){var s=[];t&&(s=r.map(e[t].slice().reverse(),function(t,n){return t.fn.apply(e.oInstance,i)}));if(n!==null){var o=r.Event(n+".dt");r(e.nTable).trigger(o,i),s.push(o.result)}return s}function yn(e){var t=e._iDisplayStart,n=e.fnDisplayEnd(),r=e._iDisplayLength;t>=n&&(t=n-r),t-=t%r;if(r===-1||t<0)t=0;e._iDisplayStart=t}function bn(e,t){var n=e.renderer,s=i.ext.renderer[t];return r.isPlainObject(n)&&n[t]?s[n[t]]||s._:typeof n=="string"?s[n]||s._:s._}function wn(e){return e.oFeatures.bServerSide?"ssp":e.ajax||e.sAjaxSource?"ajax":"dom"}function Wn(e,t){var n=[],r=zn.numbers_length,i=Math.floor(r/2),s=1;return t<=r?n=T(0,t):e<=i?(n=T(0,r-2),n.push("ellipsis"),n.push(t-1)):e>=t-1-i?(n=T(t-(r-2),t),n.splice(0,0,"ellipsis"),n.splice(0,0,0)):(n=T(e-i+2,e+i-1),n.push("ellipsis"),n.push(t-1),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function Vn(e){r.each({num:function(t){return Xn(t,e)},"num-fmt":function(t){return Xn(t,e,v)},"html-num":function(t){return Xn(t,e,c)},"html-num-fmt":function(t){return Xn(t,e,c,v)}},function(t,n){s.type.order[t+e+"-pre"]=n,t.match(/^html\-/)&&(s.type.search[t+e]=s.type.search.html)})}function $n(e){return function(){var t=[cn(this[i.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return i.ext.internal[e].apply(this,t)}}var i,s,o,u,a,f={},l=/[\r\n]/g,c=/<.*?>/g,h=/^[\w\+\-]/,p=/[\w\+\-]$/,d=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),v=/[',$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,m=function(e){return!e||e===!0||e==="-"?!0:!1},g=function(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(e)?t:null},y=function(e,t){return f[t]||(f[t]=new RegExp(kt(t),"g")),typeof e=="string"&&t!=="."?e.replace(/\./g,"").replace(f[t],"."):e},b=function(e,t,n){var r=typeof e=="string";return m(e)?!0:(t&&r&&(e=y(e,t)),n&&r&&(e=e.replace(v,"")),!isNaN(parseFloat(e))&&isFinite(e))},w=function(e){return m(e)||typeof e=="string"},E=function(e,t,n){if(m(e))return!0;var r=w(e);return r?b(C(e),t,n)?!0:null:null},S=function(e,t,r){var i=[],s=0,o=e.length;if(r!==n)for(;s<o;s++)e[s]&&e[s][t]&&i.push(e[s][t][r]);else for(;s<o;s++)e[s]&&i.push(e[s][t]);return i},x=function(e,t,r,i){var s=[],o=0,u=t.length;if(i!==n)for(;o<u;o++)e[t[o]][r]&&s.push(e[t[o]][r][i]);else for(;o<u;o++)s.push(e[t[o]][r]);return s},T=function(e,t){var r=[],i;t===n?(t=0,i=e):(i=t,t=e);for(var s=t;s<i;s++)r.push(s);return r},N=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n]&&t.push(e[n]);return t},C=function(e){return e.replace(c,"")},k=function(e){var t=[],n,r,i=e.length,s,o=0;e:for(r=0;r<i;r++){n=e[r];for(s=0;s<o;s++)if(t[s]===n)continue e;t.push(n),o++}return t},M=function(e,t,r){e[t]!==n&&(e[r]=e[t])},G=/\[.*?\]$/,Y=/\(\)$/,Lt=r("<div>")[0],At=Lt.textContent!==n,$t=/<.*?>/g;i=function(e){this.$=function(e,t){return this.api(!0).$(e,t)},this._=function(e,t){return this.api(!0).rows(e,t).data()},this.api=function(e){return e?new o(cn(this[s.iApiIndex])):new o(this)},this.fnAddData=function(e,t){var i=this.api(!0),s=r.isArray(e)&&(r.isArray(e[0])||r.isPlainObject(e[0]))?i.rows.add(e):i.row.add(e);return(t===n||t)&&i.draw(),s.flatten().toArray()},this.fnAdjustColumnSizing=function(e){var t=this.api(!0).columns.adjust(),r=t.settings()[0],i=r.oScroll;e===n||e?t.draw(!1):(i.sX!==""||i.sY!=="")&&Xt(r)},this.fnClearTable=function(e){var t=this.api(!0).clear();(e===n||e)&&t.draw()},this.fnClose=function(e){this.api(!0).row(e).child.hide()},this.fnDeleteRow=function(e,t,r){var i=this.api(!0),s=i.rows(e),o=s.settings()[0],u=o.aoData[s[0][0]];return s.remove(),t&&t.call(this,o,u),(r===n||r)&&i.draw(),u},this.fnDestroy=function(e){this.api(!0).destroy(e)},this.fnDraw=function(e){this.api(!0).draw(e)},this.fnFilter=function(e,t,r,i,s,o){var u=this.api(!0);t===null||t===n?u.search(e,r,i,o):u.column(t).search(e,r,i,o),u.draw()},this.fnGetData=function(e,t){var r=this.api(!0);if(e!==n){var i=e.nodeName?e.nodeName.toLowerCase():"";return t!==n||i=="td"||i=="th"?r.cell(e,t).data():r.row(e).data()||null}return r.data().toArray()},this.fnGetNodes=function(e){var t=this.api(!0);return e!==n?t.row(e).node():t.rows().nodes().flatten().toArray()},this.fnGetPosition=function(e){var t=this.api(!0),n=e.nodeName.toUpperCase();if(n=="TR")return t.row(e).index();if(n=="TD"||n=="TH"){var r=t.cell(e).index();return[r.row,r.columnVisible,r.column]}return null},this.fnIsOpen=function(e){return this.api(!0).row(e).child.isShown()},this.fnOpen=function(e,t,n){return this.api(!0).row(e).child(t,n).show().child()[0]},this.fnPageChange=function(e,t){var r=this.api(!0).page(e);(t===n||t)&&r.draw(!1)},this.fnSetColumnVis=function(e,t,r){var i=this.api(!0).column(e).visible(t);(r===n||r)&&i.columns.adjust().draw()},this.fnSettings=function(){return cn(this[s.iApiIndex])},this.fnSort=function(e){this.api(!0).order(e).draw()},this.fnSortListener=function(e,t,n){this.api(!0).order.listener(e,t,n)},this.fnUpdate=function(e,t,r,i,s){var o=this.api(!0);return r===n||r===null?o.row(t).data(e):o.cell(t,r).data(e),(s===n||s)&&o.columns.adjust(),(i===n||i)&&o.draw(),0},this.fnVersionCheck=s.fnVersionCheck;var t=this,u=e===n,a=this.length;u&&(e={}),this.oApi=this.internal=s.internal;for(var f in i.ext.internal)f&&(this[f]=$n(f));return this.each(function(){var s={},o=a>1?dn(s,e,!0):e,f=0,l,c,h,p,d,v=this.getAttribute("id"),m=!1,g=i.defaults,y=r(this);if(this.nodeName.toLowerCase()!="table"){hn(null,0,"Non-table node initialisation ("+this.nodeName+")",2);return}_(g),D(g.column),A(g,g,!0),A(g.column,g.column,!0),A(g,r.extend(o,y.data()));var b=i.settings;for(f=0,l=b.length;f<l;f++){var w=b[f];if(w.nTable==this||w.nTHead.parentNode==this||w.nTFoot&&w.nTFoot.parentNode==this){var E=o.bRetrieve!==n?o.bRetrieve:g.bRetrieve,S=o.bDestroy!==n?o.bDestroy:g.bDestroy;if(u||E)return w.oInstance;if(S){w.oInstance.fnDestroy();break}hn(w,0,"Cannot reinitialise DataTable",3);return}if(w.sTableId==this.id){b.splice(f,1);break}}if(v===null||v==="")v="DataTables_Table_"+i.ext._unique++,this.id=v;var x=r.extend(!0,{},i.models.oSettings,{sDestroyWidth:y[0].style.width,sInstance:v,sTableId:v});x.nTable=this,x.oApi=t.internal,x.oInit=o,b.push(x),x.oInstance=t.length===1?t:y.dataTable(),_(o),o.oLanguage&&O(o.oLanguage),o.aLengthMenu&&!o.iDisplayLength&&(o.iDisplayLength=r.isArray(o.aLengthMenu[0])?o.aLengthMenu[0][0]:o.aLengthMenu[0]),o=dn(r.extend(!0,{},g),o),pn(x.oFeatures,o,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),pn(x,o,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),pn(x.oScroll,o,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),pn(x.oLanguage,o,"fnInfoCallback"),mn(x,"aoDrawCallback",o.fnDrawCallback,"user"),mn(x,"aoServerParams",o.fnServerParams,"user"),mn(x,"aoStateSaveParams",o.fnStateSaveParams,"user"),mn(x,"aoStateLoadParams",o.fnStateLoadParams,"user"),mn(x,"aoStateLoaded",o.fnStateLoaded,"user"),mn(x,"aoRowCallback",o.fnRowCallback,"user"),mn(x,"aoRowCreatedCallback",o.fnCreatedRow,"user"),mn(x,"aoHeaderCallback",o.fnHeaderCallback,"user"),mn(x,"aoFooterCallback",o.fnFooterCallback,"user"),mn(x,"aoInitComplete",o.fnInitComplete,"user"),mn(x,"aoPreDrawCallback",o.fnPreDrawCallback,"user"),x.rowIdFn=et(o.rowId);var T=x.oClasses;o.bJQueryUI?(r.extend(T,i.ext.oJUIClasses,o.oClasses),o.sDom===g.sDom&&g.sDom==="lfrtip"&&(x.sDom='<"H"lfr>t<"F"ip>'),x.renderer?r.isPlainObject(x.renderer)&&!x.renderer.header&&(x.renderer.header="jqueryui"):x.renderer="jqueryui"):r.extend(T,i.ext.classes,o.oClasses),y.addClass(T.sTable);if(x.oScroll.sX!==""||x.oScroll.sY!=="")x.oScroll.iBarWidth=en();x.iInitDisplayStart===n&&(x.iInitDisplayStart=o.iDisplayStart,x._iDisplayStart=o.iDisplayStart);if(o.iDeferLoading!==null){x.bDeferLoading=!0;var N=r.isArray(o.iDeferLoading);x._iRecordsDisplay=N?o.iDeferLoading[0]:o.iDeferLoading,x._iRecordsTotal=N?o.iDeferLoading[1]:o.iDeferLoading}var C=x.oLanguage;r.extend(!0,C,o.oLanguage),C.sUrl!==""&&(r.ajax({dataType:"json",url:C.sUrl,success:function(e){O(e),A(g.oLanguage,e),r.extend(!0,C,e),Bt(x)},error:function(){Bt(x)}}),m=!0),o.asStripeClasses===null&&(x.asStripeClasses=[T.sStripeOdd,T.sStripeEven]);var k=x.asStripeClasses,L=y.children("tbody").find("tr").eq(0);r.inArray(!0,r.map(k,function(e,t){return L.hasClass(e)}))!==-1&&(r("tbody tr",this).removeClass(k.join(" ")),x.asDestroyStripes=k.slice());var M=[],H,F=this.getElementsByTagName("thead");F.length!==0&&(dt(x.aoHeader,F[0]),M=vt(x));if(o.aoColumns===null){H=[];for(f=0,l=M.length;f<l;f++)H.push(null)}else H=o.aoColumns;for(f=0,l=H.length;f<l;f++)B(x,M?M[f]:null);W(x,o.aoColumnDefs,H,function(e,t){j(x,e,t)});if(L.length){var I=function(e,t){return e.getAttribute("data-"+t)!==null?t:null};r.each(ot(x,L[0]).cells,function(e,t){var r=x.aoColumns[e];if(r.mData===e){var i=I(t,"sort")||I(t,"order"),s=I(t,"filter")||I(t,"search");if(i!==null||s!==null)r.mData={_:e+".display",sort:i!==null?e+".@data-"+i:n,type:i!==null?e+".@data-"+i:n,filter:s!==null?e+".@data-"+s:n},j(x,e)}})}var q=x.oFeatures;o.bStateSave&&(q.bStateSave=!0,ln(x,o),mn(x,"aoDrawCallback",fn,"state_save"));if(o.aaSorting===n){var R=x.aaSorting;for(f=0,l=R.length;f<l;f++)R[f][1]=x.aoColumns[f].asSorting[0]}un(x),q.bSort&&mn(x,"aoDrawCallback",function(){if(x.bSorted){var e=tn(x),t={};r.each(e,function(e,n){t[n.src]=n.dir}),gn(x,null,"order",[x,e,t]),rn(x)}}),mn(x,"aoDrawCallback",function(){(x.bSorted||wn(x)==="ssp"||q.bDeferRender)&&un(x)},"sc"),P(x);var U=y.children("caption").each(function(){this._captionSide=y.css("caption-side")}),z=y.children("thead");z.length===0&&(z=r("<thead/>").appendTo(this)),x.nTHead=z[0];var $=y.children("tbody");$.length===0&&($=r("<tbody/>").appendTo(this)),x.nTBody=$[0];var J=y.children("tfoot");J.length===0&&U.length>0&&(x.oScroll.sX!==""||x.oScroll.sY!=="")&&(J=r("<tfoot/>").appendTo(this)),J.length===0||J.children().length===0?y.addClass(T.sNoFooter):J.length>0&&(x.nTFoot=J[0],dt(x.aoFooter,x.nTFoot));if(o.aaData)for(f=0;f<o.aaData.length;f++)X(x,o.aaData[f]);else(x.bDeferLoading||wn(x)=="dom")&&V(x,r(x.nTBody).children("tr"));x.aiDisplay=x.aiDisplayMaster.slice(),x.bInitialised=!0,m===!1&&Bt(x)}),t=null,this};var En=[],Sn=Array.prototype,xn=function(e){var t,n,s=i.settings,o=r.map(s,function(e,t){return e.nTable});if(!e)return[];if(e.nTable&&e.oApi)return[e];if(e.nodeName&&e.nodeName.toLowerCase()==="table")return t=r.inArray(e,o),t!==-1?[s[t]]:null;if(e&&typeof e.settings=="function")return e.settings().toArray();typeof e=="string"?n=r(e):e instanceof r&&(n=e);if(n)return n.map(function(e){return t=r.inArray(this,o),t!==-1?s[t]:null}).toArray()};o=function(e,t){if(!(this instanceof o))return new o(e,t);var n=[],i=function(e){var t=xn(e);t&&n.push.apply(n,t)};if(r.isArray(e))for(var s=0,u=e.length;s<u;s++)i(e[s]);else i(e);this.context=k(n),t&&this.push.apply(this,t.toArray?t.toArray():t),this.selector={rows:null,cols:null,opts:null},o.extend(this,this,En)},i.Api=o,o.prototype={any:function(){return this.count()!==0},concat:Sn.concat,context:[],count:function(){return this.flatten().length},each:function(e){for(var t=0,n=this.length;t<n;t++)e.call(this,this[t],t,this);return this},eq:function(e){var t=this.context;return t.length>e?new o(t[e],this[e]):null},filter:function(e){var t=[];if(Sn.filter)t=Sn.filter.call(this,e,this);else for(var n=0,r=this.length;n<r;n++)e.call(this,this[n],n,this)&&t.push(this[n]);return new o(this.context,t)},flatten:function(){var e=[];return new o(this.context,e.concat.apply(e,this.toArray()))},join:Sn.join,indexOf:Sn.indexOf||function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1},iterator:function(e,t,r,i){var s=[],u,a,f,l,c,h=this.context,p,d,v,m=this.selector;typeof e=="string"&&(i=r,r=t,t=e,e=!1);for(a=0,f=h.length;a<f;a++){var g=new o(h[a]);if(t==="table")u=r.call(g,h[a],a),u!==n&&s.push(u);else if(t==="columns"||t==="rows")u=r.call(g,h[a],this[a],a),u!==n&&s.push(u);else if(t==="column"||t==="column-rows"||t==="row"||t==="cell"){d=this[a],t==="column-rows"&&(p=An(h[a],m.opts));for(l=0,c=d.length;l<c;l++)v=d[l],t==="cell"?u=r.call(g,h[a],v.row,v.column,a,l):u=r.call(g,h[a],v,a,l,p),u!==n&&s.push(u)}}if(s.length||i){var y=new o(h,e?s.concat.apply([],s):s),b=y.selector;return b.rows=m.rows,b.cols=m.cols,b.opts=m.opts,y}return this},lastIndexOf:Sn.lastIndexOf||function(e,t){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(e){var t=[];if(Sn.map)t=Sn.map.call(this,e,this);else for(var n=0,r=this.length;n<r;n++)t.push(e.call(this,this[n],n));return new o(this.context,t)},pluck:function(e){return this.map(function(t){return t[e]})},pop:Sn.pop,push:Sn.push,reduce:Sn.reduce||function(e,t){return H(this,e,t,0,this.length,1)},reduceRight:Sn.reduceRight||function(e,t){return H(this,e,t,this.length-1,-1,-1)},reverse:Sn.reverse,selector:null,shift:Sn.shift,sort:Sn.sort,splice:Sn.splice,toArray:function(){return Sn.slice.call(this)},to$:function(){return r(this)},toJQuery:function(){return r(this)},unique:function(){return new o(this.context,k(this))},unshift:Sn.unshift},o.extend=function(e,t,n){if(!n.length||!t||!(t instanceof o)&&!t.__dt_wrapper)return;var i,s,u,a,f,l,c=function(e,t,n){return function(){var r=t.apply(e,arguments);return o.extend(r,r,n.methodExt),r}};for(i=0,s=n.length;i<s;i++)f=n[i],t[f.name]=typeof f.val=="function"?c(e,f.val,f):r.isPlainObject(f.val)?{}:f.val,t[f.name].__dt_wrapper=!0,o.extend(e,t[f.name],f.propExt)},o.register=u=function(e,t){if(r.isArray(e)){for(var n=0,i=e.length;n<i;n++)o.register(e[n],t);return}var s,u,a=e.split("."),f=En,l,c,h=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n].name===t)return e[n];return null};for(s=0,u=a.length;s<u;s++){c=a[s].indexOf("()")!==-1,l=c?a[s].replace("()",""):a[s];var p=h(f,l);p||(p={name:l,val:{},methodExt:[],propExt:[]},f.push(p)),s===u-1?p.val=t:f=c?p.methodExt:p.propExt}},o.registerPlural=a=function(e,t,i){o.register(e,i),o.register(t,function(){var e=i.apply(this,arguments);return e===this?this:e instanceof o?e.length?r.isArray(e[0])?new o(e.context,e[0]):e[0]:n:e})};var Tn=function(e,t){if(typeof e=="number")return[t[e]];var n=r.map(t,function(e,t){return e.nTable});return r(n).filter(e).map(function(e){var i=r.inArray(this,n);return t[i]}).toArray()};u("tables()",function(e){return e?new o(Tn(e,this.context)):this}),u("table()",function(e){var t=this.tables(e),n=t.context;return n.length?new o(n[0]):t}),a("tables().nodes()","table().node()",function(){return this.iterator("table",function(e){return e.nTable},1)}),a("tables().body()","table().body()",function(){return this.iterator("table",function(e){return e.nTBody},1)}),a("tables().header()","table().header()",function(){return this.iterator("table",function(e){return e.nTHead},1)}),a("tables().footer()","table().footer()",function(){return this.iterator("table",function(e){return e.nTFoot},1)}),a("tables().containers()","table().container()",function(){return this.iterator("table",function(e){return e.nTableWrapper},1)}),u("draw()",function(e){return this.iterator("table",function(t){e==="page"?ct(t):(typeof e=="string"&&(e=e==="full-hold"?!1:!0),ht(t,e===!1))})}),u("page()",function(e){return e===n?this.page.info().page:this.iterator("table",function(t){Rt(t,e)})}),u("page.info()",function(e){if(this.context.length===0)return n;var t=this.context[0],r=t._iDisplayStart,i=t._iDisplayLength,s=t.fnRecordsDisplay(),o=i===-1;return{page:o?0:Math.floor(r/i),pages:o?1:Math.ceil(s/i),start:r,end:t.fnDisplayEnd(),length:i,recordsTotal:t.fnRecordsTotal(),recordsDisplay:s,serverSide:wn(t)==="ssp"}}),u("page.len()",function(e){return e===n?this.context.length!==0?this.context[0]._iDisplayLength:n:this.iterator("table",function(t){Ft(t,e)})});var Nn=function(e,t,n){if(n){var r=new o(e);r.one("draw",function(){n(r.ajax.json())})}if(wn(e)=="ssp")ht(e,t);else{zt(e,!0);var i=e.jqXHR;i&&i.readyState!==4&&i.abort(),mt(e,[],function(n){rt(e);var r=wt(e,n);for(var i=0,s=r.length;i<s;i++)X(e,r[i]);ht(e,t),zt(e,!1)})}};u("ajax.json()",function(){var e=this.context;if(e.length>0)return e[0].json}),u("ajax.params()",function(){var e=this.context;if(e.length>0)return e[0].oAjaxData}),u("ajax.reload()",function(e,t){return this.iterator("table",function(n){Nn(n,t===!1,e)})}),u("ajax.url()",function(e){var t=this.context;return e===n?t.length===0?n:(t=t[0],t.ajax?r.isPlainObject(t.ajax)?t.ajax.url:t.ajax:t.sAjaxSource):this.iterator("table",function(t){r.isPlainObject(t.ajax)?t.ajax.url=e:t.ajax=e})}),u("ajax.url().load()",function(e,t){return this.iterator("table",function(n){Nn(n,t===!1,e)})});var Cn=function(e,t,i,o,u){var a=[],f,l,c,h,p,d,v=typeof t;if(!t||v==="string"||v==="function"||t.length===n)t=[t];for(c=0,h=t.length;c<h;c++){l=t[c]&&t[c].split?t[c].split(","):[t[c]];for(p=0,d=l.length;p<d;p++)f=i(typeof l[p]=="string"?r.trim(l[p]):l[p]),f&&f.length&&a.push.apply(a,f)}var m=s.selector[e];if(m.length)for(c=0,h=m.length;c<h;c++)a=m[c](o,u,a);return a},kn=function(e){return e||(e={}),e.filter&&e.search===n&&(e.search=e.filter),r.extend({search:"none",order:"current",page:"all"},e)},Ln=function(e){for(var t=0,n=e.length;t<n;t++)if(e[t].length>0)return e[0]=e[t],e[0].length=1,e.length=1,e.context=[e.context[t]],e;return e.length=0,e},An=function(e,t){var n,i,s,o=[],u=e.aiDisplay,a=e.aiDisplayMaster,f=t.search,l=t.order,c=t.page;if(wn(e)=="ssp")return f==="removed"?[]:T(0,a.length);if(c=="current")for(n=e._iDisplayStart,i=e.fnDisplayEnd();n<i;n++)o.push(u[n]);else if(l=="current"||l=="applied")o=f=="none"?a.slice():f=="applied"?u.slice():r.map(a,function(e,t){return r.inArray(e,u)===-1?e:null});else if(l=="index"||l=="original")for(n=0,i=e.aoData.length;n<i;n++)f=="none"?o.push(n):(s=r.inArray(n,u),(s===-1&&f=="removed"||s>=0&&f=="applied")&&o.push(n));return o},On=function(e,t,i){var s=function(t){var s=g(t),o,u;if(s!==null&&!i)return[s];var a=An(e,i);if(s!==null&&r.inArray(s,a)!==-1)return[s];if(!t)return a;if(typeof t=="function")return r.map(a,function(n){var r=e.aoData[n];return t(n,r._aData,r.nTr)?n:null});var f=N(x(e.aoData,a,"nTr"));if(t.nodeName&&r.inArray(t,f)!==-1)return[t._DT_RowIndex];if(typeof t=="string"&&t.charAt(0)==="#"){var l=e.aIds[t.replace(/^#/,"")];if(l!==n)return[l.idx]}return r(f).filter(t).map(function(){return this._DT_RowIndex}).toArray()};return Cn("row",t,s,e,i)};u("rows()",function(e,t){e===n?e="":r.isPlainObject(e)&&(t=e,e=""),t=kn(t);var i=this.iterator("table",function(n){return On(n,e,t)},1);return i.selector.rows=e,i.selector.opts=t,i}),u("rows().nodes()",function(){return this.iterator("row",function(e,t){return e.aoData[t].nTr||n},1)}),u("rows().data()",function(){return this.iterator(!0,"rows",function(e,t){return x(e.aoData,t,"_aData")},1)}),a("rows().cache()","row().cache()",function(e){return this.iterator("row",function(t,n){var r=t.aoData[n];return e==="search"?r._aFilterData:r._aSortData},1)}),a("rows().invalidate()","row().invalidate()",function(e){return this.iterator("row",function(t,n){st(t,n,e)})}),a("rows().indexes()","row().index()",function(){return this.iterator("row",function(e,t){return t},1)}),a("rows().ids()","row().id()",function(e){var t=[],n=this.context;for(var r=0,i=n.length;r<i;r++)for(var s=0,u=this[r].length;s<u;s++){var a=n[r].rowIdFn(n[r].aoData[this[r][s]]._aData);t.push((e===!0?"#":"")+a)}return new o(n,t)}),a("rows().remove()","row().remove()",function(){var e=this;return this.iterator("row",function(t,n,r){var i=t.aoData;i.splice(n,1);for(var s=0,o=i.length;s<o;s++)i[s].nTr!==null&&(i[s].nTr._DT_RowIndex=s);it(t.aiDisplayMaster,n),it(t.aiDisplay,n),it(e[r],n,!1),yn(t)}),this.iterator("table",function(e){for(var t=0,n=e.aoData.length;t<n;t++)e.aoData[t].idx=t}),this}),u("rows.add()",function(e){var t=this.iterator("table",function(t){var n,r,i,s=[];for(r=0,i=e.length;r<i;r++)n=e[r],n.nodeName&&n.nodeName.toUpperCase()==="TR"?s.push(V(t,n)[0]):s.push(X(t,n));return s},1),n=this.rows(-1);return n.pop(),n.push.apply(n,t.toArray()),n}),u("row()",function(e,t){return Ln(this.rows(e,t))}),u("row().data()",function(e){var t=this.context;return e===n?t.length&&this.length?t[0].aoData[this[0]]._aData:n:(t[0].aoData[this[0]]._aData=e,st(t[0],this[0],"data"),this)}),u("row().node()",function(){var e=this.context;return e.length&&this.length?e[0].aoData[this[0]].nTr||null:null}),u("row.add()",function(e){e instanceof r&&e.length&&(e=e[0]);var t=this.iterator("table",function(t){return e.nodeName&&e.nodeName.toUpperCase()==="TR"?V(t,e)[0]:X(t,e)});return this.row(t[0])});var Mn=function(e,t,n,i){var s=[],o=function(t,n){if(r.isArray(t)||t instanceof r){for(var i=0,u=t.length;i<u;i++)o(t[i],n);return}if(t.nodeName&&t.nodeName.toLowerCase()==="tr")s.push(t);else{var a=r("<tr><td/></tr>").addClass(n);r("td",a).addClass(n).html(t)[0].colSpan=R(e),s.push(a[0])}};o(n,i),t._details&&t._details.remove(),t._details=r(s),t._detailsShow&&t._details.insertAfter(t.nTr)},_n=function(e,t){var r=e.context;if(r.length){var i=r[0].aoData[t!==n?t:e[0]];i&&i._details&&(i._details.remove(),i._detailsShow=n,i._details=n)}},Dn=function(e,t){var n=e.context;if(n.length&&e.length){var r=n[0].aoData[e[0]];r._details&&(r._detailsShow=t,t?r._details.insertAfter(r.nTr):r._details.detach(),Pn(n[0]))}},Pn=function(e){var t=new o(e),n=".dt.DT_details",r="draw"+n,i="column-visibility"+n,s="destroy"+n,u=e.aoData;t.off(r+" "+i+" "+s),S(u,"_details").length>0&&(t.on(r,function(n,r){if(e!==r)return;t.rows({page:"current"}).eq(0).each(function(e){var t=u[e];t._detailsShow&&t._details.insertAfter(t.nTr)})}),t.on(i,function(t,n,r,i){if(e!==n)return;var s,o=R(n);for(var a=0,f=u.length;a<f;a++)s=u[a],s._details&&s._details.children("td[colspan]").attr("colspan",o)}),t.on(s,function(n,r){if(e!==r)return;for(var i=0,s=u.length;i<s;i++)u[i]._details&&_n(t,i)}))},Hn="",Bn=Hn+"row().child",jn=Bn+"()";u(jn,function(e,t){var r=this.context;return e===n?r.length&&this.length?r[0].aoData[this[0]]._details:n:(e===!0?this.child.show():e===!1?_n(this):r.length&&this.length&&Mn(r[0],r[0].aoData[this[0]],e,t),this)}),u([Bn+".show()",jn+".show()"],function(e){return Dn(this,!0),this}),u([Bn+".hide()",jn+".hide()"],function(){return Dn(this,!1),this}),u([Bn+".remove()",jn+".remove()"],function(){return _n(this),this}),u(Bn+".isShown()",function(){var e=this.context;return e.length&&this.length?e[0].aoData[this[0]]._detailsShow||!1:!1});var Fn=/^(.+):(name|visIdx|visible)$/,In=function(e,t,n,r,i){var s=[];for(var o=0,u=i.length;o<u;o++)s.push(K(e,i[o],t));return s},qn=function(e,t,n){var i=e.aoColumns,s=S(i,"sName"),o=S(i,"nTh"),u=function(t){var u=g(t);if(t==="")return T(i.length);if(u!==null)return[u>=0?u:i.length+u];if(typeof t=="function"){var a=An(e,n);return r.map(i,function(n,r){return t(r,In(e,r,0,0,a),o[r])?r:null})}var f=typeof t=="string"?t.match(Fn):"";if(!f)return r(o).filter(t).map(function(){return r.inArray(this,o)}).toArray();switch(f[2]){case"visIdx":case"visible":var l=parseInt(f[1],10);if(l<0){var c=r.map(i,function(e,t){return e.bVisible?t:null});return[c[c.length+l]]}return[I(e,l)];case"name":return r.map(s,function(e,t){return e===f[1]?t:null})}};return Cn("column",t,u,e,n)},Rn=function(e,t,i,s){var o=e.aoColumns,u=o[t],a=e.aoData,f,l,c,h,p;if(i===n)return u.bVisible;if(u.bVisible===i)return;if(i){var d=r.inArray(!0,S(o,"bVisible"),t+1);for(c=0,h=a.length;c<h;c++)p=a[c].nTr,l=a[c].anCells,p&&p.insertBefore(l[t],l[d]||null)}else r(S(e.aoData,"anCells",t)).detach();u.bVisible=i,lt(e,e.aoHeader),lt(e,e.aoFooter);if(s===n||s)F(e),(e.oScroll.sX||e.oScroll.sY)&&Xt(e);gn(e,null,"column-visibility",[e,t,i]),fn(e)};u("columns()",function(e,t){e===n?e="":r.isPlainObject(e)&&(t=e,e=""),t=kn(t);var i=this.iterator("table",function(n){return qn(n,e,t)},1);return i.selector.cols=e,i.selector.opts=t,i}),a("columns().header()","column().header()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTh},1)}),a("columns().footer()","column().footer()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTf},1)}),a("columns().data()","column().data()",function(){return this.iterator("column-rows",In,1)}),a("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].mData},1)}),a("columns().cache()","column().cache()",function(e){return this.iterator("column-rows",function(t,n,r,i,s){return x(t.aoData,s,e==="search"?"_aFilterData":"_aSortData",n)},1)}),a("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(e,t,n,r,i){return x(e.aoData,i,"anCells",t)},1)}),a("columns().visible()","column().visible()",function(e,t){return this.iterator("column",function(r,i){if(e===n)return r.aoColumns[i].bVisible;Rn(r,i,e,t)})}),a("columns().indexes()","column().index()",function(e){return this.iterator("column",function(t,n){return e==="visible"?q(t,n):n},1)}),u("columns.adjust()",function(){return this.iterator("table",function(e){F(e)},1)}),u("column.index()",function(e,t){if(this.context.length!==0){var n=this.context[0];if(e==="fromVisible"||e==="toData")return I(n,t);if(e==="fromData"||e==="toVisible")return q(n,t)}}),u("column()",function(e,t){return Ln(this.columns(e,t))});var Un=function(e,t,i){var s=e.aoData,o=An(e,i),u=N(x(s,o,"anCells")),a=r([].concat.apply([],u)),f,l=e.aoColumns.length,c,h,p,d,v,m,g=function(t){var i=typeof t=="function";if(t===null||t===n||i){c=[];for(h=0,p=o.length;h<p;h++){f=o[h];for(d=0;d<l;d++)v={row:f,column:d},i?(m=e.aoData[f],t(v,K(e,f,d),m.anCells?m.anCells[d]:null)&&c.push(v)):c.push(v)}return c}return r.isPlainObject(t)?[t]:a.filter(t).map(function(e,t){return f=t.parentNode._DT_RowIndex,{row:f,column:r.inArray(t,s[f].anCells)}}).toArray()};return Cn("cell",t,g,e,i)};u("cells()",function(e,t,i){r.isPlainObject(e)&&(e.row===n?(i=e,e=null):(i=t,t=null)),r.isPlainObject(t)&&(i=t,t=null);if(t===null||t===n)return this.iterator("table",function(t){return Un(t,e,kn(i))});var s=this.columns(t,i),o=this.rows(e,i),u,a,f,l,c,h=this.iterator("table",function(e,t){u=[];for(a=0,f=o[t].length;a<f;a++)for(l=0,c=s[t].length;l<c;l++)u.push({row:o[t][a],column:s[t][l]});return u},1);return r.extend(h.selector,{cols:t,rows:e,opts:i}),h}),a("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(e,t,r){var i=e.aoData[t].anCells;return i?i[r]:n},1)}),u("cells().data()",function(){return this.iterator("cell",function(e,t,n){return K(e,t,n)},1)}),a("cells().cache()","cell().cache()",function(e){return e=e==="search"?"_aFilterData":"_aSortData",this.iterator("cell",function(t,n,r){return t.aoData[n][e][r]},1)}),a("cells().render()","cell().render()",function(e){return this.iterator("cell",function(t,n,r){return K(t,n,r,e)},1)}),a("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(e,t,n){return{row:t,column:n,columnVisible:q(e,n)}},1)}),a("cells().invalidate()","cell().invalidate()",function(e){return this.iterator("cell",function(t,n,r){st(t,n,e,r)})}),u("cell()",function(e,t,n){return Ln(this.cells(e,t,n))}),u("cell().data()",function(e){var t=this.context,r=this[0];return e===n?t.length&&r.length?K(t[0],r[0].row,r[0].column):n:(Q(t[0],r[0].row,r[0].column,e),st(t[0],r[0].row,"data",r[0].column),this)}),u("order()",function(e,t){var i=this.context;return e===n?i.length!==0?i[0].aaSorting:n:(typeof e=="number"?e=[[e,t]]:r.isArray(e[0])||(e=Array.prototype.slice.call(arguments)),this.iterator("table",function(t){t.aaSorting=e.slice()}))}),u("order.listener()",function(e,t,n){return this.iterator("table",function(r){on(r,e,t,n)})}),u(["columns().order()","column().order()"],function(e){var t=this;return this.iterator("table",function(n,i){var s=[];r.each(t[i],function(t,n){s.push([n,e])}),n.aaSorting=s})}),u("search()",function(e,t,i,s){var o=this.context;return e===n?o.length!==0?o[0].oPreviousSearch.sSearch:n:this.iterator("table",function(n){if(!n.oFeatures.bFilter)return;St(n,r.extend({},n.oPreviousSearch,{sSearch:e+"",bRegex:t===null?!1:t,bSmart:i===null?!0:i,bCaseInsensitive:s===null?!0:s}),1)})}),a("columns().search()","column().search()",function(e,t,i,s){return this.iterator("column",function(o,u){var a=o.aoPreSearchCols;if(e===n)return a[u].sSearch;if(!o.oFeatures.bFilter)return;r.extend(a[u],{sSearch:e+"",bRegex:t===null?!1:t,bSmart:i===null?!0:i,bCaseInsensitive:s===null?!0:s}),St(o,o.oPreviousSearch,1)})}),u("state()",function(){return this.context.length?this.context[0].oSavedState:null}),u("state.clear()",function(){return this.iterator("table",function(e){e.fnStateSaveCallback.call(e.oInstance,e,{})})}),u("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),u("state.save()",function(){return this.iterator("table",function(e){fn(e)})}),i.versionCheck=i.fnVersionCheck=function(e){var t=i.version.split("."),n=e.split("."),r,s;for(var o=0,u=n.length;o<u;o++){r=parseInt(t[o],10)||0,s=parseInt(n[o],10)||0;if(r===s)continue;return r>s}return!0},i.isDataTable=i.fnIsDataTable=function(e){var t=r(e).get(0),n=!1;return r.each(i.settings,function(e,i){var s=i.nScrollHead?r("table",i.nScrollHead)[0]:null,o=i.nScrollFoot?r("table",i.nScrollFoot)[0]:null;if(i.nTable===t||s===t||o===t)n=!0}),n},i.tables=i.fnTables=function(e){var t=!1;r.isPlainObject(e)&&(t=e.api,e=e.visible);var n=r.map(i.settings,function(t){if(!e||e&&r(t.nTable).is(":visible"))return t.nTable});return t?new o(n):n},i.util={throttle:Kt,escapeRegex:kt},i.camelToHungarian=A,u("$()",function(e,t){var n=this.rows(t).nodes(),i=r(n);return r([].concat(i.filter(e).toArray(),i.find(e).toArray()))}),r.each(["on","one","off"],function(e,t){u(t+"()",function(){var e=Array.prototype.slice.call(arguments);e[0].match(/\.dt\b/)||(e[0]+=".dt");var n=r(this.tables().nodes());return n[t].apply(n,e),this})}),u("clear()",function(){return this.iterator("table",function(e){rt(e)})}),u("settings()",function(){return new o(this.context,this.context)}),u("init()",function(){var e=this.context;return e.length?e[0].oInit:null}),u("data()",function(){return this.iterator("table",function(e){return S(e.aoData,"_aData")}).flatten()}),u("destroy()",function(t){return t=t||!1,this.iterator("table",function(n){var s=n.nTableWrapper.parentNode,u=n.oClasses,a=n.nTable,f=n.nTBody,l=n.nTHead,c=n.nTFoot,h=r(a),p=r(f),d=r(n.nTableWrapper),v=r.map(n.aoData,function(e){return e.nTr}),m,g;n.bDestroying=!0,gn(n,"aoDestroyCallback","destroy",[n]),t||(new o(n)).columns().visible(!0),d.unbind(".DT").find(":not(tbody *)").unbind(".DT"),r(e).unbind(".DT-"+n.sInstance),a!=l.parentNode&&(h.children("thead").detach(),h.append(l)),c&&a!=c.parentNode&&(h.children("tfoot").detach(),h.append(c)),n.aaSorting=[],n.aaSortingFixed=[],un(n),r(v).removeClass(n.asStripeClasses.join(" ")),r("th, td",l).removeClass(u.sSortable+" "+u.sSortableAsc+" "+u.sSortableDesc+" "+u.sSortableNone),n.bJUI&&(r("th span."+u.sSortIcon+", td span."+u.sSortIcon,l).detach(),r("th, td",l).each(function(){var e=r("div."+u.sSortJUIWrapper,this);r(this).append(e.contents()),e.detach()})),p.children().detach(),p.append(v);var y=t?"remove":"detach";h[y](),d[y](),!t&&s&&(s.insertBefore(a,n.nTableReinsertBefore),h.css("width",n.sDestroyWidth).removeClass(u.sTable),g=n.asDestroyStripes.length,g&&p.children().each(function(e){r(this).addClass(n.asDestroyStripes[e%g])}));var b=r.inArray(n,i.settings);b!==-1&&i.settings.splice(b,1)})}),r.each(["column","row","cell"],function(e,t){u(t+"s().every()",function(e){return this.iterator(t,function(r,i,s,u,a){e.call((new o(r))[t](i,t==="cell"?s:n),i,s,u,a)})})}),u("i18n()",function(e,t,i){var s=this.context[0],o=et(e)(s.oLanguage);return o===n&&(o=t),i!==n&&r.isPlainObject(o)&&(o=o[i]!==n?o[i]:o._),o.replace("%d",i)}),i.version="1.10.8",i.settings=[],i.models={},i.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},i.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},i.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},i.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(e){try{return JSON.parse((e.iStateDuration===-1?sessionStorage:localStorage).getItem("DataTables_"+e.sInstance+"_"+location.pathname))}catch(t){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(e,t){try{(e.iStateDuration===-1?sessionStorage:localStorage).setItem("DataTables_"+e.sInstance+"_"+location.pathname,JSON.stringify(t))}catch(n){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:r.extend({},i.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},L(i.defaults),i.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},L(i.defaults.column),i.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:n,oAjaxData:n,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return 100},fnRecordsDisplay:function(){return 100},fnDisplayEnd:function(){var e=this._iDisplayLength,t=this._iDisplayStart,n=t+e,r=this.aiDisplay.length,i=this.oFeatures,s=i.bPaginate;return i.bServerSide?s===!1||e===-1?t+r:Math.min(t+e,this._iRecordsDisplay):!s||n>r||e===-1?r:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},i.ext=s={buttons:{},classes:{},errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:i.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:i.version},r.extend(s,{afnFiltering:s.search,aTypes:s.type.detect,ofnSearch:s.type.search,oSort:s.type.order,afnSortData:s.order,aoFeatures:s.feature,oApi:s.internal,oStdClasses:s.classes,oPagination:s.pager}),r.extend(i.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""}),function(){var e="";e="";var t=e+"ui-state-default",n=e+"css_right ui-icon ui-icon-",s=e+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";r.extend(i.ext.oJUIClasses,i.ext.classes,{sPageButton:"fg-button ui-button "+t,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:t+" sorting_asc",sSortDesc:t+" sorting_desc",sSortable:t+" sorting",sSortableAsc:t+" sorting_asc_disabled",sSortableDesc:t+" sorting_desc_disabled",sSortableNone:t+" sorting_disabled",sSortJUIAsc:n+"triangle-1-n",sSortJUIDesc:n+"triangle-1-s",sSortJUI:n+"carat-2-n-s",sSortJUIAscAllowed:n+"carat-1-n",sSortJUIDescAllowed:n+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+t,sScrollFoot:"dataTables_scrollFoot "+t,sHeaderTH:t,sFooterTH:t,sJUIHeader:s+" ui-corner-tl ui-corner-tr",sJUIFooter:s+" ui-corner-bl ui-corner-br"})}();var zn=i.ext.pager;r.extend(zn,{simple:function(e,t){return["previous","next"]},full:function(e,t){return["first","previous","next","last"]},numbers:function(e,t){return[Wn(e,t)]},simple_numbers:function(e,t){return["previous",Wn(e,t),"next"]},full_numbers:function(e,t){return["first","previous",Wn(e,t),"next","last"]},_numbers:Wn,numbers_length:7}),r.extend(!0,i.ext.renderer,{pageButton:{_:function(e,n,i,s,o,u){var a=e.oClasses,f=e.oLanguage.oPaginate,l,c,h=0,p=function(t,n){var s,d,v,m,g=function(t){Rt(e,t.data.action,!0)};for(s=0,d=n.length;s<d;s++){m=n[s];if(r.isArray(m)){var y=r("<"+(m.DT_el||"div")+"/>").appendTo(t);p(y,m)}else{l=null,c="";switch(m){case"ellipsis":t.append('<span class="ellipsis">&#x2026;</span>');break;case"first":l=f.sFirst,c=m+(o>0?"":" "+a.sPageButtonDisabled);break;case"previous":l=f.sPrevious,c=m+(o>0?"":" "+a.sPageButtonDisabled);break;case"next":l=f.sNext,c=m+(o<u-1?"":" "+a.sPageButtonDisabled);break;case"last":l=f.sLast,c=m+(o<u-1?"":" "+a.sPageButtonDisabled);break;default:l=m+1,c=o===m?a.sPageButtonActive:""}l!==null&&(v=r("<a>",{"class":a.sPageButton+" "+c,"aria-controls":e.sTableId,"data-dt-idx":h,tabindex:e.iTabIndex,id:i===0&&typeof m=="string"?e.sTableId+"_"+m:null}).html(l).appendTo(t),vn(v,{action:m},g),h++)}}},d;try{d=r(n).find(t.activeElement).data("dt-idx")}catch(v){}p(r(n).empty(),s),d&&r(n).find("[data-dt-idx="+d+"]").focus()}}}),r.extend(i.ext.type.detect,[function(e,t){var n=t.oLanguage.sDecimal;return b(e,n)?"num"+n:null},function(e,t){if(!e||e instanceof Date||!!h.test(e)&&!!p.test(e)){var n=Date.parse(e);return n!==null&&!isNaN(n)||m(e)?"date":null}return null},function(e,t){var n=t.oLanguage.sDecimal;return b(e,n,!0)?"num-fmt"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return E(e,n)?"html-num"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return E(e,n,!0)?"html-num-fmt"+n:null},function(e,t){return m(e)||typeof e=="string"&&e.indexOf("<")!==-1?"html":null}]),r.extend(i.ext.type.search,{html:function(e){return m(e)?e:typeof e=="string"?e.replace(l," ").replace(c,""):""},string:function(e){return m(e)?e:typeof e=="string"?e.replace(l," "):e}});var Xn=function(e,t,n,r){return e===0||!!e&&e!=="-"?(t&&(e=y(e,t)),e.replace&&(n&&(e=e.replace(n,"")),r&&(e=e.replace(r,""))),e*1):-Infinity};return r.extend(s.type.order,{"date-pre":function(e){return Date.parse(e)||0},"html-pre":function(e){return m(e)?"":e.replace?e.replace(/<.*?>/g,"").toLowerCase():e+""},"string-pre":function(e){return m(e)?"":typeof e=="string"?e.toLowerCase():e.toString?e.toString():""},"string-asc":function(e,t){return e<t?-1:e>t?1:0},"string-desc":function(e,t){return e<t?1:e>t?-1:0}}),Vn(""),r.extend(!0,i.ext.renderer,{header:{_:function(e,t,n,i){r(e.nTable).on("order.dt.DT",function(r,s,o,u){if(e!==s)return;var a=n.idx;t.removeClass(n.sSortingClass+" "+i.sSortAsc+" "+i.sSortDesc).addClass(u[a]=="asc"?i.sSortAsc:u[a]=="desc"?i.sSortDesc:n.sSortingClass)})},jqueryui:function(e,t,n,i){r("<div/>").addClass(i.sSortJUIWrapper).append(t.contents()).append(r("<span/>").addClass(i.sSortIcon+" "+n.sSortingClassJUI)).appendTo(t),r(e.nTable).on("order.dt.DT",function(r,s,o,u){if(e!==s)return;var a=n.idx;t.removeClass(i.sSortAsc+" "+i.sSortDesc).addClass(u[a]=="asc"?i.sSortAsc:u[a]=="desc"?i.sSortDesc:n.sSortingClass),t.find("span."+i.sSortIcon).removeClass(i.sSortJUIAsc+" "+i.sSortJUIDesc+" "+i.sSortJUI+" "+i.sSortJUIAscAllowed+" "+i.sSortJUIDescAllowed).addClass(u[a]=="asc"?i.sSortJUIAsc:u[a]=="desc"?i.sSortJUIDesc:n.sSortingClassJUI)})}}}),i.render={number:function(e,t,n,r,i){return{display:function(s){if(typeof s!="number"&&typeof s!="string")return s;var o=s<0?"-":"";s=Math.abs(parseFloat(s));var u=parseInt(s,10),a=n?t+(s-u).toFixed(n).substring(2):"";return o+(r||"")+u.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)+a+(i||"")}}}},r.extend(i.ext.internal,{_fnExternApiFunc:$n,_fnBuildAjax:mt,_fnAjaxUpdate:gt,_fnAjaxParameters:yt,_fnAjaxUpdateDraw:bt,_fnAjaxDataSrc:wt,_fnAddColumn:B,_fnColumnOptions:j,_fnAdjustColumnSizing:F,_fnVisibleToColumnIndex:I,_fnColumnIndexToVisible:q,_fnVisbleColumns:R,_fnGetColumns:U,_fnColumnTypes:z,_fnApplyColumnDefs:W,_fnHungarianMap:L,_fnCamelToHungarian:A,_fnLanguageCompat:O,_fnBrowserDetect:P,_fnAddData:X,_fnAddTr:V,_fnNodeToDataIndex:$,_fnNodeToColumnIndex:J,_fnGetCellData:K,_fnSetCellData:Q,_fnSplitObjNotation:Z,_fnGetObjectDataFn:et,_fnSetObjectDataFn:tt,_fnGetDataMaster:nt,_fnClearTable:rt,_fnDeleteIndex:it,_fnInvalidate:st,_fnGetRowElements:ot,_fnCreateTr:ut,_fnBuildHead:ft,_fnDrawHead:lt,_fnDraw:ct,_fnReDraw:ht,_fnAddOptionsHtml:pt,_fnDetectHeader:dt,_fnGetUniqueThs:vt,_fnFeatureHtmlFilter:Et,_fnFilterComplete:St,_fnFilterCustom:xt,_fnFilterColumn:Tt,_fnFilter:Nt,_fnFilterCreateSearch:Ct,_fnEscapeRegex:kt,_fnFilterData:Ot,_fnFeatureHtmlInfo:Dt,_fnUpdateInfo:Pt,_fnInfoMacros:Ht,_fnInitialise:Bt,_fnInitComplete:jt,_fnLengthChange:Ft,_fnFeatureHtmlLength:It,_fnFeatureHtmlPaginate:qt,_fnPageChange:Rt,_fnFeatureHtmlProcessing:Ut,_fnProcessingDisplay:zt,_fnFeatureHtmlTable:Wt,_fnScrollDraw:Xt,_fnApplyToChildren:Vt,_fnCalculateColumnWidths:Jt,_fnThrottle:Kt,_fnConvertToWidth:Qt,_fnGetWidestNode:Gt,_fnGetMaxLenString:Yt,_fnStringToCss:Zt,_fnScrollBarWidth:en,_fnSortFlatten:tn,_fnSort:nn,_fnSortAria:rn,_fnSortListener:sn,_fnSortAttachListener:on,_fnSortingClasses:un,_fnSortData:an,_fnSaveState:fn,_fnLoadState:ln,_fnSettingsFromNode:cn,_fnLog:hn,_fnMap:pn,_fnBindAction:vn,_fnCallbackReg:mn,_fnCallbackFire:gn,_fnLengthOverflow:yn,_fnRenderer:bn,_fnDataSource:wn,_fnRowAttributes:at,_fnCalculateEnd:function(){}}),r.fn.dataTable=i,r.fn.dataTableSettings=i.settings,r.fn.dataTableExt=i.ext,r.fn.DataTable=function(e){return r(this).dataTable(e).api()},r.each(i,function(e,t){r.fn.DataTable[e]=t}),r.fn.dataTable})}(window,document),define("table",function(){}),define("stationsinfoDialog",["require","api","context","table"],function(e,t,n){var r=null,i,s={"default":{extobj:{data:null,listPlugin:[],el:$("#stationinfoTpl-dialog"),initialize:function(e){var t=this;t.listenTo(Backbone.Events,"stationinfo:update",function(e){t.data=e.list,t.render()})},jumpToRealTime:function(){window.location.href="#/manage/station/"+i.substr(0,10)},refresh:function(){var e=this,t=e.getParam();t&&e.fetchData(t)},getParam:function(){var e=n.getCurStations(),t=n.getListType();return console.log("listType",t),{listType:t}},render:function(){var e=this,t=$("#stationinfoTpl-dialog").length?$("#stationinfoTpl-dialog").replaceWith($($("#stationinfoTpl").html())):$($("#stationinfoTpl").html());return t.dialog({modal:!0,show:300,height:270,width:900,title:"站信息",close:function(t,n){$(this).dialog("destroy"),e.table.destroy()},open:function(){e.table=$("#stationinfoTpl-dialog table").DataTable({data:e.data,paging:!1,searching:!1,info:!1,retrieve:!0,scrollX:!0,scrollY:!0,columns:[{data:"site_name"},{data:"sid"},{data:"site_location"},{data:"fix_phone"},{data:"functionary"},{data:"functionary_phone"},{data:"emergency_person"},{data:"emergency_phone"},{data:"ups_vender"},{data:"ups_service_phone"},{data:"bms_service_contact"},{data:"bms_phone"}]}),$("#stationinfoTpl-dialog .dataTables_scrollBody").height(100),$("#stationinfoTpl-dialog").off("click").on("click",".submit-btn",function(){t.dialog("destroy"),e.table.destroy(),$(".ui-dialog,.ui-widget-overlay").remove(),e.jumpToRealTime()}),$("#stationinfoTpl-dialog").off("click").on("click",".goto-detail",function(){t.dialog("destroy"),e.table.destroy(),$(".ui-dialog,.ui-widget-overlay").remove(),window.location.href="#/qurey/baseinfo/queryStationSituation"})}}),this}}}};return{init:function(){return r=new(Backbone.View.extend(s.default.extobj)),this},show:function(e){console.log("station id",e),i=e,t.getStationInfo({id:e})}}}),define("map",["require","backbone","api","stationsinfoDialog","common"],function(e,t,n,r,i){var s={w:27,h:38,icon:{0:"images/1.png",1:"images/2.png",2:"images/3.png",3:"images/4.png"},label:{normal:{color:"#000000",fontWeight:"bold",fontSize:"14px",backgroundColor:"#fff5cd",border:"1px solid #ffcc69"},caution:{color:"#000000",fontWeight:"bold",fontSize:"14px",backgroundColor:"#ffd9d9",border:"1px solid #be1616"},notice:{color:"#000000",fontWeight:"bold",fontSize:"14px",backgroundColor:"#ffd9d9",border:"1px solid #be1616"}}},o={x:104.603639,y:35.140578,zoom:5},u=t.View.extend({options:{},initialize:function(e){var n=this;$.extend(n.options,e||{}),n.listenTo(t.Events,"realtime:mapdata",function(e){n.data=e.list,n.addMarks(),n.buildCityList()}),n.listenTo(t.Events,"mapdata:update",function(e){n.data=e.list,n.addMarks(),n.buildCityList(),n.centerAndZoom({x:o.x,y:o.y,zoom:o.zoom})}),n.listenTo(t.Events,"mapdata:update:fail",function(e){n.centerAndZoom({x:o.x,y:o.y,zoom:o.zoom}),$(".mapbtn").html("<select><option>全国</option></select>")}),n.listenTo(t.Events,"linknum:get",function(e){$("#linkingNum").html(e.online),$("#unlinkNum").html(e.offline)}),n._initBDMapCallBack(),n._loadBDMap()},render:function(){var e=this,t=e.options;this.map=new BMap.Map("map"),this.map.enableScrollWheelZoom(!0),t.cityList&&e.addCityList()},unload:function(){this.map=null},addMarks:function(){var e=this,t=e.data,n=e.map,i=0;t&&t.length&&$.each(t,function(t,o){var u=new BMap.Point(o.site_longitude,o.site_latitude),a=new BMap.Icon(s.icon[o.status||"0"],new BMap.Size(s.w,s.h)),f=new BMap.Marker(u,{icon:a}),l=o.site_name.replace(/[^\x00-\xff]/g,"aa").length.toString(),c=new BMap.Label(o.site_name,{offset:new BMap.Size(-(l*6)/2+8,40)});c.setStyle(s.label[o.status||"0"]),parseInt(o.status||"0")>0&&i++,f.addEventListener("click",function(e){return function(){r.show(e.serial_number)}}(o)),c.addEventListener("click",function(e){return function(){r.show(e.serial_number)}}(o)),f.setLabel(c),e.map.addOverlay(f),n[o.id]=$.extend(!0,o,{icon:a,marker:f})}),$(".baojing .bg").html(i)},centerAndZoom:function(e){var t=new BMap.Point(e.x,e.y);this.map.centerAndZoom(t,e.zoom)},buildCityList:function(){var e=this,t=this.data,n=new BMap.Geocoder,r=[],s="<select><option>全国</option>",u=0,a=t.length;$.each(t,function(t,f){var l=new BMap.Point(f.site_longitude,f.site_latitude);n.getLocation(l,function(t){var f=t.addressComponents;if(!i.inArray(f.city,r)){r.push(f.city);var l=localStorage.getItem("currentCity")||"全国";l==f.city?s+="<option selected>"+f.city+"</option>":s+="<option>"+f.city+"</option>"}u++,u==a&&(s+="</select>",$(".mapbtn").html(s),$(".mapbtn select").off("change").on("change",function(){var t=$(".mapbtn select option:selected").html();localStorage.setItem("currentCity",t),"全国"==t?e.centerAndZoom({x:o.x,y:o.y,zoom:o.zoom}):n.getPoint(t,function(t){t?e.map.centerAndZoom(t,12):alert("您选择地址没有解析到结果!")})}))})})},to:function(e){this.map.panTo(new BMap.Point(e.x,e.y))},addCityList:function(){var e=new BMap.Size(10,20),t=this;this.map.addControl(new BMap.CityListControl({anchor:BMAP_ANCHOR_TOP_LEFT,offset:e,onChangeBefore:function(){},onChangeAfter:function(){console.log("after select city"),t.addMarks()}}))},_loadBDMap:function(){var e=document.createElement("script");e.type="text/javascript",e.src="http://api.map.baidu.com/api?v=2.0&ak=1b010415afbe080fcca3807108847acc&callback=MapCallback",document.body.appendChild(e)},_initBDMapCallBack:function(){var e=this;window.MapCallback=function(){e.render(),n.getMapData()}}}),a=null;return{init:function(e){return a&&(delete a,a=null),a=new u,r.init(),n.getLinkingStationNum(),this}}}),function($){var settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch",NAME:"node_name"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url",icon:"icon"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(e){var t=data.getRoot(e);t||(t={},data.setRoot(e,t)),t[e.data.key.children]=[],t.expandTriggerFlag=!1,t.curSelectedList=[],t.noSelection=!0,t.createdNodes=[],t.zId=0,t._ver=(new Date).getTime()},_initCache=function(e){var t=data.getCache(e);t||(t={},data.setCache(e,t)),t.nodes=[],t.doms=[]},_bindEvent=function(e){var t=e.treeObj,n=consts.event;t.bind(n.NODECREATED,function(t,n,r){tools.apply(e.callback.onNodeCreated,[t,n,r])}),t.bind(n.CLICK,function(t,n,r,i,s){tools.apply(e.callback.onClick,[n,r,i,s])}),t.bind(n.EXPAND,function(t,n,r){tools.apply(e.callback.onExpand,[t,n,r])}),t.bind(n.COLLAPSE,function(t,n,r){tools.apply(e.callback.onCollapse,[t,n,r])}),t.bind(n.ASYNC_SUCCESS,function(t,n,r,i){tools.apply(e.callback.onAsyncSuccess,[t,n,r,i])}),t.bind(n.ASYNC_ERROR,function(t,n,r,i,s,o){tools.apply(e.callback.onAsyncError,[t,n,r,i,s,o])}),t.bind(n.REMOVE,function(t,n,r){tools.apply(e.callback.onRemove,[t,n,r])}),t.bind(n.SELECTED,function(t,n,r){tools.apply(e.callback.onSelected,[n,r])}),t.bind(n.UNSELECTED,function(t,n,r){tools.apply(e.callback.onUnSelected,[n,r])})},_unbindEvent=function(e){var t=e.treeObj,n=consts.event;t.unbind(n.NODECREATED).unbind(n.CLICK).unbind(n.EXPAND).unbind(n.COLLAPSE).unbind(n.ASYNC_SUCCESS).unbind(n.ASYNC_ERROR).unbind(n.REMOVE).unbind(n.SELECTED).unbind(n.UNSELECTED)},_eventProxy=function(e){var t=e.target,n=data.getSetting(e.data.treeId),r="",i=null,s="",o="",u=null,a=null,f=null;tools.eqs(e.type,"mousedown")?o="mousedown":tools.eqs(e.type,"mouseup")?o="mouseup":tools.eqs(e.type,"contextmenu")?o="contextmenu":tools.eqs(e.type,"click")?tools.eqs(t.tagName,"span")&&t.getAttribute("treeNode"+consts.id.SWITCH)!==null?(r=tools.getNodeMainDom(t).id,s="switchNode"):(f=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),f&&(r=tools.getNodeMainDom(f).id,s="clickNode")):tools.eqs(e.type,"dblclick")&&(o="dblclick",f=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),f&&(r=tools.getNodeMainDom(f).id,s="switchNode")),o.length>0&&r.length==0&&(f=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),f&&(r=tools.getNodeMainDom(f).id));if(r.length>0){i=data.getNodeCache(n,r);switch(s){case"switchNode":i.isParent?tools.eqs(e.type,"click")||tools.eqs(e.type,"dblclick")&&tools.apply(n.view.dblClickExpand,[n.treeId,i],n.view.dblClickExpand)?u=handler.onSwitchNode:s="":s="";break;case"clickNode":u=handler.onClickNode}}switch(o){case"mousedown":a=handler.onZTreeMousedown;break;case"mouseup":a=handler.onZTreeMouseup;break;case"dblclick":a=handler.onZTreeDblclick;break;case"contextmenu":a=handler.onZTreeContextmenu}var l={stop:!1,node:i,nodeEventType:s,nodeEventCallback:u,treeEventType:o,treeEventCallback:a};return l},_initNode=function(e,t,n,r,i,s,o){if(!n)return;var u=data.getRoot(e),a=e.data.key.children;n.level=t,n.tId=e.treeId+"_"+ ++u.zId,n.parentTId=r?r.tId:null,n.open=typeof n.open=="string"?tools.eqs(n.open,"true"):!!n.open,n[a]&&n[a].length>0?(n.isParent=!0,n.zAsync=!0):(n.isParent=typeof n.isParent=="string"?tools.eqs(n.isParent,"true"):!!n.isParent,n.open=n.isParent&&!e.async.enable?n.open:!1,n.zAsync=!n.isParent),n.isFirstNode=i,n.isLastNode=s,n.getParentNode=function(){return data.getNodeCache(e,n.parentTId)},n.getPreNode=function(){return data.getPreNode(e,n)},n.getNextNode=function(){return data.getNextNode(e,n)},n.getIndex=function(){return data.getNodeIndex(e,n)},n.getPath=function(){return data.getNodePath(e,n)},n.isAjaxing=!1,data.fixPIdKeyValue(e,n)},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(e,t){data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=t},getNodeCacheId:function(e){return e.substring(e.lastIndexOf("_")+1)},addAfterA:function(e){_init.afterA.push(e)},addBeforeA:function(e){_init.beforeA.push(e)},addInnerAfterA:function(e){_init.innerAfterA.push(e)},addInnerBeforeA:function(e){_init.innerBeforeA.push(e)},addInitBind:function(e){_init.bind.push(e)},addInitUnBind:function(e){_init.unbind.push(e)},addInitCache:function(e){_init.caches.push(e)},addInitNode:function(e){_init.nodes.push(e)},addInitProxy:function(e,t){t?_init.proxys.splice(0,0,e):_init.proxys.push(e)},addInitRoot:function(e){_init.roots.push(e)},addNodesData:function(e,t,n,r){var i=e.data.key.children,s;t[i]?n>=t[i].length&&(n=-1):(t[i]=[],n=-1),t[i].length>0&&n===0?(t[i][0].isFirstNode=!1,view.setNodeLineIcos(e,t[i][0])):t[i].length>0&&n<0&&(t[i][t[i].length-1].isLastNode=!1,view.setNodeLineIcos(e,t[i][t[i].length-1])),t.isParent=!0,n<0?t[i]=t[i].concat(r):(s=[n,0].concat(r),t[i].splice.apply(t[i],s))},addSelectedNode:function(e,t){var n=data.getRoot(e);data.isSelectedNode(e,t)||n.curSelectedList.push(t)},addCreatedNode:function(e,t){if(!!e.callback.onNodeCreated||!!e.view.addDiyDom){var n=data.getRoot(e);n.createdNodes.push(t)}},addZTreeTools:function(e){_init.zTreeTools.push(e)},exSetting:function(e){$.extend(!0,_setting,e)},fixPIdKeyValue:function(e,t){e.data.simpleData.enable&&(t[e.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[e.data.simpleData.idKey]:e.data.simpleData.rootPId)},getAfterA:function(e,t,n){for(var r=0,i=_init.afterA.length;r<i;r++)_init.afterA[r].apply(this,arguments)},getBeforeA:function(e,t,n){for(var r=0,i=_init.beforeA.length;r<i;r++)_init.beforeA[r].apply(this,arguments)},getInnerAfterA:function(e,t,n){for(var r=0,i=_init.innerAfterA.length;r<i;r++)_init.innerAfterA[r].apply(this,arguments)},getInnerBeforeA:function(e,t,n){for(var r=0,i=_init.innerBeforeA.length;r<i;r++)_init.innerBeforeA[r].apply(this,arguments)},getCache:function(e){return caches[e.treeId]},getNodeIndex:function(e,t){if(!t)return null;var n=e.data.key.children,r=t.parentTId?t.getParentNode():data.getRoot(e);for(var i=0,s=r[n].length-1;i<=s;i++)if(r[n][i]===t)return i;return-1},getNextNode:function(e,t){if(!t)return null;var n=e.data.key.children,r=t.parentTId?t.getParentNode():data.getRoot(e);for(var i=0,s=r[n].length-1;i<=s;i++)if(r[n][i]===t)return i==s?null:r[n][i+1];return null},getNodeByParam:function(e,t,n,r){if(!t||!n)return null;var i=e.data.key.children;for(var s=0,o=t.length;s<o;s++){if(t[s][n]==r)return t[s];var u=data.getNodeByParam(e,t[s][i],n,r);if(u)return u}return null},getNodeCache:function(e,t){if(!t)return null;var n=caches[e.treeId].nodes[data.getNodeCacheId(t)];return n?n:null},getNodeName:function(e,t){var n=e.data.key.name;return""+t[n]},getNodePath:function(e,t){if(!t)return null;var n;return t.parentTId?n=t.getParentNode().getPath():n=[],n&&n.push(t),n},getNodeTitle:function(e,t){var n=e.data.key.title===""?e.data.key.name:e.data.key.title;return""+t[n]},getNodes:function(e){return data.getRoot(e)[e.data.key.children]},getNodesByParam:function(e,t,n,r){if(!t||!n)return[];var i=e.data.key.children,s=[];for(var o=0,u=t.length;o<u;o++)t[o][n]==r&&s.push(t[o]),s=s.concat(data.getNodesByParam(e,t[o][i],n,r));return s},getNodesByParamFuzzy:function(e,t,n,r){if(!t||!n)return[];var i=e.data.key.children,s=[];r=r.toLowerCase();for(var o=0,u=t.length;o<u;o++)typeof t[o][n]=="string"&&t[o][n].toLowerCase().indexOf(r)>-1&&s.push(t[o]),s=s.concat(data.getNodesByParamFuzzy(e,t[o][i],n,r));return s},getNodesByFilter:function(e,t,n,r,i){if(!t)return r?null:[];var s=e.data.key.children,o=r?null:[];for(var u=0,a=t.length;u<a;u++){if(tools.apply(n,[t[u],i],!1)){if(r)return t[u];o.push(t[u])}var f=data.getNodesByFilter(e,t[u][s],n,r,i);if(r&&!!f)return f;o=r?f:o.concat(f)}return o},getPreNode:function(e,t){if(!t)return null;var n=e.data.key.children,r=t.parentTId?t.getParentNode():data.getRoot(e);for(var i=0,s=r[n].length;i<s;i++)if(r[n][i]===t)return i==0?null:r[n][i-1];return null},getRoot:function(e){return e?roots[e.treeId]:null},getRoots:function(){return roots},getSetting:function(e){return settings[e]},getSettings:function(){return settings},getZTreeTools:function(e){var t=this.getRoot(this.getSetting(e));return t?t.treeTools:null},initCache:function(e){for(var t=0,n=_init.caches.length;t<n;t++)_init.caches[t].apply(this,arguments)},initNode:function(e,t,n,r,i,s){for(var o=0,u=_init.nodes.length;o<u;o++)_init.nodes[o].apply(this,arguments)},initRoot:function(e){for(var t=0,n=_init.roots.length;t<n;t++)_init.roots[t].apply(this,arguments)},isSelectedNode:function(e,t){var n=data.getRoot(e);for(var r=0,i=n.curSelectedList.length;r<i;r++)if(t===n.curSelectedList[r])return!0;return!1},removeNodeCache:function(e,t){var n=e.data.key.children;if(t[n])for(var r=0,i=t[n].length;r<i;r++)arguments.callee(e,t[n][r]);data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=null},removeSelectedNode:function(e,t){var n=data.getRoot(e);for(var r=0,i=n.curSelectedList.length;r<i;r++)if(t===n.curSelectedList[r]||!data.getNodeCache(e,n.curSelectedList[r].tId))n.curSelectedList.splice(r,1),e.treeObj.trigger(consts.event.UNSELECTED,[e.treeId,t]),r--,i--},setCache:function(e,t){caches[e.treeId]=t},setRoot:function(e,t){roots[e.treeId]=t},setZTreeTools:function(e,t){for(var n=0,r=_init.zTreeTools.length;n<r;n++)_init.zTreeTools[n].apply(this,arguments)},transformToArrayFormat:function(e,t){if(!t)return[];var n=e.data.key.children,r=[];if(tools.isArray(t))for(var i=0,s=t.length;i<s;i++)r.push(t[i]),t[i][n]&&(r=r.concat(data.transformToArrayFormat(e,t[i][n])));else r.push(t),t[n]&&(r=r.concat(data.transformToArrayFormat(e,t[n])));return r},transformTozTreeFormat:function(e,t){var n,r,i=e.data.simpleData.idKey,s=e.data.simpleData.pIdKey,o=e.data.key.children;if(!i||i==""||!t)return[];if(tools.isArray(t)){var u=[],a=[];for(n=0,r=t.length;n<r;n++)a[t[n][i]]=t[n];for(n=0,r=t.length;n<r;n++)a[t[n][s]]&&t[n][i]!=t[n][s]?(a[t[n][s]][o]||(a[t[n][s]][o]=[]),a[t[n][s]][o].push(t[n])):u.push(t[n]);return u}return[t]}},event={bindEvent:function(e){for(var t=0,n=_init.bind.length;t<n;t++)_init.bind[t].apply(this,arguments)},unbindEvent:function(e){for(var t=0,n=_init.unbind.length;t<n;t++)_init.unbind[t].apply(this,arguments)},bindTree:function(e){var t={treeId:e.treeId},n=e.treeObj;e.view.txtSelectedEnable||n.bind("selectstart",handler.onSelectStart).css({"-moz-user-select":"-moz-none"}),n.bind("click",t,event.proxy),n.bind("dblclick",t,event.proxy),n.bind("mouseover",t,event.proxy),n.bind("mouseout",t,event.proxy),n.bind("mousedown",t,event.proxy),n.bind("mouseup",t,event.proxy),n.bind("contextmenu",t,event.proxy)},unbindTree:function(e){var t=e.treeObj;t.unbind("selectstart",handler.onSelectStart).unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(e){var t=[];for(var n=0,r=_init.proxys.length;n<r;n++){var i=_init.proxys[n].apply(this,arguments);t.push(i);if(i.stop)break}return t},proxy:function(e){var t=data.getSetting(e.data.treeId);if(!tools.uCanDo(t,e))return!0;var n=event.doProxy(e),r=!0,i=!1;for(var s=0,o=n.length;s<o;s++){var u=n[s];u.nodeEventCallback&&(i=!0,r=u.nodeEventCallback.apply(u,[e,u.node])&&r),u.treeEventCallback&&(i=!0,r=u.treeEventCallback.apply(u,[e,u.node])&&r)}return r}},handler={onSwitchNode:function(e,t){var n=data.getSetting(e.data.treeId);if(t.open){if(tools.apply(n.callback.beforeCollapse,[n.treeId,t],true)==0)return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,t)}else{if(tools.apply(n.callback.beforeExpand,[n.treeId,t],true)==0)return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,t)}return!0},onClickNode:function(e,t){var n=data.getSetting(e.data.treeId),r=n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&data.isSelectedNode(n,t)?0:n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&n.view.selectedMulti?2:1;return tools.apply(n.callback.beforeClick,[n.treeId,t,r],true)==0?!0:(r===0?view.cancelPreSelectedNode(n,t):view.selectNode(n,t,r===2),n.treeObj.trigger(consts.event.CLICK,[e,n.treeId,t,r]),!0)},onZTreeMousedown:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeMouseDown,[n.treeId,t],!0)&&tools.apply(n.callback.onMouseDown,[e,n.treeId,t]),!0},onZTreeMouseup:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeMouseUp,[n.treeId,t],!0)&&tools.apply(n.callback.onMouseUp,[e,n.treeId,t]),!0},onZTreeDblclick:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeDblClick,[n.treeId,t],!0)&&tools.apply(n.callback.onDblClick,[e,n.treeId,t]),!0},onZTreeContextmenu:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeRightClick,[n.treeId,t],!0)&&tools.apply(n.callback.onRightClick,[e,n.treeId,t]),typeof n.callback.onRightClick!="function"},onSelectStart:function(e){var t=e.originalEvent.srcElement.nodeName.toLowerCase();return t==="input"||t==="textarea"}},tools={apply:function(e,t,n){return typeof e=="function"?e.apply(zt,t?t:[]):n},canAsync:function(e,t){var n=e.data.key.children;return e.async.enable&&t&&t.isParent&&!(t.zAsync||t[n]&&t[n].length>0)},clone:function(e){if(e===null)return null;var t=tools.isArray(e)?[]:{};for(var n in e)t[n]=e[n]instanceof Date?new Date(e[n].getTime()):typeof e[n]=="object"?arguments.callee(e[n]):e[n];return t},eqs:function(e,t){return e.toLowerCase()===t.toLowerCase()},isArray:function(e){return Object.prototype.toString.apply(e)==="[object Array]"},$:function(e,t,n){return!!t&&typeof t!="string"&&(n=t,t=""),typeof e=="string"?$(e,n?n.treeObj.get(0).ownerDocument:null):$("#"+e.tId+t,n?n.treeObj:null)},getMDom:function(e,t,n){if(!t)return null;while(t&&t.id!==e.treeId){for(var r=0,i=n.length;t.tagName&&r<i;r++)if(tools.eqs(t.tagName,n[r].tagName)&&t.getAttribute(n[r].attrName)!==null)return t;t=t.parentNode}return null},getNodeMainDom:function(e){return $(e).parent("li").get(0)||$(e).parentsUntil("li").parent().get(0)},isChildOrSelf:function(e,t){return $(e).closest("#"+t).length>0},uCanDo:function(e,t){return!0}},view={addNodes:function(e,t,n,r,i){if(e.data.keep.leaf&&t&&!t.isParent)return;tools.isArray(r)||(r=[r]),e.data.simpleData.enable&&(r=data.transformTozTreeFormat(e,r));if(t){var s=$$(t,consts.id.SWITCH,e),o=$$(t,consts.id.ICON,e),u=$$(t,consts.id.UL,e);t.open||(view.replaceSwitchClass(t,s,consts.folder.CLOSE),view.replaceIcoClass(t,o,consts.folder.CLOSE),t.open=!1,u.css({display:"none"})),data.addNodesData(e,t,n,r),view.createNodes(e,t.level+1,r,t,n),i||view.expandCollapseParentNode(e,t,!0)}else data.addNodesData(e,data.getRoot(e),n,r),view.createNodes(e,0,r,null,n)},appendNodes:function(e,t,n,r,i,s,o){if(!n)return[];var u=[],a=e.data.key.children,f=r?r:data.getRoot(e),l=f[a],c,h;if(!l||i>=l.length)i=-1;for(var p=0,d=n.length;p<d;p++){var v=n[p];s&&(c=(i===0||l.length==n.length)&&p==0,h=i<0&&p==n.length-1,data.initNode(e,t,v,r,c,h,o),data.addNodeCache(e,v));var m=[];v[a]&&v[a].length>0&&(m=view.appendNodes(e,t+1,v[a],v,-1,s,o&&v.open)),o&&(view.makeDOMNodeMainBefore(u,e,v),view.makeDOMNodeLine(u,e,v),data.getBeforeA(e,v,u),view.makeDOMNodeNameBefore(u,e,v),data.getInnerBeforeA(e,v,u),view.makeDOMNodeIcon(u,e,v),data.getInnerAfterA(e,v,u),view.makeDOMNodeNameAfter(u,e,v),data.getAfterA(e,v,u),v.isParent&&v.open&&view.makeUlHtml(e,v,u,m.join("")),view.makeDOMNodeMainAfter(u,e,v),data.addCreatedNode(e,v))}return u},appendParentULDom:function(e,t){var n=[],r=$$(t,e);!r.get(0)&&!!t.parentTId&&(view.appendParentULDom(e,t.getParentNode()),r=$$(t,e));var i=$$(t,consts.id.UL,e);i.get(0)&&i.remove();var s=e.data.key.children,o=view.appendNodes(e,t.level+1,t[s],t,-1,!1,!0);view.makeUlHtml(e,t,n,o.join("")),r.append(n.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l;if(node&&!node.isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(tools.apply(setting.callback.beforeAsync,[setting.treeId,node],true)==0)return tools.apply(callback),!1;if(node){node.isAjaxing=!0;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:"","class":consts.className.BUTTON+" "+consts.className.ICO_LOADING})}var tmpParam={};for(i=0,l=setting.async.autoParam.length;node&&i<l;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;pKey.length>1&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}if(tools.isArray(setting.async.otherParam))for(i=0,l=setting.async.otherParam.length;i<l;i+=2)tmpParam[setting.async.otherParam[i]]=setting.async.otherParam[i+1];else for(var p in setting.async.otherParam)tmpParam[p]=setting.async.otherParam[p];var _tmpV=data.getRoot(setting)._ver;return $.ajax({contentType:setting.async.contentType,cache:!1,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:tmpParam,dataType:setting.async.dataType,success:function(msg){if(_tmpV!=data.getRoot(setting)._ver)return;var newNodes=[];try{!msg||msg.length==0?newNodes=[]:typeof msg=="string"?newNodes=eval("("+msg+")"):newNodes=msg}catch(err){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&newNodes!==""?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,-1,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,-1,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)},error:function(e,t,n){if(_tmpV!=data.getRoot(setting)._ver)return;node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,e,t,n])}}),!0},cancelPreSelectedNode:function(e,t,n){var r=data.getRoot(e).curSelectedList,i,s;for(i=r.length-1;i>=0;i--){s=r[i];if(t===s||!t&&(!n||n!==s)){$$(s,consts.id.A,e).removeClass(consts.node.CURSELECTED);if(t){data.removeSelectedNode(e,t);break}r.splice(i,1),e.treeObj.trigger(consts.event.UNSELECTED,[e.treeId,s])}}},createNodeCallback:function(e){if(!!e.callback.onNodeCreated||!!e.view.addDiyDom){var t=data.getRoot(e);while(t.createdNodes.length>0){var n=t.createdNodes.shift();tools.apply(e.view.addDiyDom,[e.treeId,n]),!e.callback.onNodeCreated||e.treeObj.trigger(consts.event.NODECREATED,[e.treeId,n])}}},createNodes:function(e,t,n,r,i){if(!n||n.length==0)return;var s=data.getRoot(e),o=e.data.key.children,u=!r||r.open||!!$$(r[o][0],e).get(0);s.createdNodes=[];var a=view.appendNodes(e,t,n,r,i,!0,u),f,l;if(!r)f=e.treeObj;else{var c=$$(r,consts.id.UL,e);c.get(0)&&(f=c)}f&&(i>=0&&(l=f.children()[i]),i>=0&&l?$(l).before(a.join("")):f.append(a.join(""))),view.createNodeCallback(e)},destroy:function(e){if(!e)return;data.initCache(e),data.initRoot(e),event.unbindTree(e),event.unbindEvent(e),e.treeObj.empty(),delete settings[e.treeId]},expandCollapseNode:function(e,t,n,r,i){var s=data.getRoot(e),o=e.data.key.children;if(!t){tools.apply(i,[]);return}if(s.expandTriggerFlag){var u=i;i=function(){u&&u(),t.open?e.treeObj.trigger(consts.event.EXPAND,[e.treeId,t]):e.treeObj.trigger(consts.event.COLLAPSE,[e.treeId,t])},s.expandTriggerFlag=!1}!t.open&&t.isParent&&(!$$(t,consts.id.UL,e).get(0)||t[o]&&t[o].length>0&&!$$(t[o][0],e).get(0))&&(view.appendParentULDom(e,t),view.createNodeCallback(e));if(t.open==n){tools.apply(i,[]);return}var a=$$(t,consts.id.UL,e),f=$$(t,consts.id.SWITCH,e),l=$$(t,consts.id.ICON,e);t.isParent?(t.open=!t.open,t.iconOpen&&t.iconClose&&l.attr("style",view.makeNodeIcoStyle(e,t)),t.open?(view.replaceSwitchClass(t,f,consts.folder.OPEN),view.replaceIcoClass(t,l,consts.folder.OPEN),r==0||e.view.expandSpeed==""?(a.show(),tools.apply(i,[])):t[o]&&t[o].length>0?a.slideDown(e.view.expandSpeed,i):(a.show(),tools.apply(i,[]))):(view.replaceSwitchClass(t,f,consts.folder.CLOSE),view.replaceIcoClass(t,l,consts.folder.CLOSE),r==0||e.view.expandSpeed==""||!(t[o]&&t[o].length>0)?(a.hide(),tools.apply(i,[])):a.slideUp(e.view.expandSpeed,i))):tools.apply(i,[])},expandCollapseParentNode:function(e,t,n,r,i){if(!t)return;if(!t.parentTId){view.expandCollapseNode(e,t,n,r,i);return}view.expandCollapseNode(e,t,n,r),t.parentTId&&view.expandCollapseParentNode(e,t.getParentNode(),n,r,i)},expandCollapseSonNode:function(e,t,n,r,i){var s=data.getRoot(e),o=e.data.key.children,u=t?t[o]:s[o],a=t?!1:r,f=data.getRoot(e).expandTriggerFlag;data.getRoot(e).expandTriggerFlag=!1;if(u)for(var l=0,c=u.length;l<c;l++)u[l]&&view.expandCollapseSonNode(e,u[l],n,a);data.getRoot(e).expandTriggerFlag=f,view.expandCollapseNode(e,t,n,r,i)},isSelectedNode:function(e,t){if(!t)return!1;var n=data.getRoot(e).curSelectedList,r;for(r=n.length-1;r>=0;r--)if(t===n[r])return!0;return!1},makeDOMNodeIcon:function(e,t,n){var r=data.getNodeName(t,n),i=t.view.nameIsHTML?r:r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");e.push("<span id='",n.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(t,n),"' style='",view.makeNodeIcoStyle(t,n),"'></span><span id='",n.tId,consts.id.SPAN,"' class='",consts.className.NAME,"'>",i,"</span>")},makeDOMNodeLine:function(e,t,n){e.push("<span id='",n.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(t,n),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(e,t,n){e.push("</li>")},makeDOMNodeMainBefore:function(e,t,n){e.push("<li id='",n.tId,"' class='",consts.className.LEVEL,n.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(e,t,n){e.push("</a>")},makeDOMNodeNameBefore:function(e,t,n){var r=data.getNodeTitle(t,n),i=view.makeNodeUrl(t,n),s=view.makeNodeFontCss(t,n),o=[];for(var u in s)o.push(u,":",s[u],";");e.push("<a id='",n.tId,consts.id.A,"' class='",consts.className.LEVEL,n.level,"' treeNode",consts.id.A,' onclick="',n.click||"",'" ',i!=null&&i.length>0?"href='"+i+"'":""," target='",view.makeNodeTarget(n),"' style='",o.join(""),"'"),tools.apply(t.view.showTitle,[t.treeId,n],t.view.showTitle)&&r&&e.push("title='",r.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),e.push(">")},makeNodeFontCss:function(e,t){var n=tools.apply(e.view.fontCss,[e.treeId,t],e.view.fontCss);return n&&typeof n!="function"?n:{}},makeNodeIcoClass:function(e,t){var n=["ico"];return t.isAjaxing||(n[0]=(t.iconSkin?t.iconSkin+"_":"")+n[0],t.isParent?n.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):n.push(consts.folder.DOCU)),consts.className.BUTTON+" "+n.join("_")},makeNodeIcoStyle:function(e,t){var n=[];if(!t.isAjaxing){var r=t.isParent&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t[e.data.key.icon];r&&n.push("background:url(",r,") 0 0 no-repeat;"),(e.view.showIcon==0||!tools.apply(e.view.showIcon,[e.treeId,t],!0))&&n.push("width:0px;height:0px;")}return n.join("")},makeNodeLineClass:function(e,t){var n=[];return e.view.showLine?t.level==0&&t.isFirstNode&&t.isLastNode?n.push(consts.line.ROOT):t.level==0&&t.isFirstNode?n.push(consts.line.ROOTS):t.isLastNode?n.push(consts.line.BOTTOM):n.push(consts.line.CENTER):n.push(consts.line.NOLINE),t.isParent?n.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):n.push(consts.folder.DOCU),view.makeNodeLineClassEx(t)+n.join("_")},makeNodeLineClassEx:function(e){return consts.className.BUTTON+" "+consts.className.LEVEL+e.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(e){return e.target||"_blank"},makeNodeUrl:function(e,t){var n=e.data.key.url;return t[n]?t[n]:null},makeUlHtml:function(e,t,n,r){n.push("<ul id='",t.tId,consts.id.UL,"' class='",consts.className.LEVEL,t.level," ",view.makeUlLineClass(e,t),"' style='display:",t.open?"block":"none","'>"),n.push(r),n.push("</ul>")},makeUlLineClass:function(e,t){return e.view.showLine&&!t.isLastNode?consts.line.LINE:""},removeChildNodes:function(e,t){if(!t)return;var n=e.data.key.children,r=t[n];if(!r)return;for(var i=0,s=r.length;i<s;i++)data.removeNodeCache(e,r[i]);data.removeSelectedNode(e),delete t[n];if(!e.data.keep.parent){t.isParent=!1,t.open=!1;var o=$$(t,consts.id.SWITCH,e),u=$$(t,consts.id.ICON,e);view.replaceSwitchClass(t,o,consts.folder.DOCU),view.replaceIcoClass(t,u,consts.folder.DOCU),$$(t,consts.id.UL,e).remove()}else $$(t,consts.id.UL,e).empty()},setFirstNode:function(e,t){var n=e.data.key.children,r=t[n].length;r>0&&(t[n][0].isFirstNode=!0)},setLastNode:function(e,t){var n=e.data.key.children,r=t[n].length;r>0&&(t[n][r-1].isLastNode=!0)},removeNode:function(e,t){var n=data.getRoot(e),r=e.data.key.children,i=t.parentTId?t.getParentNode():n;t.isFirstNode=!1,t.isLastNode=!1,t.getPreNode=function(){return null},t.getNextNode=function(){return null};if(!data.getNodeCache(e,t.tId))return;$$(t,e).remove(),data.removeNodeCache(e,t),data.removeSelectedNode(e,t);for(var s=0,o=i[r].length;s<o;s++)if(i[r][s].tId==t.tId){i[r].splice(s,1);break}view.setFirstNode(e,i),view.setLastNode(e,i);var u,a,f,l=i[r].length;if(!e.data.keep.parent&&l==0)i.isParent=!1,i.open=!1,u=$$(i,consts.id.UL,e),a=$$(i,consts.id.SWITCH,e),f=$$(i,consts.id.ICON,e),view.replaceSwitchClass(i,a,consts.folder.DOCU),view.replaceIcoClass(i,f,consts.folder.DOCU),u.css("display","none");else if(e.view.showLine&&l>0){var c=i[r][l-1];u=$$(c,consts.id.UL,e),a=$$(c,consts.id.SWITCH,e),f=$$(c,consts.id.ICON,e);if(i==n)if(i[r].length==1)view.replaceSwitchClass(c,a,consts.line.ROOT);else{var h=$$(i[r][0],consts.id.SWITCH,e);view.replaceSwitchClass(i[r][0],h,consts.line.ROOTS),view.replaceSwitchClass(c,a,consts.line.BOTTOM)}else view.replaceSwitchClass(c,a,consts.line.BOTTOM);u.removeClass(consts.line.LINE)}},replaceIcoClass:function(e,t,n){if(!t||e.isAjaxing)return;var r=t.attr("class");if(r==undefined)return;var i=r.split("_");switch(n){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:i[i.length-1]=n}t.attr("class",i.join("_"))},replaceSwitchClass:function(e,t,n){if(!t)return;var r=t.attr("class");if(r==undefined)return;var i=r.split("_");switch(n){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:i[0]=view.makeNodeLineClassEx(e)+n;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:i[1]=n}t.attr("class",i.join("_")),n!==consts.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")},selectNode:function(e,t,n){n||view.cancelPreSelectedNode(e,null,t),$$(t,consts.id.A,e).addClass(consts.node.CURSELECTED),data.addSelectedNode(e,t),e.treeObj.trigger(consts.event.SELECTED,[e.treeId,t])},setNodeFontCss:function(e,t){var n=$$(t,consts.id.A,e),r=view.makeNodeFontCss(e,t);r&&n.css(r)},setNodeLineIcos:function(e,t){if(!t)return;var n=$$(t,consts.id.SWITCH,e),r=$$(t,consts.id.UL,e),i=$$(t,consts.id.ICON,e),s=view.makeUlLineClass(e,t);s.length==0?r.removeClass(consts.line.LINE):r.addClass(s),n.attr("class",view.makeNodeLineClass(e,t)),t.isParent?n.removeAttr("disabled"):n.attr("disabled","disabled"),i.removeAttr("style"),i.attr("style",view.makeNodeIcoStyle(e,t)),i.attr("class",view.makeNodeIcoClass(e,t))},setNodeName:function(e,t){var n=data.getNodeTitle(e,t),r=$$(t,consts.id.SPAN,e);r.empty(),e.view.nameIsHTML?r.html(data.getNodeName(e,t)):r.text(data.getNodeName(e,t));if(tools.apply(e.view.showTitle,[e.treeId,t],e.view.showTitle)){var i=$$(t,consts.id.A,e);i.attr("title",n?n:"")}},setNodeTarget:function(e,t){var n=$$(t,consts.id.A,e);n.attr("target",view.makeNodeTarget(t))},setNodeUrl:function(e,t){var n=$$(t,consts.id.A,e),r=view.makeNodeUrl(e,t);r==null||r.length==0?n.removeAttr("href"):n.attr("href",r)},switchNode:function(e,t){if(t.open||!tools.canAsync(e,t))view.expandCollapseNode(e,t,!t.open);else if(e.async.enable){if(!view.asyncNode(e,t)){view.expandCollapseNode(e,t,!t.open);return}}else t&&view.expandCollapseNode(e,t,!t.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(e){var t=data.getZTreeTools(e);return t?t:null},destroy:function(e){if(!!e&&e.length>0)view.destroy(data.getSetting(e));else for(var t in settings)view.destroy(settings[t])},init:function(e,t,n){var r=tools.clone(_setting);$.extend(!0,r,t),r.treeId=e.attr("id"),r.treeObj=e,r.treeObj.empty(),settings[r.treeId]=r,typeof document.body.style.maxHeight=="undefined"&&(r.view.expandSpeed=""),data.initRoot(r);var i=data.getRoot(r),s=r.data.key.children;n=n?tools.clone(tools.isArray(n)?n:[n]):[],r.data.simpleData.enable?i[s]=data.transformTozTreeFormat(r,n):i[s]=n,data.initCache(r),event.unbindTree(r),event.bindTree(r),event.unbindEvent(r),event.bindEvent(r);var o={setting:r,addNodes:function(e,t,n,i){function u(){view.addNodes(r,e,t,o,i==1)}e||(e=null);if(e&&!e.isParent&&r.data.keep.leaf)return null;var s=parseInt(t,10);isNaN(s)?(i=!!n,n=t,t=-1):t=s;if(!n)return null;var o=tools.clone(tools.isArray(n)?n:[n]);return tools.canAsync(r,e)?view.asyncNode(r,e,i,u):u(),o},cancelSelectedNode:function(e){view.cancelPreSelectedNode(r,e)},destroy:function(){view.destroy(r)},expandAll:function(e){return e=!!e,view.expandCollapseSonNode(r,null,e,!0),e},expandNode:function(e,t,n,i,s){if(!e||!e.isParent)return null;t!==!0&&t!==!1&&(t=!e.open),s=!!s;if(s&&t&&tools.apply(r.callback.beforeExpand,[r.treeId,e],true)==0)return null;if(s&&!t&&tools.apply(r.callback.beforeCollapse,[r.treeId,e],true)==0)return null;t&&e.parentTId&&view.expandCollapseParentNode(r,e.getParentNode(),t,!1);if(t===e.open&&!n)return null;data.getRoot(r).expandTriggerFlag=s;if(!tools.canAsync(r,e)&&n)view.expandCollapseSonNode(r,e,t,!0,function(){if(i!==!1)try{$$(e,r).focus().blur()}catch(t){}});else{e.open=!t,view.switchNode(this.setting,e);if(i!==!1)try{$$(e,r).focus().blur()}catch(o){}}return t},getNodes:function(){return data.getNodes(r)},getNodeByParam:function(e,t,n){return e?data.getNodeByParam(r,n?n[r.data.key.children]:data.getNodes(r),e,t):null},getNodeByTId:function(e){return data.getNodeCache(r,e)},getNodesByParam:function(e,t,n){return e?data.getNodesByParam(r,n?n[r.data.key.children]:data.getNodes(r),e,t):null},getNodesByParamFuzzy:function(e,t,n){return e?data.getNodesByParamFuzzy(r,n?n[r.data.key.children]:data.getNodes(r),e,t):null},getNodesByFilter:function(e,t,n,i){return t=!!t,!e||typeof e!="function"?t?null:[]:data.getNodesByFilter(r,n?n[r.data.key.children]:data.getNodes(r),e,t,i)},getNodeIndex:function(e){if(!e)return null;var t=r.data.key.children,n=e.parentTId?e.getParentNode():data.getRoot(r);for(var i=0,s=n[t].length;i<s;i++)if(n[t][i]==e)return i;return-1},getSelectedNodes:function(){var e=[],t=data.getRoot(r).curSelectedList;for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e},isSelectedNode:function(e){return data.isSelectedNode(r,e)},reAsyncChildNodes:function(e,t,n){if(!this.setting.async.enable)return;var i=!e;i&&(e=data.getRoot(r));if(t=="refresh"){var s=this.setting.data.key.children;for(var o=0,u=e[s]?e[s].length:0;o<u;o++)data.removeNodeCache(r,e[s][o]);data.removeSelectedNode(r),e[s]=[];if(i)this.setting.treeObj.empty();else{var a=$$(e,consts.id.UL,r);a.empty()}}view.asyncNode(this.setting,i?null:e,!!n)},refresh:function(){this.setting.treeObj.empty();var e=data.getRoot(r),t=e[r.data.key.children];data.initRoot(r),e[r.data.key.children]=t,data.initCache(r),view.createNodes(r,0,e[r.data.key.children],null,-1)},removeChildNodes:function(e){if(!e)return null;var t=r.data.key.children,n=e[t];return view.removeChildNodes(r,e),n?n:null},removeNode:function(e,t){if(!e)return;t=!!t;if(t&&tools.apply(r.callback.beforeRemove,[r.treeId,e],true)==0)return;view.removeNode(r,e),t&&this.setting.treeObj.trigger(consts.event.REMOVE,[r.treeId,e])},selectNode:function(e,t){if(!e)return;if(tools.uCanDo(r)){t=r.view.selectedMulti&&t;if(e.parentTId)view.expandCollapseParentNode(r,e.getParentNode(),!0,!1,function(){try{$$(e,r).focus().blur()}catch(t){}});else try{$$(e,r).focus().blur()}catch(n){}view.selectNode(r,e,t)}},transformTozTreeNodes:function(e){return data.transformTozTreeFormat(r,e)},transformToArray:function(e){return data.transformToArrayFormat(r,e)},updateNode:function(e,t){if(!e)return;var n=$$(e,r);n.get(0)&&tools.uCanDo(r)&&(view.setNodeName(r,e),view.setNodeTarget(r,e),view.setNodeUrl(r,e),view.setNodeLineIcos(r,e),view.setNodeFontCss(r,e))}};return i.treeTools=o,data.setZTreeTools(r,o),i[s]&&i[s].length>0?view.createNodes(r,0,i[s],null,-1):r.async.enable&&r.async.url&&r.async.url!==""&&view.asyncNode(r),o}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery),define("zTreeCore",function(){}),function(e){var t={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},n={check:{enable:!1,autoCheckTrigger:!1,chkStyle:t.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:t.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},r=function(e){var t=E.getRoot(e);t.radioCheckedList=[]},i=function(e){},s=function(e){var t=e.treeObj,n=b.event;t.bind(n.CHECK,function(t,n,r,i){t.srcEvent=n,y.apply(e.callback.onCheck,[t,r,i])})},o=function(e){var t=e.treeObj,n=b.event;t.unbind(n.CHECK)},u=function(e){var t=e.target,n=E.getSetting(e.data.treeId),r="",i=null,s="",o="",u=null,a=null;y.eqs(e.type,"mouseover")?n.check.enable&&y.eqs(t.tagName,"span")&&t.getAttribute("treeNode"+b.id.CHECK)!==null&&(r=y.getNodeMainDom(t).id,s="mouseoverCheck"):y.eqs(e.type,"mouseout")?n.check.enable&&y.eqs(t.tagName,"span")&&t.getAttribute("treeNode"+b.id.CHECK)!==null&&(r=y.getNodeMainDom(t).id,s="mouseoutCheck"):y.eqs(e.type,"click")&&n.check.enable&&y.eqs(t.tagName,"span")&&t.getAttribute("treeNode"+b.id.CHECK)!==null&&(r=y.getNodeMainDom(t).id,s="checkNode");if(r.length>0){i=E.getNodeCache(n,r);switch(s){case"checkNode":u=p.onCheckNode;break;case"mouseoverCheck":u=p.onMouseoverCheck;break;case"mouseoutCheck":u=p.onMouseoutCheck}}var f={stop:s==="checkNode",node:i,nodeEventType:s,nodeEventCallback:u,treeEventType:o,treeEventCallback:a};return f},a=function(e,t,n,r,i,s,o){if(!n)return;var u=e.data.key.checked;typeof n[u]=="string"&&(n[u]=y.eqs(n[u],"true")),n[u]=!!n[u],n.checkedOld=n[u],typeof n.nocheck=="string"&&(n.nocheck=y.eqs(n.nocheck,"true")),n.nocheck=!!n.nocheck||e.check.nocheckInherit&&r&&!!r.nocheck,typeof n.chkDisabled=="string"&&(n.chkDisabled=y.eqs(n.chkDisabled,"true")),n.chkDisabled=!!n.chkDisabled||e.check.chkDisabledInherit&&r&&!!r.chkDisabled,typeof n.halfCheck=="string"&&(n.halfCheck=y.eqs(n.halfCheck,"true")),n.halfCheck=!!n.halfCheck,n.check_Child_State=-1,n.check_Focus=!1,n.getCheckStatus=function(){return E.getCheckStatus(e,n)};if(e.check.chkStyle==b.radio.STYLE&&e.check.radioType==b.radio.TYPE_ALL&&n[u]){var a=E.getRoot(e);a.radioCheckedList.push(n)}},f=function(e,t,n){var r=e.data.key.checked;e.check.enable&&(E.makeChkFlag(e,t),n.push("<span ID='",t.tId,b.id.CHECK,"' class='",w.makeChkClass(e,t),"' treeNode",b.id.CHECK,t.nocheck===!0?" style='display:none;'":"","></span>"))},l=function(e,t){t.checkNode=function(e,t,n,r){var i=this.setting.data.key.checked;if(e.chkDisabled===!0)return;t!==!0&&t!==!1&&(t=!e[i]),r=!!r;if(e[i]===t&&!n)return;if(r&&y.apply(this.setting.callback.beforeCheck,[this.setting.treeId,e],true)==0)return;if(y.uCanDo(this.setting)&&this.setting.check.enable&&e.nocheck!==!0){e[i]=t;var s=x(e,b.id.CHECK,this.setting);(n||this.setting.check.chkStyle===b.radio.STYLE)&&w.checkNodeRelation(this.setting,e),w.setChkClass(this.setting,s,e),w.repairParentChkClassWithSelf(this.setting,e),r&&this.setting.treeObj.trigger(b.event.CHECK,[null,this.setting.treeId,e])}},t.checkAllNodes=function(e){w.repairAllChk(this.setting,!!e)},t.getCheckedNodes=function(e){var t=this.setting.data.key.children;return e=e!==!1,E.getTreeCheckedNodes(this.setting,E.getRoot(this.setting)[t],e)},t.getChangeCheckedNodes=function(){var e=this.setting.data.key.children;return E.getTreeChangeCheckedNodes(this.setting,E.getRoot(this.setting)[e])},t.setChkDisabled=function(e,t,n,r){t=!!t,n=!!n,r=!!r,w.repairSonChkDisabled(this.setting,e,t,r),w.repairParentChkDisabled(this.setting,e.getParentNode(),t,n)};var n=t.updateNode;t.updateNode=function(e,r){n&&n.apply(t,arguments);if(!e||!this.setting.check.enable)return;var i=x(e,this.setting);if(i.get(0)&&y.uCanDo(this.setting)){var s=x(e,b.id.CHECK,this.setting);(r==1||this.setting.check.chkStyle===b.radio.STYLE)&&w.checkNodeRelation(this.setting,e),w.setChkClass(this.setting,s,e),w.repairParentChkClassWithSelf(this.setting,e)}}},c={getRadioCheckedList:function(e){var t=E.getRoot(e).radioCheckedList;for(var n=0,r=t.length;n<r;n++)E.getNodeCache(e,t[n].tId)||(t.splice(n,1),n--,r--);return t},getCheckStatus:function(e,t){if(!e.check.enable||t.nocheck||t.chkDisabled)return null;var n=e.data.key.checked,r={checked:t[n],half:t.halfCheck?t.halfCheck:e.check.chkStyle==b.radio.STYLE?t.check_Child_State===2:t[n]?t.check_Child_State>-1&&t.check_Child_State<2:t.check_Child_State>0};return r},getTreeCheckedNodes:function(e,t,n,r){if(!t)return[];var i=e.data.key.children,s=e.data.key.checked,o=n&&e.check.chkStyle==b.radio.STYLE&&e.check.radioType==b.radio.TYPE_ALL;r=r?r:[];for(var u=0,a=t.length;u<a;u++){if(t[u].nocheck!==!0&&t[u].chkDisabled!==!0&&t[u][s]==n){r.push(t[u]);if(o)break}E.getTreeCheckedNodes(e,t[u][i],n,r);if(o&&r.length>0)break}return r},getTreeChangeCheckedNodes:function(e,t,n){if(!t)return[];var r=e.data.key.children,i=e.data.key.checked;n=n?n:[];for(var s=0,o=t.length;s<o;s++)t[s].nocheck!==!0&&t[s].chkDisabled!==!0&&t[s][i]!=t[s].checkedOld&&n.push(t[s]),E.getTreeChangeCheckedNodes(e,t[s][r],n);return n},makeChkFlag:function(e,t){if(!t)return;var n=e.data.key.children,r=e.data.key.checked,i=-1;if(t[n])for(var s=0,o=t[n].length;s<o;s++){var u=t[n][s],a=-1;if(e.check.chkStyle==b.radio.STYLE){u.nocheck===!0||u.chkDisabled===!0?a=u.check_Child_State:u.halfCheck===!0?a=2:u[r]?a=2:a=u.check_Child_State>0?2:0;if(a==2){i=2;break}a==0&&(i=0)}else if(e.check.chkStyle==b.checkbox.STYLE){u.nocheck===!0||u.chkDisabled===!0?a=u.check_Child_State:u.halfCheck===!0?a=1:u[r]?a=u.check_Child_State===-1||u.check_Child_State===2?2:1:a=u.check_Child_State>0?1:0;if(a===1){i=1;break}if(a===2&&i>-1&&s>0&&a!==i){i=1;break}if(i===2&&a>-1&&a<2){i=1;break}a>-1&&(i=a)}}t.check_Child_State=i}},h={},p={onCheckNode:function(e,t){if(t.chkDisabled===!0)return!1;var n=E.getSetting(e.data.treeId),r=n.data.key.checked;if(y.apply(n.callback.beforeCheck,[n.treeId,t],true)==0)return!0;t[r]=!t[r],w.checkNodeRelation(n,t);var i=x(t,b.id.CHECK,n);return w.setChkClass(n,i,t),w.repairParentChkClassWithSelf(n,t),n.treeObj.trigger(b.event.CHECK,[e,n.treeId,t]),!0},onMouseoverCheck:function(e,t){if(t.chkDisabled===!0)return!1;var n=E.getSetting(e.data.treeId),r=x(t,b.id.CHECK,n);return t.check_Focus=!0,w.setChkClass(n,r,t),!0},onMouseoutCheck:function(e,t){if(t.chkDisabled===!0)return!1;var n=E.getSetting(e.data.treeId),r=x(t,b.id.CHECK,n);return t.check_Focus=!1,w.setChkClass(n,r,t),!0}},d={},v={checkNodeRelation:function(e,t){var n,r,i,s=e.data.key.children,o=e.data.key.checked,u=b.radio;if(e.check.chkStyle==u.STYLE){var a=E.getRadioCheckedList(e);if(t[o])if(e.check.radioType==u.TYPE_ALL){for(r=a.length-1;r>=0;r--)n=a[r],n[o]&&n!=t&&(n[o]=!1,a.splice(r,1),w.setChkClass(e,x(n,b.id.CHECK,e),n),n.parentTId!=t.parentTId&&w.repairParentChkClassWithSelf(e,n));a.push(t)}else{var f=t.parentTId?t.getParentNode():E.getRoot(e);for(r=0,i=f[s].length;r<i;r++)n=f[s][r],n[o]&&n!=t&&(n[o]=!1,w.setChkClass(e,x(n,b.id.CHECK,e),n))}else if(e.check.radioType==u.TYPE_ALL)for(r=0,i=a.length;r<i;r++)if(t==a[r]){a.splice(r,1);break}}else t[o]&&(!t[s]||t[s].length==0||e.check.chkboxType.Y.indexOf("s")>-1)&&w.setSonNodeCheckBox(e,t,!0),!t[o]&&(!t[s]||t[s].length==0||e.check.chkboxType.N.indexOf("s")>-1)&&w.setSonNodeCheckBox(e,t,!1),t[o]&&e.check.chkboxType.Y.indexOf("p")>-1&&w.setParentNodeCheckBox(e,t,!0),!t[o]&&e.check.chkboxType.N.indexOf("p")>-1&&w.setParentNodeCheckBox(e,t,!1)},makeChkClass:function(e,t){var n=e.data.key.checked,r=b.checkbox,i=b.radio,s="";t.chkDisabled===!0?s=r.DISABLED:t.halfCheck?s=r.PART:e.check.chkStyle==i.STYLE?s=t.check_Child_State<1?r.FULL:r.PART:s=t[n]?t.check_Child_State===2||t.check_Child_State===-1?r.FULL:r.PART:t.check_Child_State<1?r.FULL:r.PART;var o=e.check.chkStyle+"_"+(t[n]?r.TRUE:r.FALSE)+"_"+s;return o=t.check_Focus&&t.chkDisabled!==!0?o+"_"+r.FOCUS:o,b.className.BUTTON+" "+r.DEFAULT+" "+o},repairAllChk:function(e,t){if(e.check.enable&&e.check.chkStyle===b.checkbox.STYLE){var n=e.data.key.checked,r=e.data.key.children,i=E.getRoot(e);for(var s=0,o=i[r].length;s<o;s++){var u=i[r][s];u.nocheck!==!0&&u.chkDisabled!==!0&&(u[n]=t),w.setSonNodeCheckBox(e,u,t)}}},repairChkClass:function(e,t){if(!t)return;E.makeChkFlag(e,t);if(t.nocheck!==!0){var n=x(t,b.id.CHECK,e);w.setChkClass(e,n,t)}},repairParentChkClass:function(e,t){if(!t||!t.parentTId)return;var n=t.getParentNode();w.repairChkClass(e,n),w.repairParentChkClass(e,n)},repairParentChkClassWithSelf:function(e,t){if(!t)return;var n=e.data.key.children;t[n]&&t[n].length>0?w.repairParentChkClass(e,t[n][0]):w.repairParentChkClass(e,t)},repairSonChkDisabled:function(e,t,n,r){if(!t)return;var i=e.data.key.children;t.chkDisabled!=n&&(t.chkDisabled=n),w.repairChkClass(e,t);if(t[i]&&r)for(var s=0,o=t[i].length;s<o;s++){var u=t[i][s];w.repairSonChkDisabled(e,u,n,r)}},repairParentChkDisabled:function(e,t,n,r){if(!t)return;t.chkDisabled!=n&&r&&(t.chkDisabled=n),w.repairChkClass(e,t),w.repairParentChkDisabled(e,t.getParentNode(),n,r)},setChkClass:function(e,t,n){if(!t)return;n.nocheck===!0?t.hide():t.show(),t.attr("class",w.makeChkClass(e,n))},setParentNodeCheckBox:function(e,t,n,r){var i=e.data.key.children,s=e.data.key.checked,o=x(t,b.id.CHECK,e);r||(r=t),E.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0&&(t[s]=n,w.setChkClass(e,o,t),e.check.autoCheckTrigger&&t!=r&&e.treeObj.trigger(b.event.CHECK,[null,e.treeId,t]));if(t.parentTId){var u=!0;if(!n){var a=t.getParentNode()[i];for(var f=0,l=a.length;f<l;f++)if(a[f].nocheck!==!0&&a[f].chkDisabled!==!0&&a[f][s]||(a[f].nocheck===!0||a[f].chkDisabled===!0)&&a[f].check_Child_State>0){u=!1;break}}u&&w.setParentNodeCheckBox(e,t.getParentNode(),n,r)}},setSonNodeCheckBox:function(e,t,n,r){if(!t)return;var i=e.data.key.children,s=e.data.key.checked,o=x(t,b.id.CHECK,e);r||(r=t);var u=!1;if(t[i])for(var a=0,f=t[i].length;a<f&&t.chkDisabled!==!0;a++){var l=t[i][a];w.setSonNodeCheckBox(e,l,n,r),l.chkDisabled===!0&&(u=!0)}t!=E.getRoot(e)&&t.chkDisabled!==!0&&(u&&t.nocheck!==!0&&E.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0?(t[s]=n,u||(t.check_Child_State=t[i]&&t[i].length>0?n?2:0:-1)):t.check_Child_State=-1,w.setChkClass(e,o,t),e.check.autoCheckTrigger&&t!=r&&t.nocheck!==!0&&t.chkDisabled!==!0&&e.treeObj.trigger(b.event.CHECK,[null,e.treeId,t]))}},m={tools:d,view:v,event:h,data:c};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,m);var g=e.fn.zTree,y=g._z.tools,b=g.consts,w=g._z.view,E=g._z.data,S=g._z.event,x=y.$;E.exSetting(n),E.addInitBind(s),E.addInitUnBind(o),E.addInitCache(i),E.addInitNode(a),E.addInitProxy(u,!0),E.addInitRoot(r),E.addBeforeA(f),E.addZTreeTools(l);var T=w.createNodes;w.createNodes=function(e,t,n,r,i){T&&T.apply(w,arguments);if(!n)return;w.repairParentChkClassWithSelf(e,r)};var N=w.removeNode;w.removeNode=function(e,t){var n=t.getParentNode();N&&N.apply(w,arguments);if(!t||!n)return;w.repairChkClass(e,n),w.repairParentChkClass(e,n)};var C=w.appendNodes;w.appendNodes=function(e,t,n,r,i,s,o){var u="";return C&&(u=C.apply(w,arguments)),r&&E.makeChkFlag(e,r),u}}(jQuery),define("zTreeExcheck",function(){}),window.NavDatas=null,define("blocks/nav",["require","api","backbone","context","common","zTreeExcheck"],function(e,t,n,r,i){var s,o=!1,u={check:{enable:!0},data:{key:{name:"title"},simpleData:{enable:!0,pIdKey:"pid"}},callback:{onCheck:function(){o=!1,r.setCurStations(a.getCheckedData())}}},a,f={el:$("#nav"),name:"nav",data:null,tree:null,navPlugin:null,initialize:function(e){var t=this;t.listenTo(n.Events,"nav:update",function(e){if(NavDatas==JSON.stringify(e))return;NavDatas=JSON.stringify(e),console.log("nav update",e),t.data=e.list,t.filterData().render(),o=!0})},filterData:function(){return this},getCheckedData:function(){var e=this.tree.getCheckedNodes(),t={};return $.each(e,function(e,n){t[n.id]={id:n.id,pId:n.pId,name:n.name,level:n.level}}),t},expandNode:function(){var e=this.tree,t=e.transformToArray(e.getNodes());for(var n=0;n<t.length;n++){var r=t[n];r.leveltype==3?e.expandNode(r,!1):e.expandNode(r,!0)}},render:function(){console.log("render tree now",this.ids),$.fn.zTree.init($("#nav"),u,this.data),this.tree=$.fn.zTree.getZTreeObj("nav"),this.expandNode();var e=this,t=window.location.hash;/^#\/manage\/station\/[0-9]+$/.test(t)&&(this.ids={sid:t.match(/([0-9]+)/)[1]});if(this.ids){if(this.ids.sid){var n=this.tree.getNodes();for(var r=0,i=n.length;r<i;r++)if(n[r].leveltype===1){var s=n[r].children;for(var o=0;o<s.length;o++){var a=s[o].children;if(!a)continue;for(var f=0;f<a.length;f++)a[f].children.forEach(function(t){t.leveltype===2&&t.id===e.ids.sid&&e.tree.checkNode(t,!0,!0)})}}}}else this.tree.checkAllNodes(!0);return this}};return{init:function(e,t,r,i){return a||(a=new(n.View.extend($.extend(!0,{},f,{ids:i})))),this},run:function(e){t.getNavData(e)},isOver:function(e){if(typeof e=="undefined")return!!o;o=!!e},getSites:function(){var e={ids:[],map:{},pids:[]},t;if(a.tree){var t=a.tree.getCheckedNodes();$.each(t,function(t,n){n.leveltype=="2"&&(e.ids.push(n.id),e.pids.push(n.pid),e.map[n.id]=n)})}return e},getSelectedNodePid:function(){var e=[];if(a.tree){var t=a.tree.getSelectedNodes();$.each(t,function(t,n){e.push(n.pid)})}return e},getSelectedNodeId:function(){var e=-1;if(a.tree){var t=a.tree.getSelectedNodes();$.each(t,function(t,n){e=n.id})}return e},getGroups:function(){var e={ids:[],map:{}},t;return a.tree&&(t=a.tree.getCheckedNodes(),$.each(t,function(t,n){n.leveltype=="3"&&(e.ids.push(n.id),e.map[n.id]=n)})),e},getBatterys:function(e){var t={ids:[],map:{}},n,r=[],s;return e&&(n=this.getGroups(),$.each(n.ids,function(t,i){n.map[i].pid==e&&r.push(i)})),e&&!r.length?!1:(a.tree&&(s=a.tree.getCheckedNodes(),$.each(s,function(n,s){if(s.leveltype=="4"){if(r&&r.length&&!i.inArray(s.pid,r))return;s.id.substring(0,10)==e&&(t.ids.push(s.id),t.map[s.id]=s)}})),console.log("getBatterys",t,e),t)},getBatteryIds:function(){var e={ids:[],map:{}},t;return a.tree&&(t=a.tree.getCheckedNodes(),$.each(t,function(t,n){n.leveltype=="4"&&(e.ids.push(n.id),e.map[n.id]=n)})),e}}}),function(e){"function"==typeof define&&define.amd?define("fixedHeader",["jquery","table"],function(t){return e(t,window,document)}):"object"==typeof exports?module.exports=function(t,n){t||(t=window);if(!n||!n.fn.dataTable)n=require("table")(t,n).$;return e(n,t,t.document)}:e(jQuery,window,document)}(function(e,t,n,r){var i=e.fn.dataTable,s=0,o=function(n,r){if(!(this instanceof o))throw"FixedHeader must be initialised with the 'new' keyword.";!0===r&&(r={}),n=new i.Api(n),this.c=e.extend(!0,{},o.defaults,r),this.s={dt:n,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:e(t).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:n.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+s++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:e(n.table().header()),tbody:e(n.table().body()),tfoot:e(n.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var u=n.settings()[0];if(u._fixedHeader)throw"FixedHeader already initialised on table "+u.nTable.id;u._fixedHeader=this,this._constructor()};return e.extend(o.prototype,{enable:function(e){this.s.enable=e,this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0),this.update()},headerOffset:function(e){return e!==r&&(this.c.headerOffset=e,this.update()),this.c.headerOffset},footerOffset:function(e){return e!==r&&(this.c.footerOffset=e,this.update()),this.c.footerOffset},update:function(){this._positions(),this._scroll(!0)},_constructor:function(){var n=this,r=this.s.dt;e(t).on("scroll"+this.s.namespace,function(){n._scroll()}).on("resize"+this.s.namespace,function(){n.s.position.windowHeight=e(t).height(),n.update()}),r.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc",function(){n.update()}),r.on("destroy.dtfc",function(){r.off(".dtfc"),e(t).off(n.s.namespace)}),this._positions(),this._scroll()},_clone:function(t,n){var r=this.s.dt,i=this.dom[t],s="header"===t?this.dom.thead:this.dom.tfoot;!n&&i.floating?i.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(i.floating&&(i.placeholder.remove(),i.floating.children().detach(),i.floating.remove()),i.floating=e(r.table().node().cloneNode(!1)).removeAttr("id").append(s).appendTo("body"),i.placeholder=s.clone(!1),i.host.append(i.placeholder),this._matchWidths(i.placeholder,i.floating))},_matchWidths:function(t,n){var r=function(r){var i=e(r,t).map(function(){return e(this).width()}).toArray();e(r,n).each(function(t){e(this).width(i[t]).css("min-width",i[t])})};r("th"),r("td")},_unsize:function(t){var n=this.dom[t].floating;n&&("footer"===t||"header"===t&&!this.s.autoWidth)&&e("th, td",n).css("width","")},_horizontal:function(e,t){var n=this.dom[e],r=this.s.position,i=this.s.scrollLeft;n.floating&&i[e]!==t&&(n.floating.css("left",r.left-t),i[e]=t)},_modeChange:function(e,t,n){var r=this.dom[t],i=this.s.position;if("in-place"===e){if(r.placeholder&&(r.placeholder.remove(),r.placeholder=null),this._unsize(t),r.host.append("header"===t?this.dom.thead:this.dom.tfoot),r.floating)r.floating.remove(),r.floating=null}else"in"===e?(this._clone(t,n),r.floating.addClass("fixedHeader-floating").css("header"===t?"top":"bottom",this.c[t+"Offset"]).css("left",i.left+"px").css("width",i.width+"px"),"footer"===t&&r.floating.css("top","")):"below"===e?(this._clone(t,n),r.floating.addClass("fixedHeader-locked").css("top",i.tfootTop-i.theadHeight).css("left",i.left+"px").css("width",i.width+"px")):"above"===e&&(this._clone(t,n),r.floating.addClass("fixedHeader-locked").css("top",i.tbodyTop).css("left",i.left+"px").css("width",i.width+"px"));this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[t+"Mode"]=e},_positions:function(){var t=this.s.dt.table(),n=this.s.position,r=this.dom,t=e(t.node()),i=t.children("thead"),s=t.children("tfoot"),r=r.tbody;n.visible=t.is(":visible"),n.width=t.outerWidth(),n.left=t.offset().left,n.theadTop=i.offset().top,n.tbodyTop=r.offset().top,n.theadHeight=n.tbodyTop-n.theadTop,s.length?(n.tfootTop=s.offset().top,n.tfootBottom=n.tfootTop+s.outerHeight(),n.tfootHeight=n.tfootBottom-n.tfootTop):(n.tfootTop=n.tbodyTop+r.outerHeight(),n.tfootBottom=n.tfootTop,n.tfootHeight=n.tfootTop)},_scroll:function(t){var r=e(n).scrollTop(),i=e(n).scrollLeft(),s=this.s.position,o;this.s.enable&&(this.c.header&&(o=!s.visible||r<=s.theadTop-this.c.headerOffset?"in-place":r<=s.tfootTop-s.theadHeight-this.c.headerOffset?"in":"below",(t||o!==this.s.headerMode)&&this._modeChange(o,"header",t),this._horizontal("header",i)),this.c.footer&&this.dom.tfoot.length)&&(r=!s.visible||r+s.windowHeight>=s.tfootBottom+this.c.footerOffset?"in-place":s.windowHeight+r>s.tbodyTop+s.tfootHeight+this.c.footerOffset?"in":"above",(t||r!==this.s.footerMode)&&this._modeChange(r,"footer",t),this._horizontal("footer",i))}}),o.version="3.1.0",o.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},e.fn.dataTable.FixedHeader=o,e.fn.DataTable.FixedHeader=o,e(n).on("init.dt.dtb",function(e,t){if("dt"===e.namespace){var n=t.oInit.fixedHeader||i.defaults.fixedHeader;n&&!t._fixedHeader&&new o(t,n)}}),i.Api.register("fixedHeader()",function(){}),i.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(e){(e=e._fixedHeader)&&e.update()})}),i.Api.register("fixedHeader.enable()",function(e){return this.iterator("table",function(t){(t=t._fixedHeader)&&t.enable(e!==r?e:!0)})}),i.Api.register("fixedHeader.disable()",function(){return this.iterator("table",function(e){(e=e._fixedHeader)&&e.enable(!1)})}),e.each(["header","footer"],function(e,t){i.Api.register("fixedHeader."+t+"Offset()",function(e){var n=this.context;return e===r?n.length&&n[0]._fixedHeader?n[0]._fixedHeader[t+"Offset"]():r:this.iterator("table",function(n){(n=n._fixedHeader)&&n[t+"Offset"](e)})})}),o}),define("blocks/list",["require","api","blocks/nav","stationsinfoDialog","context","ui","common","table","fixedHeader"],function(e,t,n,r,i,s,o){function v(e,t,n){u&&(u.destroy(),u=null);var r=e?e+(t?"_"+t:""):"defaultConfig",i="defaultListTpl",s=d[r]?d[r].extObj:{};s=$.extend({},d.defaultConfig.extObj,s),$("#list").html($("#"+i).html()),u=new(Backbone.View.extend($.extend({},{el:$("#list"),ids:n},s))),h=!1;var o=["qureyGroup","qureyStation","qureyBattery","reportCaution","deviationTrend","chargeOrDischarge","batteryLife","reportUilog","uilog"];console.log("listType",e),o.indexOf(e)>-1?m()&&u.fetchData():u.fetchData()}function m(){var e=$("#beginTime").val(),t=$("#endTime").val();return e==""||t==""?!1:!0}function g(e){return e=="1"?'<label style="color:#ff0000">是</label>':'<label style="color:#888">否</label>'}function y(e){return e=="1"?"<label>是</label>":"<label>否</label>"}var u=null,a=null,f,l,c,h=!1,p={paging:!1,searching:!0,order:[],autoWidth:!0,scrollCollapse:!0,language:{lengthMenu:"显示 _MENU_ 条",paginate:{first:"首页",last:"末页",next:"下一页",previous:"上一页",info:"第 _PAGE_ 页 / 总 _PAGES_ 页"},zeroRecords:"暂无数据，请查看左侧数形结构是否已勾选或检查网络连接"},zeroRecords:"暂无数据，请查看左侧数形结构是否已勾选或检查网络连接",dom:"irtlp",scroller:{rowHeight:"auto"},fixedHeadere:{header:!0},fnDrawCallback:function(e){},info:!1},d={defaultConfig:{extObj:{data:null,el:"#list",listPlugin:[],events:{"click .dataTable tr":"selectRow","click .show-info":"openStationInfoDialog","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},initialize:function(e){var t=this;t.listPlugin=[],t.captureEvt(),t.curPage=1,t.totalpage=1},checkAllRows:function(){return;var e},captureEvt:function(){var e=this;$(".mnext").click(function(){if(e.curPage>=e.totalpage)return;e.curPage++,console.log(e.curPage),e.fetchData()}),$(".mprev").click(function(){if(e.curPage==1)return;e.curPage--,console.log(e.curPage),e.fetchData()}),e.listenTo(Backbone.Events,"listdata:update stationdata:get",function(t){console.log("listdata update",t),t.types&&(e.types=t.types);if(!$(e.el).length||!$(e.el).is(":visible"))return;var n=t.page,r=t.totals||0,i=t.pageSize||10;e.data=t.list||t||e.data,$("#totaldatas").text(r),$("#currentpage").text(e.curPage),$("#totalpage").text(Math.ceil(r/(i||10))),e.totalpage=Math.ceil(r/(i||10)),e.curPage!=1&&$(".mprev").show(),e.data.length<10||$(".mnext").show();var s=/qurey/.test(window.location.href)?1:0;e.render(s),e.renderChart(),console.log("render over"),setTimeout(function(){var e=JSON.parse(localStorage.getItem("userinfo")).role,t=JSON.parse(localStorage.getItem("userinfo")).canedit;e==2&&t!=1&&(console.log("start to hide",$(".list-edit-btn")),$(".list-edit-btn").hide(),$(".list-del-btn").hide(),$("#listBtns li.undis").hide())},100),h=!0}),e.listenTo(Backbone.Events,"search:done",function(){e.fetchData(),Backbone.Events.trigger("curstation:change",{})}),e.listenTo(Backbone.Events,"export:done",function(){console.log(e.downloadUrl,window.location.hash);if(!e.downloadUrl)return;console.log(e.downloadUrl,window.location.hash);var t=n.getSites(),r;this.ids&&this.ids.sid?r=this.ids.sid:r=t.ids.join(",");var i=window.location.hash;if(window.location.hash.indexOf("/qurey/")>-1){var s=$("#beginTime").val(),o=$("#endTime").val();s&&o&&(s=+(new Date(s)),o=+(new Date(o)));if(i.indexOf("Group")>-1)t=n.getGroups(),r=t.ids.join(",");else if(i.indexOf("Battery")>-1){var u=n.getBatterys();r=u?u.ids.join(","):""}if(this.downloadUrl.indexOf("?")>-1)var a=e.downloadUrl+"&isdownload=1&start="+s+"&end="+o+"&id="+r;else var a=e.downloadUrl+"?isdownload=1&start="+s+"&end="+o+"&id="+r;window.location=a}else if(window.location.hash.indexOf("/report/")>-1){var s=$("#beginTime").val(),o=$("#endTime").val();s&&o&&(s=+(new Date(s)),o=+(new Date(o)));var f=$("#cationCategory").val();if(this.downloadUrl.indexOf("?")>-1)var a=e.downloadUrl+"&isdownload=1&start="+s+"&end="+o+"&id="+r;else var a=e.downloadUrl+"?isdownload=1&start="+s+"&end="+o+"&id="+r;window.location=a}}),e.listenTo(Backbone.Events,"listdata:refresh",function(){Backbone.Events.trigger("curstation:change",{}),e.refresh()}),e.listenTo(Backbone.Events,"listdata:update:fail stationdata:get:fail",function(t){if(t.response.code=="-1"){h=!0,e.data=[];var n=/qurey/.test(window.location.href)?1:0;e.render(n)}}),e.listenTo(Backbone.Events,"listitem:delete",function(t){alert("删除成功"),e.refresh()}),e.listenTo(Backbone.Events,"curstation:change",function(t){e.ids=null;if(!$(e.el).length||!$(e.el).is(":visible"))return;var n=e.getNavData();if(typeof n=="undefined"||!n||!n.ids.length){e.data=[];var r=/qurey/.test(window.location.href)?1:0;e.render(r)}else e.fetchData()}),e.extEvent&&e.extEvent()},openStationInfoDialog:function(){r.show()},getCols:function(e){var t=o.cookie.getCookie(e+"Cols"),n=i.getListCols(e),r=[],s=0;return t?(t=t.split(","),r=o.filterArray(n,t,"data")):r=n,$.each(r,function(e,t){s+=parseInt(t.width)||0}),{data:r,width:s}},inRow:function(e){var t=this;t.changeRowClass($(e.currentTarget),"highlight")},changeRowClass:function(e,t){var n=this,r=e.index(),i=$("tbody",n.el),s=n.getRowData(e);return!s||!s.data?this:(i.each(function(e,n){var i=$(n);i.find("tr").eq(r).toggleClass(t)}),this)},selectRow:function(e){var t=this;t.changeRowClass($(e.currentTarget),"selected").triggerSelectEvent()},destroy:function(){this.remove(),this.destoryPlugin(),this.clearTables(),$("#dataItem").off("click")},triggerSelectEvent:function(){var e=this,t=e.listPlugin[0]?e.listPlugin[0].rows(".selected").data():[],n=[];$.each(t,function(e,t){n.push(t.sn_key)}),Backbone.Events.trigger("row:select",n)},getRowData:function(e){var t={};return $.each(this.listPlugin,function(n,r){t.data=r.row(e).data();if(t.data)return t.index=r.row(e).index(),!1}),t},resetScrollBar:function(){},refresh:function(){this.curPage=1,this.fetchData()},updateList:function(){var e=this,t=[].concat(e.data),n=t.length;e.listPlugin[0].rows().remove(),t.length&&e.listPlugin[0].rows.add(t).draw(),e.listPlugin[0].fixedColumns&&(e.listPlugin[0].fixedColumns().update(),e.listPlugin[0].fixedColumns().relayout()),e.listPlugin[0].draw(),e.checkAllRows()},fetchData:function(e){var e=e||{};e.page=this.curPage,t.getStationRealTimeData(e)},getParam:function(){var e=i.getCurStations(),t=i.getListType();return{listType:t}},getColumnDefs:function(){return[{targets:0,render:function(e,t,n){return'<label class="show-info">'+e+"</label>"}}]},changeListBottom:function(e){},destoryPlugin:function(){return this.clearTables(),this.listPlugin=[],this},clearTables:function(){try{$.fn.dataTable.isDataTable("#auto table")&&(this.listPlugin[0].clear(),this.listPlugin[0].destroy()),$("#list").html($("#defaultListTpl").html())}catch(e){}},render:function(){},renderChart:function(){},onAddStation:function(){}}},station:{extObj:{getNavData:function(){return n.getSites()},selectedIds:null,events:{"click .show_station_detail":"show_station_detail"},extEvent:function(){var e=this;e.listenTo(Backbone.Events,"stationColsChange",function(t){console.log("station col change"),e.destoryPlugin(),e.render()})},show_station_detail:function(e){var t=[$(e.currentTarget).attr("id")];console.log("station pop clicked"),console.log("id",t);if(t<0){alert("请选择站点");return}for(var n=0;n<t.length;n++)t[n]=t[n];r.show(t.join(","))},fetchData:function(){var e={},r=n.getSites(),i;this.ids&&this.ids.sid?i=this.ids.sid:i=r.ids.join(","),$.extend(e,{id:i}),this.selectedIds=i,t.getStationRealTimeData(e)},renderChart:function(){console.log("chart data",this.data);var e=$("#down .btn-wrap .btn-bg"),t=null;for(var n=0;n<e.length;n++)if($(e[n]).css("display")=="block"){console.log("yes block"),t=$(e[n]).find(".active").attr("field");break}console.log(t)},render:function(t){var n=this,r=n.getCols(t==1?"qurey_station":"station");return console.log(t),n.listPlugin&&n.listPlugin[0]?n.updateList():e(["fixedColumn"],function(){if(r.width+580>$("#list").width())p.fixedColumns={leftColumns:2};else try{delete r.data[r.data.length-1].width}catch(e){}console.log(s.getListWidth()),n.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:n.data,scrollX:s.getListWidth(),scrollY:s.getListHeight(),columns:[{data:"site_name",title:"站名",width:150,sClass:"site_name_left",render:function(e,t,n){return"<div class='show_station_detail' style='color:blue;cursor:pointer;' id='"+n.sn_key+"'>"+e+"</div>"}},{data:"sid",title:"站号",width:50}].concat(r.data)},p))),n.checkAllRows()}),s.resizeAutoListWidth(),this}}},battery:{extObj:{prevIds:[],curStation:"",onNext:function(){this.nextStation(),this._fetch()},onPrev:function(){this.prevStation(),this._fetch()},nextStation:function(){if(!this.stations||!this.stations.ids.length)return;$("#page").show(),this.curStation&&this.prevIds.push(this.curStation),this.curStation=this.stations.ids.shift()},prevStation:function(){if(!this.prevIds.length)return;$("#page").show(),this.curStation&&this.stations.ids.unshift(this.curStation),this.curStation=this.prevIds.pop()},updatePageView:function(){$("#page .prev,#page .next").hide(),this.prevIds.length>0&&$("#page .prev").show(),this.stations.ids.length>0&&$("#page .next").show()},getBatterys:function(){var e=this.stations,t=this.curStation;this.stations.ids=this.stations.ids.sort(function(e,t){return e-t}),console.log(e,t);var r=n.getBatterys(t);return t&&($("#page .cur").html("当前站点："+e.map[t].title),this.updatePageView()),r?r.ids.join(","):""},updateStations:function(){return this.stations=n.getSites(),console.log("stations",this.stations),this.prevIds=[],this.curStation="",this},refresh:function(){this._fetch()},getNavData:function(){return n.getBatterys(this.curStation)},fetchData:function(){this.updateStations(),this.curStation||(this.curStation=this.stations[0]),this.nextStation(),this._fetch()},_fetch:function(){var e=this,n={};$.extend(n,{id:this.getBatterys()});if(!n.id){e.data=[],e.listPlugin&&e.listPlugin[0]?e.updateList():e.render();return}console.log("_param"+$.toJSON(n)),t.getBatterysRealTimeData(n)},extEvent:function(){var e=this;e.listenTo(Backbone.Events,"batteryColsChange",function(t){e.destoryPlugin(),e.render()}),$("#dataItem").on("click","#page .prev",function(){e.onPrev()}),$("#dataItem").on("click","#page .next",function(){e.onNext()})},render:function(t){var n=this,r=n.getCols(t==1?"qurey_battery":"battery");return this.data.length==0&&$("#page").hide(),n.listPlugin&&n.listPlugin[0]?n.updateList():(console.log("colums.width",r.width),console.log("list.width",$("#list").width()),e(["fixedColumn"],function(){if(r.width+450>$("#list").width())console.log("width >"),p.fixedColumns={leftColumns:4};else try{delete r.data[r.data.length-1].width}catch(e){}n.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:n.data,scrollX:s.getListWidth(),scrollY:s.getListHeight(),leftColumns:4,columns:[{data:"site_name",title:"站名",width:120,sClass:"site_name_left"},{data:"sid",title:"站号",width:50},{data:"gid",title:"组号",width:50},{data:"bid",title:"电池号",width:50}].concat(r.data)},p))),n.checkAllRows()})),this}}},group:{extObj:{getNavData:function(){return n.getGroups()},fetchData:function(){var e={},r=n.getGroups();$.extend(e,{id:r.ids.join(",")}),t.getGroupsData(e)},extEvent:function(){var e=this;e.listenTo(Backbone.Events,"groupColsChange",function(t){e.destoryPlugin(),e.render()})},render:function(t){var n=this,r=n.getCols(t==1?"qurey_group":"group");return n.listPlugin&&n.listPlugin[0]?n.updateList():e(["fixedColumn"],function(){if(r.width+530>$("#list").width())p.fixedColumns={leftColumns:3};else try{delete r.data[r.data.length-1].width}catch(e){}n.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:n.data,scrollX:s.getListWidth(),scrollY:s.getListHeight(),columns:[{data:"site_name",title:"站名",width:120,sClass:"site_name_left"},{data:"sid",title:"站号",width:50},{data:"gid",title:"组号",width:50}].concat(r.data)}))),n.checkAllRows()}),this}}},caution:{extObj:{getNavData:function(){return n.getSites()},fetchData:function(e){var e={page:this.curPage},r=n.getSites();$.extend(e,{id:r.ids.join(","),type:0}),t.getCautionsData(e)},events:{"click .resolveBtn":"resove","click .show_station_detail":"show_station_detail"},show_station_detail:function(e){var t=[$(e.currentTarget).attr("id")];console.log("station pop clicked"),console.log("id",t);if(t<0){alert("请选择站点");return}for(var n=0;n<t.length;n++)t[n]=t[n];r.show(t.join(","))},resove:function(e){s.showUnsolveDialog({id:$(e.currentTarget).attr("pid"),suggestion:$(e.currentTarget).attr("suggestion")})},updateAtype:function(){console.log("atypes",this.types);for(var e=0;e<this.types.length;e++){var t=this.types[e];t.atype=="R"?$("#ared").html(t.count+"条"):t.atype=="O"?$("#aoo").html(t.count+"条"):t.atype=="Y"&&$("#ayellow").html(t.count+"条")}},render:function(){var e=this;return e.listPlugin&&e.listPlugin[0]?(e.updateList(),e.updateAtype()):(e.updateAtype(),this.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:this.data,paging:!1,scrollX:s.getListHeight(),columns:[{data:"site_name",title:"站名",width:150,sClass:"site_name_left",render:function(e,t,n){return"<div class='show_station_detail' style='color:blue;cursor:pointer;' id='"+(n.sn_key.substring(0,10)+"0000")+"'>"+e+"</div>"}},{data:"sn_key",title:"站号",width:100,render:function(e,t,n){return n.sid}},{data:"sn_key",title:"组号",width:100,render:function(e,t,n){return n.type=="battery"||n.type=="group"?n.sn_key.substring(10,12):""}},{data:"sn_key",title:"电池号",width:100,render:function(e,t,n){return n.type=="battery"?n.sn_key.substring(12,14):""}},{data:"time",title:"时间",width:200},{data:"desc",title:"警情内容",width:200,render:function(e,t,n){var r=n.desc,i="";return r.indexOf("橙")>-1?i="#e7691d":r.indexOf("黄")>-1?i="#fabd05":i="#f20f0f","<div style='color:"+i+"'>"+e+"</div>"}},{data:"current",title:"数值",width:80,render:function(e,t,n){var r=n.desc,i="";return r.indexOf("橙")>-1?i="#e7691d":r.indexOf("黄")>-1?i="#fabd05":i="#f20f0f","<div style='font-weight:bold;color:"+i+"'>"+e+"</div>"}},{data:"climit",title:"参考值",width:80},{data:"markup",title:"操作记录",width:400,render:function(e){var t=e==null?"":e;return'<div style="text-align:left;">'+t+"</div>"}},{data:"id",title:"操作",width:100,render:function(e,t,n){return _.template('<a class="resolveBtn" pid="<%=id%>" suggestion="<%=suggest%>">处理</a>')({id:e,suggest:n.suggest})}}]})))),this}}},newstations:{extObj:{getNavData:function(){return n.getSites()},fetchData:function(e){var e={page:this.curPage};t.getNewStationData(e)},events:{"click .resolveBtn":"resove"},showStationOptionEditDialog:function(t){e(["js/dialog-stationEdit"],function(e){e&&e.show(null,t)})},resove:function(e){var t=$(e.currentTarget);this.showStationOptionEditDialog({sid:t.attr("sid"),sn_key:t.attr("sn_key"),Groups:t.attr("Groups"),GroBats:t.attr("GroBats"),CurSensor:t.attr("CurSensor")})},updateAtype:function(){console.log("atypes",this.types);for(var e=0;e<this.types.length;e++){var t=this.types[e];t.atype=="R"?$("#ared").html(t.count+"条"):t.atype=="O"?$("#aoo").html(t.count+"条"):t.atype=="Y"&&$("#ayellow").html(t.count+"条")}},render:function(){var e=this;return e.listPlugin&&e.listPlugin[0]?e.updateList():this.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:this.data,paging:!1,scrollX:s.getListHeight(),columns:[{data:"sn_key",title:"物理地址"},{data:"CurSensor",title:"电流传感安装状态"},{data:"sid",title:"站号"},{data:"Groups",title:"组数"},{data:"GroBats",title:"电池数"},{data:"record_time",title:"时间"},{data:"id",title:"操作",width:150,render:function(e,t,n){return _.template('<a class="resolveBtn" sn_key="<%=sn_key%>" GroBats="<%=GroBats%>" sid="<%=sid%>" Groups="<%=Groups%>" CurSensor="<%=CurSensor%>" >添加</a>')(n)}}]}))),this}}},systemAlarm:{extObj:{getNavData:function(){return n.getSites()},fetchData:function(e){t.getSystemAlarm(e)},render:function(){var e=this;return e.listPlugin&&e.listPlugin[0]?e.updateList():this.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:this.data,paging:!1,scrollX:s.getListHeight(),columns:[{data:"site_name",title:"站名"},{data:"sid",title:"站号"},{data:"station",title:"物理地址"},{data:"record_time",title:"时间"},{data:"desc",title:"故障描述"},{data:"tips",title:"建议处理方式"}]}))),this}}},stationInfo_stationSituation:{extObj:{events:{"click .list-edit-btn":"onEdit","click .list-edit-text":"onEdit","click .list-del-btn":"onDel","click .list-validate-btn":"onValidate","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},onEdit:function(e){s.showStationEditDialog($(e.currentTarget).attr("pid"))},onDel:function(e){confirm("是否确定删除此站点")&&(t.deleteStation({id:$(e.currentTarget).attr("pid")}),this.refresh())},onValidate:function(e){o.loadTips.show("校验中，请稍等..."),t.checkStation({id:$(e.currentTarget).attr("pid"),serial_number:$(e.currentTarget).attr("sn")})},extEvent:function(){var e=this;this.listenTo(Backbone.Events,"stationdata:delete",function(t){alert("删除成功"),e.refresh()}),this.listenTo(Backbone.Events,"station:check",function(t){o.loadTips.close(),alert("校验成功"),e.refresh()}),this.listenTo(Backbone.Events,"station:check:fail",function(e){o.loadTips.close(),alert("校验失败")})},getNavData:function(){return n.getSites()},fetchData:function(e){var e={},r=n.getSites(),i;this.ids&&this.ids.sid?i=this.ids.sid:i=r.ids.join(","),$.extend(e,{id:i}),t.getStationsInfo(e)},render:function(){var t=this;return t.destoryPlugin(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,language:{emptyTable:"站点数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:2},columns:[{data:"sid",title:"站号",width:80},{data:"site_name",title:"站点简称",width:100,render:function(e,t,n){var r="";return r='<div class="list-edit-text" pid="'+n.id+'">'+n.site_name+"</div>",r}},{data:"serial_number",title:"物理地址",width:100},{data:"site_name",title:"站点全称",width:100,render:function(e,t,n){var r="";return r='<div class="list-edit-text" pid="'+n.id+'">'+n.StationFullChineseName+"</div>",r}},{data:"site_location",title:"站点地址",width:100},{data:"site_property",title:"站点性质",width:150},{data:"areaname",title:"隶属区域",width:150},{data:"fix_phone",title:"固定电话"},{data:"functionary",title:"负责人",width:120,render:function(e,t,n){var r=[];return n.functionary_sms&&(r.push("<span>"),r.push('<img src="/images/sms.png">'),r.push("</span>")),n.functionary_mail&&(r.push("<span>"),r.push('<img src="/images/email.png">'),r.push("</span>")),"<span>"+e+"</span>"+r.join("")}},{data:"functionary_phone",title:"负责人电话",width:120},{data:"device_owner",title:"设备负责人",width:120},{data:"device_owner_phone",title:"设备负责人电话",width:120},{data:"emergency_person",title:"紧急联系人姓名",width:120},{data:"emergency_phone",title:"紧急联系人手机",width:120},{data:"area_owner",title:"区域主管",width:120,render:function(e,t,n){var r=[];return n.area_owner_sms&&(r.push("<span>"),r.push('<img src="/images/sms.png">'),r.push("</span>")),n.area_owner_mail&&(r.push("<span>"),r.push('<img src="/images/email.png">'),r.push("</span>")),"<span>"+e+"</span>"+r.join("")}},{data:"area_owner_phone",title:"区域主管电话",width:120},{data:"parent_owner",title:"上级主管",width:120,render:function(e,t,n){var r=[];return n.parent_owner_sms&&(r.push("<span>"),r.push('<img src="/images/sms.png">'),r.push("</span>")),n.parent_owner_mail&&(r.push("<span>"),r.push('<img src="/images/email.png">'),r.push("</span>")),"<span>"+e+"</span>"+r.join("")}},{data:"parent_owner_phone",title:"上级主管电话"},{data:"groups",title:"电池组数",width:100},{data:"batteries",title:"每组电池数",width:80},{data:"postal_code",title:"邮政编码",width:80},{data:"site_latitude",title:"站点纬度",width:80},{data:"site_longitude",title:"站点经度",width:80},{data:"ipaddress",title:"IP地址",width:100},{data:"ipaddress_method",title:"控制器IP地址或方式",width:150},{data:"site_control_type",title:"站点控制器型号",width:100},{data:"bms_install_date",title:"BMS系统安装日期",width:150},{data:"group_collect_type",title:"组电流采集器型号",width:150},{data:"group_collect_num",title:"组电流采集器数量",width:150},{data:"inductor_brand",title:"互感器品牌",width:150},{data:"group_collect_install_type",title:"组电流采集器安装模式",width:150},{data:"battery_collect_type",title:"电池数据采集器型号",width:150},{data:"battery_collect_num",title:"电池数据采集器数量",width:150},{data:"humiture_type",title:"环境温湿度方式",width:150},{data:"has_light",title:"灯光报警",width:80},{data:"has_speaker",title:"声音报警",width:80},{data:"has_sms",title:"短信",width:80},{data:"has_smart_control",title:"智能控制",width:80},{data:"has_group_TH_control",title:"温湿度传感器",width:150},{data:"has_group_HO_control",title:"氢氧气传感器",width:150},{data:"device_mac",title:"网口MAC",width:150},{data:"remark",title:"备注",width:150},{data:"id",render:function(e,t,n){var r="";return n.is_checked=="1"?r='<div style="width:240px">'+$("#validateSuccess").html()+$("#editBtn").html()+$("#delBtn").html()+"</div>":r='<div style="width:240px">'+$("#validateBtn").html()+$("#editBtn").html()+$("#delBtn").html()+"</div>",_.template(r)({id:e,sn:n.serial_number})}}]},p))),t.checkAllRows()}),this}}},stationInfo_batterys:{extObj:{events:{"click .list-edit-btn":"onEdit","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},onEdit:function(e){s.showBatteryEditDialog($(e.currentTarget).attr("pid"))},fetchData:function(e){t.getBatteryInfosData(e)},render:function(){var t=this;return t.destoryPlugin(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,language:{emptyTable:"电池数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:2},columns:[{data:"sid",title:"站号",width:100},{data:"site_name",title:"站点简称",width:100},{data:"battery_factory",title:"生产厂家",width:150},{data:"battery_num",title:"电池型号",width:150},{data:"battery_date",title:"生产日期",width:150},{data:"battery_voltage",title:"标称电压（V）",width:150},{data:"battery_oum",title:"标称内阻（MΩ）",width:150},{data:"battery_dianrong",title:"电池标称容量（Ah）",width:150},{data:"battery_float_voltage",title:"浮充标准电压（V）",width:150},{data:"battery_max_current",title:"最大充电电流（A）",width:150},{data:"battery_max_discharge_current",title:"最大放电电流（A）",width:150},{data:"battery_float_up",title:"浮充电压上限（V）",width:150},{data:"battery_float_dow",title:"电池浮充电压下限（V）",width:150},{data:"battery_discharge_down",title:"放电电压下限（V）",width:150},{data:"battery_scrap_date",title:"强制报废日期",width:150},{data:"battery_life",title:"设计寿命（年）",width:150},{data:"battery_column_type",title:"电池级柱类型",width:150},{data:"battery_temperature",title:"温度要求（℃）",width:150},{data:"battery_humidity",title:"湿度要求（%）",width:150},{data:"battery_type",title:"电池种类",width:150},{data:"battery_factory_phone",title:"电池厂家联系电话",width:150},{data:"remark",title:"备注",width:150},{data:"id",render:function(e){return _.template('<div style="width:160px">'+$("#editBtn").html()+"</div>")({id:e})}}]},p))),t.checkAllRows()}),this}}},stationInfo_upsInfo:{extObj:{events:{"click .list-edit-btn":"onEdit","click .list-del-btn":"onDel","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},onEdit:function(e){s.showUPSEditDialog($(e.currentTarget).attr("pid"))},onDel:function(e){confirm("是否确定删除此UPS数据")&&t.deleteUps({id:$(e.currentTarget).attr("pid")})},fetchData:function(){t.getUpsInfosData()},render:function(){var t=this;return t.destoryPlugin(),$("#auto").width("100%"),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,language:{emptyTable:"UPS数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:2},columns:[{data:"sid",title:"站号",width:80},{data:"site_name",title:"站名",width:250},{data:"ups_factory",title:"生产厂家",width:250},{data:"ups_type",title:"型号",width:100},{data:"ups_create_date",title:"生产日期",width:150},{data:"ups_install_date",title:"安装日期",width:150},{data:"ups_power",title:"功率/容量（W/H）",width:150},{data:"ups_power_in",title:"输入功率（W/A）",width:150},{data:"ups_power_out",title:"输出功率（W/A）",width:150},{data:"ups_battery_vol",title:"外接电池电压（V）",width:150},{data:"ups_battery_current",title:"外接电池电流（A）",width:150},{data:"ac_protect",title:"AC过流保护（V/A）",width:150},{data:"dc_protect",title:"DC过流保护（V/A）",width:150},{data:"on_net",title:"联网检测",width:150},{data:"alarm_content",title:"报警内容",width:150},{data:"discharge_protect",title:"放电保护值（%）",width:150},{data:"redundancy_num",title:"冗余数量(台)",width:150},{data:"floting_charge",title:"浮充电压（V）",width:150},{data:"ups_vdc",title:"电压范围(V)",width:150},{data:"ups_reserve_hour",title:"额定候备时间（W/H）",width:250},{data:"ups_charge_mode",title:"充电方式",width:100},{data:"ups_max_charge",title:"最大充电电流（A）",width:150},{data:"ups_max_discharge",title:"最大放电电流（A）",width:150},{data:"ups_period_days",title:"规定维护周期（天）",width:150},{data:"ups_discharge_time",title:"维护放电时长（分钟）",width:150},{data:"ups_discharge_capacity",title:"维护放电容量（%）",width:150},{data:"ups_maintain_date",title:"维护到期日",width:150},{data:"ups_vender_phone",title:"厂家联系电话",width:120},{data:"ups_service",title:"服务商名称",width:120},{data:"ups_vender",title:"联系人",width:120},{data:"ups_service_phone",title:"服务商电话",width:100},{data:"remark",title:"备注",width:150},{data:"id",render:function(e){return _.template('<div style="width:80px">'+$("#editBtn").html()+"</div>")({id:e})}}]},p))),t.checkAllRows()}),this}}},stationInfo_monitorSeller:{extObj:{events:{"click .list-edit-btn":"onEdit","click .list-del-btn":"onDel","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},onEdit:function(e){s.showBMSEditDialog($(e.currentTarget).attr("pid"))},onDel:function(e){confirm("是否确定删除此UPS数据")&&t.deleteBMS({id:$(e.currentTarget).attr("pid")})},fetchData:function(){t.getBMSInfosData()},render:function(){var t=this;return t.destoryPlugin(),$("#auto").width("100%"),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"bms_company",title:"生产厂家",width:200},{data:"bms_device_addr",title:"厂家地址",width:200},{data:"bms_postcode",title:"邮编",width:200},{data:"bms_url",title:"支持网址",width:200},{data:"bms_tel",title:"支持固话",width:200},{data:"bms_phone",title:"手机",width:200},{data:"bms_service_phone",title:"服务商电话",width:200},{data:"bms_service_name",title:"服务商名称",width:200},{data:"bms_service_contact",title:"服务商联系人",width:200},{data:"bms_service_url",title:"服务商地址",width:300},{data:"bms_version",title:"软件版本号",width:150},{data:"bms_update_mark",title:"软件升级记录",width:170},{data:"bms_mark",title:"备注",width:300},{data:"id",render:function(e){return _.template('<div style="width:160px">'+$("#editBtn").html()+$("#delBtn").html()+"</div>")({id:e})}}]},p))),t.checkAllRows()}),this}}},stationInfo_institutions:{extObj:{events:{"click .list-edit-btn":"onEdit","click .list-del-btn":"onDel","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},onEdit:function(e){s.showCompanyEditDialog($(e.currentTarget).attr("pid"))},onDel:function(e){confirm("是否确定删除此UPS数据")&&t.deleteCompany({id:$(e.currentTarget).attr("pid")})},fetchData:function(){t.getCompanyInfosData()},render:function(){var t=this;return t.destoryPlugin(),$("#auto").width("100%"),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"company_name",title:"单位名称",width:150},{data:"company_address",title:"单位地址",width:300},{data:"area_name",title:"管辖"},{data:"parent_area",title:"隶属",width:100},{data:"supervisor_name",title:"主管领导姓名",width:80},{data:"supervisor_phone",title:"主管领导电话",width:100},{data:"owner",title:"部门负责人",width:80},{data:"owner_phone",title:"部门负责人电话",width:100},{data:"longitude",title:"经度",width:80},{data:"latitude",title:"纬度",width:80},{data:"station_num",title:"所辖站点个数",width:80},{data:"area_level",title:"隶属层级",width:100},{data:"network_type",title:"联网方式",width:100},{data:"bandwidth",title:"网络带宽",width:100},{data:"ipaddr",title:"IP地址",width:100},{data:"computer_brand",title:"上位机品牌",width:100},{data:"computer_os",title:"上位机操作系统",width:100},{data:"computer_conf",title:"主机配置",width:100},{data:"browser_name",title:"浏览器名称",width:100},{data:"server_capacity",title:"服务器容量",width:100},{data:"server_type",title:"服务器型号",width:100},{data:"cloud_address",title:"云空间地址",width:100},{data:"backup_period",title:"数据备份周期",width:100},{data:"backup_type",title:"数据备份方式",width:100},{data:"supervisor_depname",title:"监控部门名称",width:100},{data:"monitor_name1",title:"监控部门负责人",width:100},{data:"monitor_phone1",title:"监控部门负责人电话",width:100},{data:"monitor_name2",title:"其他联系人",width:100},{data:"monitor_phone2",title:"其他联系人电话",width:100},{data:"monitor_name3",title:"其他联系人",width:100},{data:"monitor_phone3",title:"其他联系人电话",width:100},{data:"monitor_tel1",title:"监控部门固定电话1",width:100},{data:"monitor_tel2",title:"监控部门固定电话2",width:100},{data:"duty_status",title:"值守状态/班次",width:80},{data:"manage",title:"管理员",width:80},{data:"viewer",title:"观察员",width:80},{data:"remark",title:"备注",width:150},{data:"id",render:function(e){return _.template('<div style="width:160px">'+$("#editBtn").html()+$("#delBtn").html()+"</div>")({id:e})}}]},p))),t.checkAllRows()}),this}}},manager_role:{extObj:{fetchData:function(e){t.getRolesData(e)},render:function(){return this.destoryPlugin(),this.clearTables(),$("#addRole").hide(),$("#lock").hide(),$("#auto").width("100%"),this.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:this.data,scrollX:s.getListWidth(),columns:[{data:"",title:"序号"},{data:"id",title:"编号"},{data:"rolename",title:"角色名称"}]},p))),this}}},manager_personal:{extObj:{events:{"click .list-edit-btn":"onEdit","click .list-del-btn":"onDel"},onEdit:function(e){s.showPersonalEditDialog($(e.currentTarget).attr("pid"))},onDel:function(e){confirm("是否确定删除此人员")&&t.deletePersonal({id:$(e.currentTarget).attr("pid")})},fetchData:function(e){t.getPersonalsData(e)},render:function(){var t=this;return this.destoryPlugin(),$("#lock").hide(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"unit",title:"单位名称"},{data:"name",title:"姓名"},{data:"username",title:"登陆名"},{data:"phone",title:"联系电话"},{data:"backup_phone",title:"备用电话"},{data:"email",title:"邮箱"},{data:"postname",title:"职位"},{data:"duty_num",title:"班次"},{data:"location",title:"住址"},{data:"areaname",title:"管理范围",render:function(e){var t=e.split(" ");return t.length>1&&t.shift(),"<div>"+t.join(" ")+"</div>"}},{data:"rolename",title:"角色"},{data:"id",render:function(e){return _.template('<div style="width:160px">'+$("#editBtn").html()+$("#delBtn").html()+"</div>")({id:e})}}]}))),t.checkAllRows()}),this}}},message:{extObj:{events:{"click .list-edit-btn":"onEdit","click .list-del-btn":"onDel","change .changed":"onChange","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},onChange:function(e){var n=$(e.currentTarget).attr("field"),r=$(e.currentTarget).attr("dataid"),i=$(e.currentTarget).val();console.log(n,r,i),t.updateMessage({id:r,field:n,val:i})},fetchData:function(e){t.getMessagesData(e)},render:function(){var t=this;return this.destoryPlugin(),$("#lock").hide(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"id",title:"ID"},{data:"desc",title:"描述",width:200},{data:"en",title:"编码"},{data:"ignore",title:"是否可忽略",width:100,render:function(e,t,n){var r=[];return r.push('<select class="changed" field="ignore" dataid='+n.id+">"),e=="1"?(r.push("<option value=1 selected>是</option>"),r.push("<option value=0>否</option>")):(r.push("<option value=1>是</option>"),r.push("<option value=0 selected>否</option>")),r.push("</select>"),r.join("")}},{data:"send_email",title:"是否发送邮件",width:100,render:function(e,t,n){var r=[];return r.push('<select class="changed" field="send_email" dataid='+n.id+">"),e=="1"?(r.push("<option value=1 selected>是</option>"),r.push("<option value=0>否</option>")):(r.push("<option value=1>是</option>"),r.push("<option value=0 selected>否</option>")),r.push("</select>"),r.join("")}},{data:"send_msg",title:"是否发送短信",width:100,render:function(e,t,n){var r=[];return r.push('<select class="changed" field="send_msg" dataid='+n.id+">"),e=="1"?(r.push("<option value=1 selected>是</option>"),r.push("<option value=0>否</option>")):(r.push("<option value=1>是</option>"),r.push("<option value=0 selected>否</option>")),r.push("</select>"),r.join("")}}]})))}),this}}},optionSetting_stationOption:{extObj:{events:{"click .list-edit-btn":"onEdit","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},onEdit:function(e){var t=JSON.parse(localStorage.getItem("userinfo")).role;t==1?s.showStationOptionEditDialog($(e.currentTarget).attr("pid")):alert("您无编辑权限")},fetchData:function(e){t.getSationOptionsData(e)},render:function(){var t=this;return this.destoryPlugin(),$("#lock").hide(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:3},columns:[{data:"sn_key",title:"站MAC",width:100},{data:"site_name",title:"站名称",width:100},{data:"sid",title:"站号",width:100},{data:"Groups",title:"站内组数",width:100},{data:"GroBats",title:"每组电池数",width:100},{data:"CurSensor",title:"电流传感安装状态",width:100},{data:"Time_MR",title:"内阻测量间隔",width:100},{data:"SampleInt",title:"采集间隔",width:100},{data:"MaxTem_R",title:"高温报警_红",width:100},{data:"MaxTem_O",title:"高温报警_橙",width:100},{data:"MaxTem_Y",title:"高温报警_黄",width:100},{data:"MinTem_R",title:"低温报警_红",width:100},{data:"MinTem_O",title:"低温报警_橙",width:100},{data:"MinTem_Y",title:"低温报警_黄",width:100},{data:"MaxHum_R",title:"高湿报警_红",width:100},{data:"MaxHum_O",title:"高湿报警_橙",width:100},{data:"MaxHum_Y",title:"高湿报警_黄",width:100},{data:"MinHum_R",title:"低湿报警_红",width:100},{data:"MinHum_O",title:"低湿报警_橙",width:100},{data:"MinHum_Y",title:"低湿报警_黄",width:100},{data:"CurRange",title:"站电流量程",width:100},{data:"KI",title:"站电流系数",width:100},{data:"ZeroCurADC",title:"站电流零位",width:100},{data:"DisChaLim_R",title:"放电报警_红",width:100},{data:"DisChaLim_O",title:"放电报警_橙",width:100},{data:"DisChaLim_Y",title:"放电报警_黄",width:100},{data:"ChaLim_R",title:"充电报警_红",width:100},{data:"ChaLim_O",title:"充电报警_橙",width:100},{data:"ChaLim_Y",title:"充电报警_黄",width:100},{data:"HiVolLim_R",title:"高压报警_红",width:100},{data:"HiVolLim_O",title:"高压报警_橙",width:100},{data:"HiVolLim_Y",title:"高压报警_黄",width:100},{data:"LoVolLim_R",title:"低压报警_红",width:100},{data:"LoVolLim_O",title:"低压报警_橙",width:100},{data:"LoVolLim_Y",title:"低压报警_黄",width:100},{data:"ChaCriterion",title:"站充放电判据",width:100},{data:"sn_key",render:function(e){var t=JSON.parse(localStorage.getItem("userinfo")).role;return t!=1?"":_.template($("#editBtn").html())({id:e})}}]})))}),this}}},optionSetting_groupOption:{extObj:{events:{"click .list-edit-btn":"onEdit","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},onEdit:function(e){var t=JSON.parse(localStorage.getItem("userinfo")).role;t==1?s.showGroupOptionEditDialog($(e.currentTarget).attr("pid")):alert("您无编辑权限")},fetchData:function(e){t.getGroupOptionData(e)},render:function(){var t=this;return this.destoryPlugin(),$("#lock").hide(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:2},columns:[{data:"site_name",title:"站名称",width:100},{data:"sid",title:"站号",width:100},{data:"GroBatNum",title:"每组电池数",width:100},{data:"CurRange",title:"组电流量程",width:100},{data:"KI",title:"组电流系数",width:100},{data:"ZeroCurADC",title:"组电流零位",width:100},{data:"DisChaLim_R",title:"组放电电流超上限_红",width:100},{data:"DisChaLim_O",title:"组放电电流将达上限_橙",width:100},{data:"DisChaLim_Y",title:"组放电电流偏高_黄",width:100},{data:"ChaLim_R",title:"组充电电流超上限_红",width:100},{data:"ChaLim_O",title:"组充电电流将达上限_橙",width:100},{data:"ChaLim_Y",title:"组充电电流偏高_黄",width:100},{data:"MaxTem_R",title:"组温度超上限_红",width:100},{data:"MaxTem_O",title:"组温度将达上限_橙",width:100},{data:"MaxTem_Y",title:"组温度偏高_黄",width:100},{data:"MinTem_R",title:"组温度超下限_红",width:100},{data:"MinTem_O",title:"组温度将达下限_橙",width:100},{data:"MinTem_Y",title:"组温度偏低_黄",width:100},{data:"ChaCriterion",title:"组充放电判据",width:100},{data:"sn_key",render:function(e){var t=JSON.parse(localStorage.getItem("userinfo")).role;return t!=1?"":_.template($("#editBtn").html())({id:e})}}]})))}),this}}},optionSetting_batteryOption:{extObj:{events:{"click .list-edit-btn":"onEdit","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},onEdit:function(e){var t=JSON.parse(localStorage.getItem("userinfo")).role;t==1?s.showBatteryOptionEditDialog($(e.currentTarget).attr("pid")):alert("您无编辑权限")},fetchData:function(e){t.getBatteryOptionsData(e)},render:function(){var t=this;return this.destoryPlugin(),$("#auto").width("100%"),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:2},columns:[{data:"site_name",title:"站名称",width:100},{data:"sid",title:"站号",width:100},{data:"KV",title:"电压系数",width:100},{data:"KT",title:"温度系数",width:100},{data:"KI",title:"激励电流系数",width:100},{data:"T0",title:"T0校准温度",width:100},{data:"ADC_T0",title:"T0温度码",width:100},{data:"T1",title:"T1校准温度",width:100},{data:"ADC_T1",title:"T1温度码",width:100},{data:"MaxU_R",title:"电池电压超上限_红",width:100},{data:"MaxU_O",title:"电池电压将达上限_橙",width:100},{data:"MaxU_Y",title:"电池电压偏高_黄",width:100},{data:"MinU_R",title:"电池电压超下限_红",width:100},{data:"MinU_O",title:"电池电压将达下限_橙",width:100},{data:"MinU_Y",title:"电池电压偏低_黄",width:100},{data:"MaxT_R",title:"电池温度超上限_红",width:100},{data:"MaxT_O",title:"电池温度将达上限_橙",width:100},{data:"MaxT_Y",title:"电池温度偏高_黄",width:100},{data:"MinT_R",title:"电池温度超下限_红",width:100},{data:"MinT_O",title:"电池温度将达下限_橙",width:100},{data:"MinT_Y",title:"电池温度偏低_黄",width:100},{data:"MaxR_R",title:"电池内阻超上限_红",width:100},{data:"MaxR_O",title:"电池内阻将达上限_橙",width:100},{data:"MaxR_Y",title:"电池内阻偏高_黄",width:100},{data:"MaxDevU_R",title:"电池电压偏差_红",width:100},{data:"MaxDevU_O",title:"电池电压偏差_橙",width:100},{data:"MaxDevU_Y",title:"电池电压偏差_黄",width:100},{data:"MaxDevT_R",title:"电池温度偏差_红",width:100},{data:"MaxDevT_O",title:"电池温度偏差_橙",width:100},{data:"MaxDevT_Y",title:"电池温度偏差_黄",width:100},{data:"MaxDevR_R",title:"电池内阻偏差_红",width:100},{data:"MaxDevR_O",title:"电池内阻偏差_橙",width:100},{data:"MaxDevR_Y",title:"电池内阻偏差_黄",width:100},{data:"sn_key",render:function(e){var t=JSON.parse(localStorage.getItem("userinfo")).role;return t!=1?"":_.template($("#editBtn").html())({id:e})}}]})))}),this}}},limitationSetting:{extObj:{events:{"click .list-edit-btn":"onEdit","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},onEdit:function(e){s.showLimitationEditDialog($(e.currentTarget).attr("pid"))},fetchData:function(e){t.getStationsInfo(e)},render:function(){var t=this;t.destoryPlugin(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,language:{emptyTable:"站点数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"sid",title:"站号",width:100},{data:"site_name",title:"站点简称",width:200},{data:"serial_number",title:"物理地址",width:250},{data:"serial_number",render:function(e){return _.template('<div style="width:80px; margin:0px auto">'+$("#editBtn").html()+"</div>")({id:e})}}]},p)))})}}},equipmentSetting:{extObj:{events:{"click .list-edit-btn":"onEdit","click .list-del-btn":"onDel","mouseover .dataTable tr":"inRow","mouseout .dataTable tr":"inRow"},onEdit:function(e){s.showStationdeviceEditDialog($(e.currentTarget).attr("pid"))},onDel:function(e){confirm("是否确定删除此外控设备")&&t.deleteStationdevice({id:$(e.currentTarget).attr("pid")})},fetchData:function(e){t.getStationdeviceInfos(e)},render:function(){var t=this;t.destoryPlugin(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,language:{emptyTable:"站点数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"sid",title:"站号",width:100},{data:"Device_name",title:"名称",width:100},{data:"Device_fun",title:"功能",width:100},{data:"Device_Factory_Name",title:"生产厂家",width:100},{data:"Device_Factory_Address",title:"厂家地址",width:200},{data:"Device_Factory_PostCode",title:"厂家邮编",width:100},{data:"Device_Factory_website",title:"技术支持网址",width:150},{data:"Device_Factory_Technology_cable_phone",title:"技术支持固话",width:100},{data:"Device_Factory_Technology_cellphone",title:"技术支持手机",width:100},{data:"id",render:function(e){return _.template('<div style="width:160px; margin:0px auto">'+$("#editBtn").html()+$("#clearBtn").html()+"</div>")({id:e})}}]},p)))})}}},reportCaution:{extObj:{fetchData:function(){var e=$("#cationCategory").val(),n={page:this.curPage,start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""};e>0&&(n.type=e),t.getGerneralalarmlog(n)},downloadUrl:"/api/index.php/gerneralalarm",render:function(){var e=this;e.destoryPlugin(),e.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:e.data,language:{emptyTable:"报表数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),columns:[{data:"alarm_sn",title:"序号"},{data:"alram_equipment",title:"站名",render:function(e,t,n){var r=["red","green","#f90"];return'<span style="color:white;background-color:'+r[n.alarm_emergency_level-1]+'">'+n.alram_equipment+"</span>"}},{data:"alarm_para1_name",title:"站号"},{data:"alarm_para2_name",title:"组号"},{data:"alarm_para3_name",title:"电池号"},{data:"alarm_occur_time",title:"时间"},{data:"alarm_content",title:"警情内容"},{data:"alarm_para1_value",title:"数值"},{data:"alarm_suggestion",title:"建议处理方式"}]},p)))}}},batteryLife:{extObj:{fetchData:function(e){var n={page:this.curPage,start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""};t.getByearlog(n)},downloadUrl:"/api/index.php/report/byearlog",render:function(){var e=this;e.destoryPlugin(),e.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:e.data,language:{emptyTable:"报表数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),columns:[{data:"brand",title:"品牌",width:100},{data:"battery_date",title:"生产日期",width:100},{data:"battery_install_date",title:"电池安装日期",width:100},{data:"U",title:"电池的电压",width:100},{data:"battery_oum",title:"出厂标称内阻",width:200},{data:"R",title:"电池的内阻",width:100},{data:"battery_scrap_date",title:"强制报废日期"}]},p)))}}},deviationTrend:{extObj:{fetchData:function(e){var n={page:this.curPage,start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""};t.getDeviationTrend(n)},downloadUrl:"/api/index.php/report/deviationTrend",render:function(){var e=this;e.destoryPlugin(),e.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:e.data,language:{emptyTable:"报表数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),columns:[{data:"site_name",title:"站名",width:100},{data:"sid",title:"站号",width:100},{data:"record_time",title:"时间",width:100},{data:"avgU",title:"电压均值",width:100,render:function(e){return e?parseFloat(e).toFixed(2):""}},{data:"avgT",title:"温度均值",width:100,render:function(e){return e?parseFloat(e).toFixed(2):""}},{data:"avgR",title:"内阻均值",width:100,render:function(e){return e?parseFloat(e).toFixed(2):""}},{data:"avgU",title:"电压偏离度(%)",render:function(e){return e?(Math.abs(.3-e)/.3*100).toFixed(2):""}},{data:"avgT",title:"温度偏离度(%)",render:function(e){return e?(Math.abs(3-e)/3*100).toFixed(2):""}},{data:"avgR",title:"内阻偏离度(%)",render:function(e){return e?(Math.abs(5-e)/5*100).toFixed(2):""}}]},p)))}}},chargeOrDischarge:{extObj:{fetchData:function(e){var n={page:this.curPage,start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""};t.getChargeOrDischarge(e)},render:function(){var e=this;e.destoryPlugin(),e.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:e.data,language:{emptyTable:"报表数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),columns:[{data:"time",title:"序号",width:100},{data:"record_time",title:"记录时间",width:200},{data:"sid",title:"站点id",width:100},{data:"site_name",title:"站点名称",width:300},{data:"BBbCharge",title:"充电状态",width:100,render:function(e){return e==1?"是":"否"}},{data:"BCbDisCharge",title:"放电状态",render:function(e){return e==1?"是":"否"}}]},p)))}}},reportUilog_options:{extObj:{fetchData:function(e){t.getUserlog({page:this.curPage,type:"2",start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""})},render:function(){var e=this;e.destoryPlugin(),e.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:e.data,language:{emptyTable:"UI日志数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),columns:[{data:"username",title:"用户",width:100},{data:"content",title:"操作内容",render:function(e,t,n){if(!n.newvalue)return n.content;var r=JSON.parse(n.newvalue);if(r.site_name){var i=r.site_name;return i=unescape(i.replace(/(u[a-z0-9]{4,4})/g,"%$1")),console.log(i),n.content+"(站名:"+i+")"}return n.content}},{data:"modify_time",title:"操作时间",width:150}]},p)))},downloadUrl:"/api/index.php/userlog?type=2"}}};return d.reportUilog_user=$.extend(!0,{},d.reportUilog_options,{extObj:{fetchData:function(e){t.getUserlog({page:this.curPage,type:"1",start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""})},downloadUrl:"/api/index.php/userlog?type=1"}}),d.reportUilog_other=$.extend(!0,{},d.reportUilog_options,{extObj:{fetchData:function(e){t.getUserlog({page:this.curPage,type:"3",start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""})},downloadUrl:"/api/index.php/userlog?type=3"}}),d.uilog_options=$.extend(!0,{},d.reportUilog_options,{extObj:{getNavData:function(){return n.getSites()},fetchData:function(e){t.getUserlog({page:this.curPage,type:"2",start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""})},downloadUrl:"/api/index.php/userlog?type=2"}}),d.uilog_user=$.extend(!0,{},d.reportUilog_user,{extObj:{fetchData:function(e){t.getUserlog({page:this.curPage,type:"1",start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""})},downloadUrl:"/api/index.php/userlog?type=1"}}),d.uilog_other=$.extend(!0,{},d.reportUilog_other,{extObj:{fetchData:function(e){t.getUserlog({page:this.curPage,type:"3",start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""})},downloadUrl:"/api/index.php/userlog?type=3"}}),d.qureyStation=$.extend(!0,{},d.station,{extObj:{extEvent:function(){var e=this;e.listenTo(Backbone.Events,"qurey_stationColsChange",function(t){console.log("query station col change"),e.destoryPlugin(),e.render(1)})},fetchData:function(){var e={},r=n.getSites(),i;this.ids&&this.ids.sid?i=this.ids.sid:i=r.ids.join(","),$.extend(e,{id:i});if($("#beginTime").val()==""){alert("请选择时间");return}if($("#startTime").val()==""){alert("请选择时间");return}t.getStationHistoryData({id:i,page:this.curPage,start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""})},downloadUrl:"/api/index.php/query/"}}),d.qureyGroup=$.extend(!0,{},d.group,{extObj:{extEvent:function(){var e=this;e.listenTo(Backbone.Events,"qurey_groupColsChange",function(t){e.destoryPlugin(),e.render(1)})},fetchData:function(e){var e={},r,i=n.getGroups();if($("#beginTime").val()==""){alert("请选择时间");return}if($("#startTime").val()==""){alert("请选择时间");return}t.getGroupHistoryData({id:i.ids.join(","),page:this.curPage,start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""})},downloadUrl:"/api/index.php/query/groupmodule"}}),d.qureyBattery=$.extend(!0,{},d.battery,{extObj:{extEvent:function(){var e=this;e.listenTo(Backbone.Events,"qurey_batteryColsChange",function(t){e.destoryPlugin(),e.render(1)})},fetchData:function(e){var e={},r=n.getBatteryIds(),i;this.ids&&this.ids.sid?i=this.ids.sid:i=r.ids.join(",");if($("#beginTime").val()==""){alert("请选择时间");return}if($("#startTime").val()==""){alert("请选择时间");return}t.getBatteryHistoryData({id:i,page:this.curPage,start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""})},refresh:function(){this.fetchData()},downloadUrl:"/api/index.php/query/batterymodule"}}),d.qureyCaution=$.extend(!0,{},d.caution,{extObj:{fetchData:function(e){var e={},r=n.getBatteryIds(),i;this.ids&&this.ids.sid?i=this.ids.sid:i=r.ids.join(",");if($("#beginTime").val()==""){alert("请选择时间");return}if($("#startTime").val()==""){alert("请选择时间");return}var s=$("#cationCategory").val();t.getCautionsData({cautionType:s,type:1,id:i,page:this.curPage,start:$("#beginTime").val()?+(new Date($("#beginTime").val())):"",end:$("#endTime").val()?+(new Date($("#endTime").val())):""})},refresh:function(){this.fetchData()},downloadUrl:"/api/index.php/query/batterymodule",render:function(){var e=this;return e.listPlugin&&e.listPlugin[0]?(e.updateList(),e.updateAtype()):(e.updateAtype(),this.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:this.data,paging:!1,scrollX:s.getListHeight(),columns:[{data:"site_name",title:"站名",width:150,sClass:"site_name_left",render:function(e,t,n){return"<div class='show_station_detail' style='color:blue;cursor:pointer;' id='"+(n.sn_key.substring(0,10)+"0000")+"'>"+e+"</div>"}},{data:"sn_key",title:"站号",width:80,render:function(e,t,n){return n.sid}},{data:"sn_key",title:"组号",width:80,render:function(e,t,n){return n.type=="battery"||n.type=="group"?n.sn_key.substring(10,12):""}},{data:"sn_key",title:"电池号",width:80,render:function(e,t,n){return n.type=="battery"?n.sn_key.substring(12,14):""}},{data:"time",title:"时间",width:200},{data:"desc",title:"警情内容",width:200,render:function(e,t,n){var r=n.desc,i="";return r.indexOf("橙")>-1?i="#e7691d":r.indexOf("黄")>-1?i="#fabd05":i="#f20f0f","<div style='color:"+i+"'>"+e+"</div>"}},{data:"current",title:"数值",width:80,render:function(e,t,n){var r=n.desc,i="";return r.indexOf("橙")>-1?i="#e7691d":r.indexOf("黄")>-1?i="#fabd05":i="#f20f0f","<div style='font-weight:bold;color:"+i+"'>"+e+"</div>"}},{data:"markup",title:"操作记录",render:function(e,t,n){var r=e==null?"":e;return n.status==2?'<div style="text-align:left;">已忽略</div>':'<div style="text-align:left;">'+r+"</div>"}},{data:"contact",title:"操作人",width:80},{data:"markuptime",title:"操作时间",width:200}]})))),this}}}),d.IRCollect=$.extend(!0,{},d.station,{extObj:{fetchData:function(e){var e={};e.page=this.curPage,t.getIRCollectData(e)},downloadUrl:"/api/index.php/query/groupmodule",extEvent:function(){var e=this;this.listenTo(Backbone.Events,"rCollect:start",function(t){o.loadTips.show("正在与站点联系采集相关电池内阻，请稍后"),setTimeout(function(){o.loadTips.close()},5e3),$("body").everyTime("2s","irc",function(){console.log("get IRCollect"),e.fetchData()})}),this.listenTo(Backbone.Events,"rCollect:start:fail",function(e){o.loadTips.show("采集失败，请重试"),setTimeout(function(){o.loadTips.close()},5e3)})},render:function(){var t=this;t.listPlugin&&t.listPlugin[0]?t.updateList():e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,language:{emptyTable:"采集内阻数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"sid",title:"站号",width:100},{data:"site_name",title:"站点简称",width:200},{data:"stationid",title:"物理地址"},{data:"groupid",title:"组号"},{data:"batteryid",title:"电池号"},{data:"R",title:"内阻值"},{data:"collect_time",title:"完成时间"}]},p)))})}}}),d.adminConfig=$.extend(!0,{},d.station,{extObj:{fetchData:function(e){t.getPersonalsData(e)},render:function(){var t=this;return this.destoryPlugin(),$("#lock").hide(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"unit",title:"单位名称"},{data:"name",title:"姓名"},{data:"username",title:"登陆名"},{data:"phone",title:"联系电话"},{data:"backup_phone",title:"备用电话"},{data:"email",title:"邮箱"},{data:"postname",title:"职位"},{data:"duty_num",title:"班次"},{data:"location",title:"住址"},{data:"areaname",title:"管理范围",render:function(e){var t=e.split(" ");return t.length>1&&t.shift(),"<div>"+t.join(" ")+"</div>"}},{data:"rolename",title:"角色"}]}))),t.checkAllRows()}),this}}}),d.limitation=$.extend(!0,{},d.limitationSetting,{extObj:{render:function(){var t=this;t.destoryPlugin(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,language:{emptyTable:"站点数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"sid",title:"站号",width:100},{data:"site_name",title:"站点简称",width:200},{data:"serial_number",title:"物理地址"}]},p)))})}}}),d.baseinfo_queryStationSituation=$.extend(!0,{},d.stationInfo_stationSituation,{extObj:{downloadUrl:"/api/index.php/query",getNavData:function(){return n.getSites()},render:function(){var t=this;return t.destoryPlugin(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,language:{emptyTable:"站点数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),columns:[{data:"sid",title:"站号",width:80},{data:"site_name",title:"站点简称",width:100},{data:"serial_number",title:"物理地址",width:100},{data:"site_name",title:"站点全称",width:100},{data:"site_location",title:"站点地址",width:100},{data:"site_property",title:"站点性质",width:150},{data:"areaname",title:"隶属区域",width:150},{data:"fix_phone",title:"固定电话"},{data:"functionary",title:"负责人",width:120,render:function(e,t,n){var r=[];return n.functionary_sms&&(r.push("<span>"),r.push('<img src="/images/sms.png">'),r.push("</span>")),n.functionary_mail&&(r.push("<span>"),r.push('<img src="/images/email.png">'),r.push("</span>")),"<span>"+e+"</span>"+r.join("")}},{data:"functionary_phone",title:"负责人电话",width:120},{data:"device_owner",title:"设备负责人",width:120},{data:"device_owner_phone",title:"设备负责人电话",width:120},{data:"emergency_person",title:"紧急联系人姓名",width:120},{data:"emergency_phone",title:"紧急联系人手机",width:120},{data:"area_owner",title:"区域主管",width:120,render:function(e,t,n){var r=[];return n.area_owner_sms&&(r.push("<span>"),r.push('<img src="/images/sms.png">'),r.push("</span>")),n.area_owner_mail&&(r.push("<span>"),r.push('<img src="/images/email.png">'),r.push("</span>")),"<span>"+e+"</span>"+r.join("")}},{data:"area_owner_phone",title:"区域主管电话",width:120},{data:"parent_owner",title:"上级主管",width:120,render:function(e,t,n){var r=[];return n.parent_owner_sms&&(r.push("<span>"),r.push('<img src="/images/sms.png">'),r.push("</span>")),n.parent_owner_mail&&(r.push("<span>"),r.push('<img src="/images/email.png">'),r.push("</span>")),"<span>"+e+"</span>"+r.join("")}},{data:"parent_owner_phone",title:"上级主管电话"},{data:"groups",title:"电池组数",width:100},{data:"batteries",title:"每组电池数",width:80},{data:"postal_code",title:"邮政编码",width:80},{data:"site_latitude",title:"站点纬度",width:80},{data:"site_longitude",title:"站点经度",width:80},{data:"ipaddress",title:"IP地址",width:100},{data:"ipaddress_method",title:"控制器IP地址或方式",width:150},{data:"site_control_type",title:"站点控制器型号",width:100},{data:"bms_install_date",title:"BMS系统安装日期",width:150},{data:"group_collect_type",title:"组电流采集器型号",width:150},{data:"group_collect_num",title:"组电流采集器数量",width:150},{data:"inductor_brand",title:"互感器品牌",width:150},{data:"group_collect_install_type",title:"组电流采集器安装模式",width:150},{data:"battery_collect_type",title:"电池数据采集器型号",width:150},{data:"battery_collect_num",title:"电池数据采集器数量",width:150},{data:"humiture_type",title:"环境温湿度方式",width:150},{data:"has_light",title:"灯光报警",width:80},{data:"has_speaker",title:"声音报警",width:80},{data:"has_sms",title:"短信",width:80},{data:"has_smart_control",title:"智能控制",width:80},{data:"has_group_TH_control",title:"温湿度传感器",width:150},{data:"has_group_HO_control",title:"氢氧气传感器",width:150},{data:"device_mac",title:"网口MAC",width:150},{data:"remark",title:"备注",width:150}]},p)))}),this}}}),d.baseinfo_queryBatterys=$.extend(!0,{},d.stationInfo_batterys,{extObj:{getNavData:function(){return n.getSites()},fetchData:function(e){var e={},r=n.getSites(),i;this.ids&&this.ids.sid?i=this.ids.sid:i=r.ids.join(","),console.log(r),$.extend(e,{id:i}),t.getBatteryInfosData(e)},downloadUrl:"/api/index.php/query/batterymodule",render:function(){var t=this;return t.destoryPlugin(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,language:{emptyTable:"电池数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"sid",title:"站号",width:100},{data:"site_name",title:"站点简称",width:100},{data:"battery_factory",title:"生产厂家",width:150},{data:"battery_num",title:"电池型号",width:150},{data:"battery_date",title:"生产日期",width:150},{data:"battery_voltage",title:"标称电压（V）",width:150},{data:"battery_oum",title:"标称内阻（MΩ）",width:150},{data:"battery_dianrong",title:"电池标称容量（Ah）",width:150},{data:"battery_float_voltage",title:"浮充标准电压（V）",width:150},{data:"battery_max_current",title:"最大充电电流（A）",width:150},{data:"battery_max_discharge_current",title:"最大放电电流（A）",width:150},{data:"battery_float_up",title:"浮充电压上限（V）",width:150},{data:"battery_float_dow",title:"电池浮充电压下限（V）",width:150},{data:"battery_discharge_down",title:"放电电压下限（V）",width:150},{data:"battery_scrap_date",title:"强制报废日期",width:150},{data:"battery_life",title:"设计寿命（年）",width:150},{data:"battery_column_type",title:"电池级柱类型",width:150},{data:"battery_temperature",title:"温度要求（℃）",width:150},{data:"battery_humidity",title:"湿度要求（%）",width:150},{data:"battery_type",title:"电池种类",width:150},{data:"battery_factory_phone",title:"电池厂家联系电话",width:150},{data:"remark",title:"备注",width:150}]},p)))}),this}}}),d.baseinfo_queryInstitutions=$.extend(!0,{},d.stationInfo_institutions,{extObj:{getNavData:function(){return n.getSites()},render:function(){var t=this;return t.destoryPlugin(),$("#auto").width("100%"),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"company_name",title:"单位名称",width:150},{data:"company_address",title:"单位地址",width:300},{data:"area_name",title:"管辖"},{data:"parent_area",title:"隶属",width:100},{data:"supervisor_name",title:"主管领导姓名",width:80},{data:"supervisor_phone",title:"主管领导电话",width:100},{data:"owner",title:"部门负责人",width:80},{data:"owner_phone",title:"部门负责人电话",width:100},{data:"longitude",title:"经度",width:80},{data:"latitude",title:"纬度",width:80},{data:"station_num",title:"所辖站点个数",width:80},{data:"area_level",title:"隶属层级",width:100},{data:"network_type",title:"联网方式",width:100},{data:"bandwidth",title:"网络带宽",width:100},{data:"ipaddr",title:"IP地址",width:100},{data:"computer_brand",title:"上位机品牌",width:100},{data:"computer_os",title:"上位机操作系统",width:100},{data:"computer_conf",title:"主机配置",width:100},{data:"browser_name",title:"浏览器名称",width:100},{data:"server_capacity",title:"服务器容量",width:100},{data:"server_type",title:"服务器型号",width:100},{data:"cloud_address",title:"云空间地址",width:100},{data:"backup_period",title:"数据备份周期",width:100},{data:"backup_type",title:"数据备份方式",width:100},{data:"supervisor_depname",title:"监控部门名称",width:100},{data:"monitor_name1",title:"监控部门负责人",width:100},{data:"monitor_phone1",title:"监控部门负责人电话",width:100},{data:"monitor_name2",title:"其他联系人",width:100},{data:"monitor_phone2",title:"其他联系人电话",width:100},{data:"monitor_name3",title:"其他联系人",width:100},{data:"monitor_phone3",title:"其他联系人电话",width:100},{data:"monitor_tel1",title:"监控部门固定电话1",width:100},{data:"monitor_tel2",title:"监控部门固定电话2",width:100},{data:"duty_status",title:"值守状态/班次",width:80},{data:"manage",title:"管理员",width:80},{data:"viewer",title:"观察员",width:80},{data:"remark",title:"备注",width:150}]},p)))}),this}}}),d.baseinfo_queryMonitorSeller=$.extend(!0,{},d.stationInfo_monitorSeller,{extObj:{render:function(){var t=this;return t.destoryPlugin(),$("#auto").width("100%"),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"bms_company",title:"生产厂家",width:200},{data:"bms_device_addr",title:"厂家地址",width:200},{data:"bms_postcode",title:"邮编",width:200},{data:"bms_url",title:"支持网址",width:200},{data:"bms_tel",title:"支持固话",width:200},{data:"bms_phone",title:"手机",width:200},{data:"bms_service_phone",title:"服务商电话",width:200},{data:"bms_service_name",title:"服务商名称",width:200},{data:"bms_service_contact",title:"服务商联系人",width:200},{data:"bms_service_url",title:"服务商地址",width:300},{data:"bms_version",title:"软件版本号",width:150},{data:"bms_update_mark",title:"软件升级记录",width:170},{data:"bms_mark",title:"备注",width:300}]},p)))}),this}}}),d.baseinfo_queryUpsInfo=$.extend(!0,{},d.stationInfo_upsInfo,{extObj:{getNavData:function(){return n.getSites()},fetchData:function(e){var e={},r=n.getSites(),i;this.ids&&this.ids.sid?i=this.ids.sid:i=r.ids.join(","),console.log(r),$.extend(e,{id:i}),t.getUpsInfosData(e)},render:function(){var t=this;return t.destoryPlugin(),$("#auto").width("100%"),console.log(d.stationInfo_upsInfo),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"sid",title:"站号",width:80},{data:"site_name",title:"站名",width:250},{data:"ups_factory",title:"生产厂家",width:250},{data:"ups_type",title:"型号",width:100},{data:"ups_create_date",title:"生产日期",width:150},{data:"ups_install_date",title:"安装日期",width:150},{data:"ups_power",title:"功率/容量（V/A）",width:150},{data:"ups_power_in",title:"输入功率（V/A）",width:150},{data:"ups_power_out",title:"输出功率（V/A）",width:150},{data:"ups_battery_vol",title:"外接电池电压（V）",width:150},{data:"ups_battery_current",title:"外接电池电流（A）",width:150},{data:"ac_protect",title:"AC过流保护（V/A）",width:150},{data:"dc_protect",title:"DC过流保护（V/A）",width:150},{data:"on_net",title:"联网检测",width:150},{data:"alarm_content",title:"报警内容",width:150},{data:"discharge_protect",title:"放电保护值（%）",width:150},{data:"redundancy_num",title:"冗余数量(台)",width:150},{data:"floting_charge",title:"浮充电压（V）",width:150},{data:"ups_vdc",title:"电压范围(V)",width:150},{data:"ups_reserve_hour",title:"额定候备时间（W/H）",width:250},{data:"ups_charge_mode",title:"充电方式",width:100},{data:"ups_max_charge",title:"最大充电电流（A）",width:150},{data:"ups_max_discharge",title:"最大放电电流（A）",width:150},{data:"ups_period_days",title:"规定维护周期（天）",width:150},{data:"ups_discharge_time",title:"维护放电时长（分钟）",width:150},{data:"ups_discharge_capacity",title:"维护放电容量（%）",width:150},{data:"ups_maintain_date",title:"维护到期日",width:150},{data:"ups_vender_phone",title:"厂家联系电话",width:120},{data:"ups_service",title:"服务商名称",width:120},{data:"ups_vender",title:"联系人",width:120},{data:"ups_service_phone",title:"服务商电话",width:100},{data:"remark",title:"备注",width:150}]},p)))}),this}}}),d.option_groupOption=$.extend(!0,{},d.optionSetting_groupOption,{extObj:{getNavData:function(){return n.getSites()},extEvent:function(){var e=this;e.listenTo(Backbone.Events,"curstation:change",function(t){e.ids=null;if(!$(e.el).length||!$(e.el).is(":visible"))return;var n=e.getNavData();typeof n=="undefined"||!n||!n.ids.length?(e.data=[],e.render()):e.fetchData()})},fetchData:function(e){var e={},r=n.getSites(),i;this.ids&&this.ids.sid?i=this.ids.sid:i=r.ids.join(","),console.log(r),$.extend(e,{id:i}),t.getGroupOptionData(e)},render:function(){var t=this;return this.destoryPlugin(),$("#lock").hide(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"site_name",title:"站名称",width:100},{data:"sid",title:"站号",width:100},{data:"GroBatNum",title:"每组电池数",width:100},{data:"CurRange",title:"组电流量程",width:100},{data:"KI",title:"组电流系数",width:100},{data:"ZeroCurADC",title:"组电流零位",width:100},{data:"DisChaLim_R",title:"组放电电流超上限_红",width:100},{data:"DisChaLim_O",title:"组放电电流将达上限_橙",width:100},{data:"DisChaLim_Y",title:"组放电电流偏高_黄",width:100},{data:"ChaLim_R",title:"组充电电流超上限_红",width:100},{data:"ChaLim_O",title:"组充电电流将达上限_橙",width:100},{data:"ChaLim_Y",title:"组充电电流偏高_黄",width:100},{data:"MaxTem_R",title:"组温度超上限_红",width:100},{data:"MaxTem_O",title:"组温度将达上限_橙",width:100},{data:"MaxTem_Y",title:"组温度偏高_黄",width:100},{data:"MinTem_R",title:"组温度超下限_红",width:100},{data:"MinTem_O",title:"组温度将达下限_橙",width:100},{data:"MinTem_Y",title:"组温度偏低_黄",width:100},{data:"ChaCriterion",title:"组充放电判据",width:100}]})))}),this}}}),d.option_stationOption=$.extend(!0,{},d.optionSetting_stationOption,{extObj:{getNavData:function(){return n.getSites()},extEvent:function(){var e=this;e.listenTo(Backbone.Events,"curstation:change",function(t){e.ids=null;if(!$(e.el).length||!$(e.el).is(":visible"))return;var n=e.getNavData();typeof n=="undefined"||!n||!n.ids.length?(e.data=[],e.render()):e.fetchData()})},fetchData:function(e){var e={},r=n.getSites(),i;this.ids&&this.ids.sid?i=this.ids.sid:i=r.ids.join(","),console.log(r),$.extend(e,{id:i}),t.getSationOptionsData(e)},render:function(){var t=this;return this.destoryPlugin(),$("#lock").hide(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:1},columns:[{data:"sn_key",title:"站MAC",width:100},{data:"site_name",title:"站名称",width:100},{data:"sid",title:"站号",width:100},{data:"Groups",title:"站内组数",width:100},{data:"GroBats",title:"每组电池数",width:100},{data:"CurSensor",title:"电流传感安装状态",width:100},{data:"Time_MR",title:"内阻测量间隔",width:100},{data:"SampleInt",title:"采集间隔",width:100},{data:"MaxTem_R",title:"高温报警_红",width:100},{data:"MaxTem_O",title:"高温报警_橙",width:100},{data:"MaxTem_Y",title:"高温报警_黄",width:100},{data:"MinTem_R",title:"低温报警_红",width:100},{data:"MinTem_O",title:"低温报警_橙",width:100},{data:"MinTem_Y",title:"低温报警_黄",width:100},{data:"MaxHum_R",title:"高湿报警_红",width:100},{data:"MaxHum_O",title:"高湿报警_橙",width:100},{data:"MaxHum_Y",title:"高湿报警_黄",width:100},{data:"MinHum_R",title:"低湿报警_红",width:100},{data:"MinHum_O",title:"低湿报警_橙",width:100},{data:"MinHum_Y",title:"低湿报警_黄",width:100},{data:"CurRange",title:"站电流量程",width:100},{data:"KI",title:"站电流系数",width:100},{data:"ZeroCurADC",title:"站电流零位",width:100},{data:"DisChaLim_R",title:"放电报警_红",width:100},{data:"DisChaLim_O",title:"放电报警_橙",width:100},{data:"DisChaLim_Y",title:"放电报警_黄",width:100},{data:"ChaLim_R",title:"充电报警_红",width:100},{data:"ChaLim_O",title:"充电报警_橙",width:100},{data:"ChaLim_Y",title:"充电报警_黄",width:100},{data:"HiVolLim_R",title:"高压报警_红",width:100},{data:"HiVolLim_O",title:"高压报警_橙",width:100},{data:"HiVolLim_Y",title:"高压报警_黄",width:100},{data:"LoVolLim_R",title:"低压报警_红",width:100},{data:"LoVolLim_O",title:"低压报警_橙",width:100},{data:"LoVolLim_Y",title:"低压报警_黄",width:100},{data:"ChaCriterion",title:"站充放电判据",width:100}]})))}),this}}}),d.option_batteryOption=$.extend(!0,{},d.optionSetting_batteryOption,{extObj:{getNavData:function(){return n.getSites()},extEvent:function(){var e=this;e.listenTo(Backbone.Events,"curstation:change",function(t){e.ids=null;if(!$(e.el).length||!$(e.el).is(":visible"))return;var n=e.getNavData();typeof n=="undefined"||!n||!n.ids.length?(e.data=[],e.render()):e.fetchData()})},fetchData:function(e){var e={},r=n.getSites(),i;this.ids&&this.ids.sid?i=this.ids.sid:i=r.ids.join(","),console.log(r),$.extend(e,{id:i}),t.getBatteryOptionsData(e)},render:function(){var t=this;return this.destoryPlugin(),$("#auto").width("100%"),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{},p,{data:t.data,scrollX:s.getListHeight(),scrollY:s.getListHeight(),fixedColumns:{leftColumns:2},columns:[{data:"site_name",title:"站名称",width:100},{data:"sid",title:"站号",width:100},{data:"KV",title:"电压系数",width:100},{data:"KT",title:"温度系数",width:100},{data:"KI",title:"激励电流系数",width:100},{data:"T0",title:"T0校准温度",width:100},{data:"ADC_T0",title:"T0温度码",width:100},{data:"T1",title:"T1校准温度",width:100},{data:"ADC_T1",title:"T1温度码",width:100},{data:"MaxU_R",title:"电池电压超上限_红",width:100},{data:"MaxU_O",title:"电池电压将达上限_橙",width:100},{data:"MaxU_Y",title:"电池电压偏高_黄",width:100},{data:"MinU_R",title:"电池电压超下限_红",width:100},{data:"MinU_O",title:"电池电压将达下限_橙",width:100},{data:"MinU_Y",title:"电池电压偏低_黄",width:100},{data:"MaxT_R",title:"电池温度超上限_红",width:100},{data:"MaxT_O",title:"电池温度将达上限_橙",width:100},{data:"MaxT_Y",title:"电池温度偏高_黄",width:100},{data:"MinT_R",title:"电池温度超下限_红",width:100},{data:"MinT_O",title:"电池温度将达下限_橙",width:100},{data:"MinT_Y",title:"电池温度偏低_黄",width:100},{data:"MaxR_R",title:"电池内阻超上限_红",width:100},{data:"MaxR_O",title:"电池内阻将达上限_橙",width:100},{data:"MaxR_Y",title:"电池内阻偏高_黄",width:100},{data:"MaxDevU_R",title:"电池电压偏差_红",width:100},{data:"MaxDevU_O",title:"电池电压偏差_橙",width:100},{data:"MaxDevU_Y",title:"电池电压偏差_黄",width:100},{data:"MaxDevT_R",title:"电池温度偏差_红",width:100},{data:"MaxDevT_O",title:"电池温度偏差_橙",width:100},{data:"MaxDevT_Y",title:"电池温度偏差_黄",width:100},{data:"MaxDevR_R",title:"电池内阻偏差_红",width:100},{data:"MaxDevR_O",title:"电池内阻偏差_橙",width:100},{data:"MaxDevR_Y",title:"电池内阻偏差_黄",width:100}]})))}),this}}}),d.equipment=$.extend(!0,{},d.equipmentSetting,{extObj:{render:function(){var t=this;t.destoryPlugin(),e(["fixedColumn"],function(){t.listPlugin.push($("#auto table").DataTable($.extend(!0,{data:t.data,language:{emptyTable:"站点数据为空"},scrollX:s.getListHeight(),scrollY:s.getListHeight(),columns:[{data:"sid",title:"站号",width:100},{data:"Device_name",title:"名称",width:100},{data:"Device_fun",title:"功能",width:100},{data:"Device_Factory_Name",title:"生产厂家",width:100},{data:"Device_Factory_Address",title:"厂家地址",width:200},{data:"Device_Factory_PostCode",title:"厂家邮编",width:100},{data:"Device_Factory_website",title:"技术支持网址",width:150},{data:"Device_Factory_Technology_cable_phone",title:"技术支持固话",width:100},{data:"Device_Factory_Technology_cellphone",title:"技术支持手机"}]},p)))})}}}),$(window).resize(function(){u&&u.listPlugin&&u.fetchData()}),{init:function(e,t,n,i){c=e,f=t,l=n,v(t,n,i),r.init();var s="",o="";return $.each([{data:"battery_sn_key",title:"电池序列号",width:100},{data:"sid",title:"站号",width:50},{data:"gid",title:"组号",width:50},{data:"bid",title:"电池号",width:50},{data:"CurrentAdjust_KV",title:"电压测量修正系数KV",width:200},{data:"TemperatureAdjust_KT",title:"温度测量修正系数KI",width:200},{data:"T0_ADC",title:"T0校准点ADC码",width:200},{data:"T0_Temperature",title:"T0校准点温度值（℃）",width:200},{data:"T1_ADC",title:"T1校准点ADC码",width:200},{data:"T1_Temperature",title:"T1校准点温度值（℃）",width:200},{data:"Rin_Span",title:"内阻测量量程",width:200},{data:"OSC",title:"OSC_Voltage",width:200},{data:"BatteryU_H",title:"电池电压高压限（V）",width:200},{data:"BaterryU_L",title:"电池电压低压限（V）",width:200},{data:"Electrode_T_H_Limit",title:"电极温度高温限（℃）",width:200},{data:"Electrode_T_L_Limit",title:"电极温度低温限（℃）",width:200},{data:"Rin_High_Limit",title:"电池内阻高限（mΩ）",width:200},{data:"Rin_Adjust_KR",title:"内阻测量修正系数KR",width:200},{data:"PreAmp_KA",title:"前置放大器修正系数KA",width:200},{data:"Rin_ExciteI_KI",title:"内阻测量激励电流修正系数KI",width:200}],function(e,t){o+=_.template('<label class="item-title" for="name"><%= title %>: </label> <input class="input-w-1" type="text" key="<%=data%>"/>')(t),e%2&&(s+='<div class="rowElem">'+o+"</div>",o="")}),o&&(s+='<div class="rowElem">'+o+"</div>"),this},isOver:function(e){if(typeof e=="undefined")return!!h;h=!!e},destory:function(){return u&&(u.destroy(),u=null,$("#list").html("")),this}}}),define("blocks/charts",["require","api","ui","backbone"],function(e,t,n,r){var i,s=!1,o,u,a,f,l="",c,h="bar",p={0:"green",1:"#f76363",2:"#ff975e",3:"#ffee2c"},d={0:"image://images/chart-normal.png",1:"image://images/chart-caution.png",2:"image://images/chart-alert.png",3:"image://images/chart-notice.png"},v={data:null,navPlugin:null,el:$(".chart-wrap"),chart:null,chartOption:{},chartType:"line",origindata:null,chartName:"",initialize:function(e){var t=this;t.listenTo(r.Events,"listdata:update stationdata:get listdata:update:fail listdata:get listdata:get:fail",function(e){t.updateChart(e)}),t.listenTo(r.Events,"curstation:change",function(e){if(typeof navData=="undefined"||!navData||!navData.ids.length||!e)t.origindata={},t.origindata.list=[],t.updateChart()})},clear:function(){},getLevel:function(e,t){},updateChart:function(t){var n=this;n.origindata=t||n.origindata;var r=n.getFieldValue(),i="station",u=window.location.hash,a=[],f=[];n.origindata.list||(n.origindata.list=[]);for(var l=0;l<n.origindata.list.length;l++){var c=n.origindata.list[l];u.indexOf("station")>-1||u.indexOf("queryStation")>-1?f.push(c.site_name+"-"+c.sid):u.indexOf("group")>-1||u.indexOf("queryGroup")>-1?f.push(c.site_name+"-"+c.sid+"\n"+"组"+c.gid):(u.indexOf("battery")>-1||u.indexOf("queryBattery")>-1)&&f.push(c.site_name+"-"+c.sid+"\n"+"组"+c.gid+"-"+c.bid);var v=c[r.substring(0,3)+"Col"]||0;if(r=="Dev_R"||r=="Dev_T"||r=="Dev_U")v=c[r.replace("_","")+"Col"];a.push({value:c[r],symbol:d[v],symbolSize:14,lineStyle:{normal:{color:"yellow",width:2}},smooth:!0,itemStyle:{normal:{color:p[v]}}})}a?e(["charts"],function(e){o=e,n.createOption(h,a,f).render(),s=!0}):e(["charts"],function(e){o=e,n.createOption(h,a,f).render(),s=!0})},onChageField:function(e){s=!1,e&&(this.currentFieldElement=e),this.updateChart()},getFieldValue:function(e){return this.currentFieldElement||(this.currentFieldElement=$($(".chart-wrap .switch-btn:visible")[0])),e&&(this.currentFieldElement=e),$(".chart-wrap h4").text(this.currentFieldElement.text()),this.chartName=this.currentFieldElement.text(),$(".chart-wrap .switch-btn").removeClass("active"),$(this.currentFieldElement).addClass("active"),this.currentFieldElement.attr("field")},createOption:function(e,t,n){var r=this,i=[],s=[{type:"category",data:n?n:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"]}],o=[{type:"value"}],u={},a={normal:"green",notice:"#ffee2c",alert:"#ff975e",caution:"#f86464"},f={symbolSize:8,color:"green"},l={symbolSize:8},c=[];return c.push($.extend(!0,l,{type:e,data:t,barMaxWidth:40})),r.chartOption={series:[{name:r.chartName,type:e,data:t,barMaxWidth:30,symbolSize:8,lineStyle:{normal:{color:"#000"}},smooth:!0}],xAxis:s,yAxis:o,grid:u,tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{b}<br/>当前值:{c}"},toolbox:{show:!0}},this},switchChartType:function(e){return h=h=="line"?"bar":"line",this},render:function(){n.resizeChartBox(),this.chart||(this.chart=o.init($("#chart")[0])),this.chart.setOption(this.chartOption)}};return $(window).resize(function(){i&&i.chart&&i.chart.resize()}),{init:function(e,t,n){return u=e,a=t,f=f,l="",$(".down").show(),i=new(r.View.extend(v)),$(".chart-wrap").off("click"),$(".chart-wrap").on("click",".switch-btn",function(e){if($(this).hasClass("disabled")){e.preventDefault();return}i.onChageField($(this))}),$(".chart-wrap").on("click",".shift-btn",function(){i.switchChartType($(this)),i.onChageField()}),this},isOver:function(e){return!0},destory:function(){i.stopListening(),$(".down").hide()}}}),define("blocks/listSearch",["require","api","context"],function(e,t,n){return{init:function(e){$("#beginTime").datetimepicker({changeMonth:!0,showSecond:!1,showMillisec:!1,showMicrosec:!1,maxDate:new Date,onClose:function(e){$("#endTime").datetimepicker("option","minDate",e)}}),$("#endTime").datetimepicker({changeMonth:!0,showSecond:!1,showMillisec:!1,showMicrosec:!1,maxDate:new Date,onClose:function(e){$("#beginTime").datetimepicker("option","maxDate",e)}}),$("#beginTime").datetimepicker("setDate",new Date(new Date-6048e5)),$("#endTime").datetimepicker("setDate",new Date),$("#searchBtn").click(function(){})},getValue:function(){},isOver:function(){return!0}}}),define("main",["require","backbone","context","ui","common","stationsinfoDialog","api","stationsinfoDialog","map","blocks/list","blocks/nav","blocks/charts","blocks/listSearch","blocks/list","blocks/nav"],function(e,t,n,r,i,s,o){function l(n,u,a,f){var l=$(".stationPop");$("body").stopTime("irc"),l.off("click").on("click",function(e){var t=navTree.getSites().ids;if(t<0){alert("请选择站点");return}for(var n=0;n<t.length;n++)t[n]=t[n]+"0000";s.show(t.join(","))}),$(".exportdata").hide();var p=JSON.parse(localStorage.getItem("userinfo")).role,d=JSON.parse(localStorage.getItem("userinfo")).canedit,m=JSON.parse(localStorage.getItem("userinfo")).area;p==2&&d!=1&&($(".list-edit-btn").hide(),$(".list-del-btn").hide(),$("#listBtns li.undis").hide()),p!=1?$(".manage.newstations").hide():n=="manage"?$(".manage.newstations").show():$(".manage.newstations").hide(),p==3&&$(".switch-btn.settings").hide(),p==2&&($("#addBMS").hide(),$("#addCompany").hide(),$("#addBattery").hide(),$("#addUps").hide(),$(".settings.message").hide()),p==2&&m!="*"&&$(".optionSetting.otherOption").hide(),t.listenTo(t.Events,"stat",function(e){$("#stat_login_time").html(e.loginTime),$("#stat_sys_uptime").html(e.startTime),$("#stat_manager").html(e.name)}),o.stat(),$("#logout").off("click").bind("click",function(){confirm("确定要退出系统吗？")&&$.ajax({url:"/api/index.php/login/loginOut",type:"get",success:function(){localStorage.removeItem("userinfo"),window.location.href="/"}})});var g=arguments,y=$("#navTree"),b=$("#collect").hide(),w=$("#collectIRWrap").hide(),E=$("#duration").hide(),S=$(".search-jqtransform").hide();l=$(".stationPop"),$(".cj-btn").click(function(){}),$stationPopDialog=null,e(["js/dialog-stationsinfo"],function(e){$stationPopDialog=e.init()}),$("#dataItem").html("");if("map"==n){e(["map"],function(e){r.resize(),e.init()});return}setTimeout(function(){var e=["#/manage/station","#/manage/group","#/manage/battery","#/manage/caution","#/manage/systemAlarm"],t=parseInt($("#collectDuration").val()),n=window.location.hash;e.indexOf(n)>-1||n.indexOf("manage/station")>-1?t&&localStorage.getItem("collecting")=="true"?($("body").addClass("collecting").everyTime(t+"s","collect",o.collect),$("#startCollectBtn").hide(),$(".tzcj").css("display","block")):($("body").removeClass("collecting").stopTime("collect",o.collect),$("#startCollectBtn").css("display","block"),$(".tzcj").hide()):($("body").removeClass("collecting").stopTime("collect",o.collect),$("#startCollectBtn").css("display","none"),$(".tzcj").hide())},1e3),i.loadTips.show("系统加载中，请稍后..."),/^caution$/.test(u)&&($("#dataItem").html($("#listTpl").html()),r.downHide(!0),$(".atype").show(),$(".stationPop").show(),b.show(),u=="battery"?$(".list-bottom.undis").show():$(".list-bottom.upage").show(),r.switchChartBtns(u),e(["blocks/list","blocks/nav","api"],function(e,t,r){v(n,u,a),navTree?h([e],g):(h([t],g),t.run(function(){navTree=t,h([e],g)})),r.getLinkingStationNum().getParam({},"refresh:get"),c()})),/^newstations$/.test(u)&&($("#dataItem").html($("#listTpl").html()),r.downHide(!0),b.show(),$(".stationPop").hide(),u=="battery"?$(".list-bottom.undis").show():$(".list-bottom.upage").show(),r.switchChartBtns(u),e(["blocks/list","blocks/nav","api"],function(e,t,r){v(n,u,a),navTree?h([e],g):(h([t],g),t.run(function(){navTree=t,h([e],g)})),r.getLinkingStationNum().getParam({},"refresh:get"),c()})),/^systemAlarm$/.test(u)&&($("#dataItem").html($("#listTpl").html()),r.downHide(!0),b.show(),$(".stationPop").show(),u=="battery"?$(".list-bottom.undis").show():$(".list-bottom.upage").show(),r.switchChartBtns(u),e(["blocks/list","blocks/nav","api"],function(e,t,r){v(n,u,a),navTree?h([e],g):(h([t],g),t.run(function(){navTree=t,h([e],g)})),r.getLinkingStationNum().getParam({},"refresh:get"),c()})),/^(station|group|battery)$/.test(u)?($("#dataItem").html($("#listTpl").html()),r.downShow(!0),b.show(),$(".stationPop").show(),u=="battery"?$(".list-bottom.undis").show():$(".list-bottom.upage").show(),r.switchChartBtns(u),e(["blocks/charts","blocks/list","blocks/nav","api"],function(e,t,r,i){v(n,u,a),navTree?h([t,e],g):(h([r],g),r.run(function(){navTree=r,h([t,e],g)})),i.getLinkingStationNum().getParam({},"refresh:get"),c()})):/^(IRCollect)$/.test(u)?($(".stationPop").hide(),r.downHide(!0),$("#dataItem").html($("#listTpl").html()),w.show(),e(["blocks/list","blocks/nav"],function(e,t){h([t,e],g),v(n,u,a),navTree||(t.run(),navTree=t),c()})):/^(limitation|baseinfo|equipment|option|runlog|adminConfig)$/.test(u)?(r.downHide(!0),$(".stationPop").hide(),$("#dataItem").html($("#listTpl").html()),E.show(),e(["blocks/list","blocks/nav"],function(e,t){h([t,e],g),v(n,u,a),navTree||(t.run(),navTree=t),c()})):/^(uilog)$/.test(u)?($(".stationPop").hide(),$("#dataItem").html($("#listTpl").html()),r.downHide(!0),S.show(),S.jqTransform(),$(".exportdata").hide(),$(".list-bottom.upage").show(),$(".report-caution-selector",S).parents(".jqTransformSelectWrapper").hide(),$(".reportCaution",S).hide(),e(["blocks/listSearch","blocks/list","blocks/nav"],function(e,t,r){h([r,e,t],g),v(n,u,a),navTree||(r.run(),navTree=r),c()})):/^(qureyBattery|qureyStation|qureyGroup|qureyCaution)$/.test(u)?($("#dataItem").html($("#listTpl").html()),$(".stationPop").hide(),r.downShow(!1),S.show(),S.jqTransform(),$(".exportdata").hide(),$(".list-bottom.upage").show(),$(".report-caution-selector",S).parents(".jqTransformSelectWrapper").hide(),$(".reportCaution",S).hide(),/^qureyCaution$/.test(u)?($(".report-caution-selector",S).parents(".jqTransformSelectWrapper").show(),$(".reportCaution",S).show(),S.jqTransform(),r.downHide(!0),e(["blocks/listSearch","blocks/list","blocks/nav"],function(e,t,r){h([r,e,t],g),v(n,u,a),navTree||(r.run(),navTree=r),c()})):e(["blocks/listSearch","blocks/list","blocks/nav"],function(e,t,r){h([r,e,t],g),v(n,u,a),navTree||(r.run(),navTree=r),c()}),r.downShow(!1)):/^(reportUilog|chargeOrDischarge|deviationTrend|batteryLife|reportCaution)$/.test(u)?(r.downHide(!0),$(".stationPop").hide(),$(".exportdata").show(),$("#dataItem").html($("#listTpl").html()),S.show(),S.jqTransform(),u!="reportCaution"?($(".report-caution-selector",S).parents(".jqTransformSelectWrapper").hide(),$(".reportCaution",S).hide()):($(".report-caution-selector",S).parents(".jqTransformSelectWrapper").show(),$(".reportCaution",S).show()),$(".list-bottom.upage").show(),e(["blocks/listSearch","blocks/list","blocks/nav"],function(e,t,r){h([r,e,t],g),v(n,u,a),navTree||(r.run(),navTree=r),c()})):/^(stationOption)$/.test(u)?($(".stationPop").hide(),$("#dataItem").html($("#listTpl").html()),r.downHide(!0),S.show(),S.jqTransform(),$(".exportdata").show(),$(".list-bottom.upage").show(),$(".report-caution-selector",S).parents(".jqTransformSelectWrapper").hide(),$(".reportCaution",S).hide(),e(["blocks/listSearch","blocks/list","blocks/nav"],function(e,t,r){h([r,e,t],g),v(n,u,a),navTree||(r.run(),navTree=r),c()})):/^(manager|message|optionSetting|cautionEquipmentSetting|equipmentSetting|update|limitationSetting)$/.test(u)?(r.downHide(!0),$(".stationPop").hide(),"otherOption"==a?e(["blocks/nav","api"],function(e,t){$("#dataItem").html($("#otherOptionEditTpl-tpl").html()),h([e],g),v(n,u,a),navTree||(e.run(),navTree=e),t.getParam({},"otherOption:get"),c()}):e(["blocks/list","blocks/nav"],function(e,t){$("#dataItem").html($("#listTpl").html()),h([t,e],g),v(n,u,a),navTree||(t.run(),navTree=t),c()})):/^(stationInfo)$/.test(u)&&($(".stationPop").hide(),r.downHide(!0),a=="tree"?e(["blocks/customTree","blocks/nav"],function(e,t){h([t,e],g),v(n,u,a),navTree||(t.run(),navTree=t),c()}):e(["blocks/listSearch","blocks/list","blocks/nav"],function(e,t,r){$("#dataItem").html($("#listTpl").html()),h([r,e,t],g),v(n,u,a),navTree||(r.run(),navTree=r),c()}))}function c(){var e=!!u.length;$.each(u,function(t,n){if(!n.isOver())return e=!1,!1}),e||f>a?(i.loadTips.close(),f=0):(f+=200,$("body").oneTime("0.2s",function(){c()}))}function h(e,t){var n=[];p(),d(e,t)}function p(){$.each(u,function(e,t){t&&t.destory&&t.destory()}),u=[]}function d(e,t){var n=e.shift();n&&n.init&&(n.init.apply(n,t),u.push(n),d(e,t))}function v(e,t,n){r.resize().switchNav(e,t,n)}var u=[],a=1e3,f=0;return window.navTree=null,{init:function(e,t,n,r){return pagetype=t,l(e,t,n,r),r,s.init(),this},refresh:function(e,t,n){pagetype=t,l(e,t,n)}}}),define("login",["require","backbone","api","router","common"],function(e,t,n,r,i){var s,o=t.View.extend({el:"#login",options:{},events:{"click #submitBtn":"onSbumit"},initialize:function(e){var n=this;$("input[key=password]").val(""),$("input[key=username]").val(localStorage.getItem("username")||""),n.listenTo(t.Events,"login",function(e){console.log(e),localStorage.setItem("userinfo",JSON.stringify(e)),localStorage.setItem("collecting","true"),localStorage.setItem("username",e.username),r.to("manage/station")}),n.listenTo(t.Events,"login:fail",function(e){localStorage.clear(),alert("登录失败，请重试")})},onSbumit:function(){var e=i.getFormValue(this.el);n.login(e)}});return{init:function(e){return s=new o,this}}}),define("router",["require","api","backbone","context","ui","main","login","map"],function(e,t,n,r,i){var s="manage/station",o,u={index:function(){t.getSyestemConfig();var e=this;this.listenTo(n.Events,"systemConfig:update",function(t){e.login();return})},login:function(){$.get("templates/login.html?_r="+Math.random(),function(t){e(["login"],function(e){$("body").html(t),e.init()})})},manage:function(t,n,r,u){function f(){!$("#main").html().length||$("#map").length?$.get("templates/manage.html?_r="+Math.random(),function(s){$("#main").html(s),e(["main"],function(e){o=e,i.switchListAlertBox(n).switchBtnGroups(t,n,r),o.init(t,n,r,u)})}):(i.switchListAlertBox(n).switchBtnGroups(t,n,r),o.refresh(t,n,r,u))}if(!n){a.navigate(s,{trigger:!0});return}$("#wrap").length?f():$.get("templates/system.html?_r="+Math.random(),function(e){$("body").html(e),f()})},map:function(t,n,r){function i(){$.get("templates/map.html?_r="+Math.random(),function(t){$("#main").html(t);try{delete navTree,navTree=null}catch(n){console.log(n)}e(["map","ui"],function(e,t){t.resize(),e.init()})})}$("#wrap").length?i():$.get("templates/system.html?_r="+Math.random(),function(e){$("body").html(e),i()})},manageID:function(e,t){this.manage("manage",e,!1,{sid:t})}};u.routes={"":"index",":manage/:listType":"manage","manage/:listType/:id":"manageID",":settings/:listType":"manage",":settings/:listType/:subListType":"manage",":report/:listType":"manage",":qurey/:listType":"manage",map:"map",login:"login"},$("#wrap").show();var a=n.Router.extend(u);return a=new a,{to:function(e){a.navigate(e,{trigger:!0})},start:function(){n.history.start()}}}),require.config({baseUrl:"",urlArgs:"_v="+ +(new Date),packages:[{name:"zrender",location:"libs/chart/zrender",main:"zrender"}],waitSeconds:0,paths:{jquery:"libs/jquery.min",jqueryUI:"libs/jqueryui/jquery-ui.min",jqueryTime:"libs/jqueryui/jquery-ui-timepicker-addon.min",jJson:"libs/jquery.json",jForm:"libs/jquery.jqtransform",jtimer:"libs/jQuery.timers",domReady:"libs/domReady",backbone:"libs/backbone-min",_:"libs/underscore-min",bootstrap:"libs/bootstrap",charts:"libs/echarts.min",zTreeCore:"libs/jquery.ztree.core-3.5",zTreeExcheck:"libs/jquery.ztree.excheck-3.5",scrollbar:"libs/scrollbar/min/perfect-scrollbar.jquery.min",mCustomScrollbar:"libs/jquery.mCustomScrollbar.concat.min",table:"libs/jquery.dataTables",fixedColumn:"libs/dataTables.fixedColumns.min",fixedHeader:"libs/dataTables.fixedHeader.min",respond:"js/respond",router:"js/router",api:"js/api",main:"js/main",login:"js/login",ui:"js/ui",common:"js/common",map:"js/map",context:"js/context_model",blocks:"js/blocks",stationsinfoDialog:"js/dialog-stationsinfo"},shim:{bootstrap:["jquery"],table:["jquery"],jtimer:["jquery"],fixedColumn:["jquery","table"],zTreeCore:["jquery"],zTreeExcheck:["zTreeCore"],jJson:["jquery"],jForm:["jquery"],jqueryUI:["jquery"],jqueryTime:["jquery","jqueryUI"],backbone:["_"],respond:[""],common:["jquery"]}}),require(["jquery","router","api"],function(e,t,n){Date.prototype.pattern=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},n={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+n[this.getDay()+""]));for(var r in t)(new RegExp("("+r+")")).test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length==1?t[r]:("00"+t[r]).substr((""+t[r]).length)));return e},setInterval(function(){e("#realtime").html((new Date).pattern("yyyy-MM-dd EEE hh:mm:ss"))},1e3),e.timepicker.setDefaults(e.timepicker.regional["zh-CN"]),e.timepicker.regional["zh-CN"]={closeText:"关闭",prevText:"<上月",nextText:"下月>",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy/mm/dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年",timeOnlyTitle:"选择时间",timeText:"时间",hourText:"小时",minuteText:"分钟",secondText:"秒钟",millisecText:"毫秒",microsecText:"微秒",timezoneText:"时区",currentText:"现在时间",closeText:"关闭",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.datepicker.setDefaults(e.timepicker.regional["zh-CN"]),e.timepicker.setDefaults(e.timepicker.regional["zh-CN"]),e(document).tooltip(),t.start()}),define("index",function(){});