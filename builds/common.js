define(["require"],function(e){var t={inArray:function(e,t){var n=!1;return t&&t.length&&$.each(t,function(t,r){r===e&&(n=!0)}),n},getFormValue:function(e,t,n,r){var e=e&&e.length?e:$(document.body),i=r||"key",s={},o=arguments;if($("[sub-blocks]",e).length){var u=$("[sub-blocks]",e),a=u.attr("sub-blocks");u.length>1?(s[a]=[],$.each(u,function(e,r){s[a].push(o.callee($(r),t,n,a+"_key"))})):s[a]=o.callee(u,t,n,a+"_key")}if(typeof n!="undefined"&&n)var f=$("input[type=radio]["+i+"]:checked",e),l=$("input[type=checkbox]["+i+"]:checked",e),c=$("input[type=hidden]["+i+"]",e),h=$("[type!=radio][type!=checkbox]["+i+"]",e).add(f);else var f=$("input[type=radio]["+i+"]:visible:checked",e),l=$("input[type=checkbox]["+i+"]:visible",e),c=$("input[type=hidden]["+i+"]",e),h=$("[type!=radio][type!=checkbox]["+i+"]:visible",e).add(f);var p=$("[content_"+i+"]",e);return typeof t!="undefined"&&t&&(h=h.add(c)),h.length&&h.each(function(e,t){var n=$(t),r=n.attr(i),o=r.split("|")[0],u=r.split("|")[1];if(typeof s[o]=="undefined"){var a=n.val();u&&(a=Common.filter(a,{method:u.join(","),type:"get"})),s[n.attr(i)]=a}}),l&&l.length&&l.each(function(e,t){var n=$(t),r=n.attr(i),o=n.attr("specify-value");o?n.is(":checked")?s[r]=o.split("|")[0]:s[r]=o.split("|")[1]:n.is(":checked")&&(typeof s[r]=="undefined"?s[n.attr(i)]=n.val():s[n.attr(i)]=s[n.attr(i)]+","+n.val())}),$("select",e)&&$("select",e).length&&$("select",e).each(function(e,t){var n=$(t);s[n.attr("key")]=n.val()}),p&&p.length&&p.each(function(e,t){var n=$(t),r=n.attr("content_"+i);s[r]=n.html()}),s},setFormValue:function(e,t,n){function i(e){var t=$(e).parent().find("div,ul").remove().css("zIndex");$(e).unwrap().removeClass("jqTransformHidden").jqTransSelect(),$(e).parent().css("zIndex",t)}var r=n||"key";$.each(t,function(t,n){var s=t.split("|")[0],o=t.split("|")[1],u=$("["+r+"="+s+"]",e),a=$("[content_"+r+"="+s+"]",e),f=u.length;a.length&&a.html(o?Common.filter(n,{method:o,type:"set"}):n);if(f==1&&/^checkbox|radio$/.test(u.attr("type"))){var l=u.attr("specify-value");n==u.val()&&(u.filter(":visible").attr("checked","checked"),u.attr("switch-evt")&&u.attr("checked","checked").trigger("click").attr("checked","checked")),l&&(n==l.split("|")[0]?u.attr("checked","checked").trigger("click").attr("checked","checked"):u.removeAttr("checked"))}else if(f==1){o&&(n=Common.filter(n,{method:o,type:"set"}));try{u.val(n).trigger("change",!0)}catch(c){}}else f>1&&(n=n.split(","),u.removeAttr("checked"),$.each(n,function(e,t){u.filter("[value="+t+"]:visible").attr("checked","checked")}));var h=u[0]&&u[0].tagName;if(h&&h.toUpperCase()=="SELECT"){console.log(n);var p=u.find("option");p.each(function(e,t){console.log(t,$(t).attr("value")),$(t).attr("value")==n?$(t).attr("selected","selected"):$(t).removeAttr("selected")}),u.trigger("change",!0),i(u)}}),i("select#my_updated_select_box")},filter:function(e,t){var n,r,i,s;return t&&t.method&&(s=t.method.split(";"),$.each(s,function(s,o){n=/([\s\S]+)\(([^\)]+)\)/.exec(o),n?(i=n[1],r=n[2].split(" ")):(i=o,r=null);switch(i){case"encode":t.type&&"set"==t.type?e=decodeURIComponent(e):e=encodeURIComponent(e);break;case"escape":e=e.replace(/"/g,"&quot;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;");break;case"addslashes":e=e.replace(/"/g,'\\"'),e=e.replace(/'/g,"\\'");break;case"artTypeName":e=g_GetConfig.getArtTypeName(e);break;case"byteToMB":e=e?Math.ceil(e*10/1048576)/10:0;break;case"cut":r&&r[0]&&(r=parseInt(r[0]),e=e.substr(0,r))}})),e},loadTips:{time:2,dialogEl:null,show:function(e){var t='<div id="loadding"><div><img src="images/loading.gif" alt=""/></div><div class="message"><img src="" alt=""/><%= message %></div></div>',n=_.template(t)({message:e||""});this.close(),$("#loadding").length&&$("#loadding").parents(".ui-dialog").remove(),this.dialogEl=$(n).dialog({modal:!0,dialogClass:"tips",width:300,height:70})},success:function(e){},error:function(e){},close:function(){if(this.dialogEl)try{this.dialogEl.dialog("close")}catch(e){}return this}},tips:function(e,t){},cookie:{setCookie:function(e,t,n){var r=n||1500,i=new Date;i.setTime(i.getTime()+r*24*60*60*1e3),document.cookie=e+"="+encodeURIComponent(t)+";expires="+i.toGMTString()},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?decodeURIComponent(t[2]):null}},filterArray:function(e,n,r){var i=[];return $.each(e,function(e,s){t.inArray(s[r],n)&&i.push(s)}),i}};return t});