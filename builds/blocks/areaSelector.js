define(["require","api","backbone","zTreeExcheck"],function(e,t,n){var r,i={check:{enable:!0,chkStyle:"checkbox",nocheckInherit:!0},data:{key:{name:"title"},simpleData:{enable:!0,pIdKey:"pid"}}},s,o={name:"nav",data:null,tree:null,navPlugin:null,ids:[],checkedall:!1,initialize:function(e){var t=this;t.option={},$.extend(t.option,e||{}),t.listenTo(n.Events,"tree:get",function(e){t.data=e.list,t.filterData(),t.render()})},filterData:function(){var e=this;e.data&&$.each(e.data,function(t,n){e.option.value=="*"?n.checked=!0:e.option.value&&e.option.value.split(",").indexOf(n.id)>-1&&(console.log("yes data",n.id),n.checked=!0)})},getCheckedData:function(){this.ids=[];var e=this,t=this.tree.getCheckedNodes(),n={},r=!1,i=this.tree.getNodes();return $.each(t,function(t,r){e.ids.push(r.id),n[r.id]={id:r.id,pId:r.pId,name:r.name,level:r.level}}),console.log(i.length,t.length),e.data.length==t.length&&(e.checkedall=!0),n},getValue:function(){return this.getCheckedData(),this.checkedall?"*":this.ids.join(",")},setValue:function(e){if(e){var t=this.tree.getNodesByParam("id",e);this.tree.checkNode(t,!0,!0)}},destroy:function(){this.stopListening()},render:function(){var e=this,t;return e.ids=[],$.fn.zTree.init($("#treesWrap"),i,e.data),console.log("tree data",e.data),e.tree=$.fn.zTree.getZTreeObj("treesWrap"),e.tree.expandAll(!0),this}};return{init:function(e){return s=new(n.View.extend(o))(e),t.getTreeInfo(),s}}});