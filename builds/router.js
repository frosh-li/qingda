define(["require","api","backbone","context","ui"],function(e,t,n,r,i){var s="manage/station",o,u={index:function(){t.getSyestemConfig();var e=this;this.listenTo(n.Events,"systemConfig:update",function(t){e.login();return})},login:function(){$.get("templates/login.html?_r="+Math.random(),function(t){e(["login"],function(e){$("body").html(t),e.init()})})},manage:function(t,n,r,u){function f(){!$("#main").html().length||$("#map").length?$.get("templates/manage.html?_r="+Math.random(),function(s){$("#main").html(s),e(["main"],function(e){o=e,i.switchListAlertBox(n).switchBtnGroups(t,n,r),o.init(t,n,r,u)})}):(i.switchListAlertBox(n).switchBtnGroups(t,n,r),o.refresh(t,n,r,u))}if(!n){a.navigate(s,{trigger:!0});return}$("#wrap").length?f():$.get("templates/system.html?_r="+Math.random(),function(e){$("body").html(e),f()})},map:function(t,n,r){function i(){$.get("templates/map.html?_r="+Math.random(),function(t){$("#main").html(t);try{delete navTree,navTree=null}catch(n){console.log(n)}e(["map","ui"],function(e,t){t.resize(),e.init()})})}$("#wrap").length?i():$.get("templates/system.html?_r="+Math.random(),function(e){$("body").html(e),i()})},manageID:function(e,t){this.manage("manage",e,!1,{sid:t})}};u.routes={"":"index",":manage/:listType":"manage","manage/:listType/:id":"manageID",":settings/:listType":"manage",":settings/:listType/:subListType":"manage",":report/:listType":"manage",":qurey/:listType":"manage",map:"map",login:"login"},$("#wrap").show();var a=n.Router.extend(u);return a=new a,{to:function(e){a.navigate(e,{trigger:!0})},start:function(){n.history.start()}}});